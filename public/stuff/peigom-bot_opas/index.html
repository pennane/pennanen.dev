<!DOCTYPE html>
<html lang="fi">
  <head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=UA-126133790-2"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "UA-126133790-2");
    </script>

    <meta charset="UTF-8" />
    <meta http-equiv="refresh" content="0; URL=https://peigom.pennanen.dev" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta content="Opas peigom-botille" name="description" />
    <meta content="Arttu Pennanen" name="author" />
    <meta http-equiv="refresh" content="0; URL=https://peigom.pennanen.dev" />
    <title>Peigom-bot</title>
    <link href="highlight/styles/github.css" rel="stylesheet" />
    <link rel="icon" type="image/png" href="favicon.png" />
    <script src="highlight/highlight.pack.js"></script>
    <script>
      hljs.initHighlightingOnLoad();
    </script>
    <link href="styling/style.css" rel="stylesheet" />
    <script src="https://use.fontawesome.com/b346d88d65.js"></script>
    <link
      href="https://fonts.googleapis.com/css?family=Montserrat|Raleway"
      rel="stylesheet"
    />
  </head>

  <body>
    <div id="wrap">
      <div class="header">
        <h3>Keuda</h3>
        <h1>peigom-bot <i class="fa fa-sliders"></i></h1>
        <div id="scene"></div>
        <h2>peigom discord botin asennus ja käyttöönotto</h2>
        <p>Arttu Pennanen 2018</p>
      </div>
      <hr />
      <div class="main">
        <div id="alku">
          <p>
            <span class="hl">Peigom-bot</span> on javascriptillä kirjoitettu
            <a href="https://discordapp.com/">Discord</a> botti, jonka
            ominaisuuksiin kuuluu:
          </p>
          <ul>
            <li>Custom komennot</li>
            <li>Discord serverien hallinta</li>
            <li>Chat filtterit</li>
            <li>... ja paljon muuta!</li>
          </ul>
          <p>
            <span class="hl">Peigom-botille</span> on osaavan helppo luoda omia
            komentoja ja toimintoja muokkaamalla botin mukana tulevia
            <span class="hl">javascript</span> tiedostoja.
          </p>
          <p>
            Botin tiedostot voi ladata
            <a href="https://github.com/Pennane/peigom-bot">täältä</a>.
          </p>
        </div>
        <div id="toc">
          <p><span class="hl">Sisällysluettelo</span></p>
          <ul>
            <li>
              OSA 1. <a href="#osa1">Asennus</a>
              <ul>
                <li>
                  <a href="#osanode">node.js</a>
                </li>
                <li>
                  <a href="#osafile">Botin tiedostojen hakeminen</a>
                </li>
                <li>
                  <a href="#osadep">Riippuvuuksien asentaminen</a>
                </li>
              </ul>
            </li>
            <li>
              OSA 2. <a href="#osa2">Configurointi</a>
              <ul>
                <li>
                  <a href="#osaapp">Discord applikaation luonti</a>
                </li>
                <li>
                  <a href="osaauth">Botin valtuutus</a>
                </li>
                <li>
                  <a href="#osaconf">Botin configurointi</a>
                </li>
              </ul>
            </li>
            <li>
              OSA 3. <a href="#osa3">Käyttö</a>
              <ul>
                <li>
                  <a href="#osastart">Botin käynnistäminen</a>
                </li>
                <li>
                  <a href="#osancom">Botin käyttö Discordissa</a>
                </li>
              </ul>
            </li>
            <li>
              OSA 4. <a href="#osa4">Toimintojen luonti ja botin rakenne</a>
              <ul>
                <li>
                  <a href="#osabro">Aloittaminen</a>
                </li>
                <li>
                  <a href="#osarak">Peigom-botin rakenne</a>
                </li>
                <li>
                  <a href="#osaluo">Uuden komennon luonti</a>
                </li>
              </ul>
            </li>
          </ul>
        </div>
        <div id="content">
          <div class="osa" id="osa1">
            <h2>Asennus</h2>
            <hr />
            <p>
              peigom-bot on parasta asentaa Unix käyttöjärjestelmän päälle,
              mutta se toimii myös Windows järjestelmissä.
            </p>
            <p>
              Node.js ja npm on ladattava ennen botin asennusta. Node.js ja npm
              asentuvat molemmat samassa paketissa.
            </p>
            <p id="osanode">
              Asentajan voi hakea
              <a href="https://nodejs.org/en/download/">täältä</a>.
            </p>
            <br />
            <p>
              Voit tarkistaa ovatko node.js ja npm asennettu kirjoittamalla
              terminaaliin:
            </p>
            <div class="code">
              <code class="code"
                >node -v<br />
                npm -v</code
              >
            </div>
            <p>
              Kun Node ja npm ovat asennettu, voit aloittaa botin asennuksen.
            </p>
            <br />
            <p id="osafile">
              Hae peigom-botin tiedostot
              <a href="https://github.com/Pennane/peigom-bot">täältä</a>. Pura
              botin tiedostot haluamaasi hakemistoon.
            </p>
            <p>
              Huomaa, jos asennat botin Windows järjestelmään, valitse
              brancheista windows supported version ja lataa se.
            </p>
            <br />
            <p>Siirry terminaalissa asennushakemistoosi.</p>
            <div class="code">
              <code class="code">cd hakemistosi-polku</code>
            </div>
            <br />
            <p id="osadep">Asenna botin tarvitsemat node-moduulit.</p>
            <div class="code">
              <code class="code">npm install<br /></code>
            </div>
            <br />
            <p>Moduulien asennettua voi siirtyä botin configurointiin.</p>
          </div>
          <div class="osa" id="osa2">
            <h2>Configurointi</h2>
            <hr />
            <p id="osaapp">
              Discord botit tarvitsevat isännäkseen bottikäyttäjän. Tämän
              bottikäyttäjän kautta botti pääsee kirjautumaan Discordiin. Myö
              peigom-botille on luotava oma bottikäyttäjä.
            </p>
            <p>
              Bottikäyttäjä luodaan Discordin kehittäjäpaneelissa,
              <a href="https://discordapp.com/developers/applications/"
                >täällä</a
              >.
            </p>
            <br />
            <p>
              Luo itsellesi uusi Discord applikaatio ja sille bottikäyttäjä.
            </p>
            <img alt="luo bottikäyttäjä" class="showpic" src="images/db.png" />
            <br /><br />
            <p id="osaauth">
              Sinun tarvitsee valtuuttaa uusi discord applikaatiosi
              serverillesi.
            </p>
            <p>
              Valtuuttamisen teet liittämällä alla olevan linkin selaimeesi.
            </p>
            <div class="code-maxwidth">
              <code class="code-maxwidth"
                >https://discordapp.com/oauth2/authorize?&amp;client_id={T&Auml;H&Auml;N-BOT-ID}&amp;scope=bot&amp;permissions=8</code
              >
            </div>
            <p class="hl">
              !HUOM vaihda '{TÄHÄN-BOT-ID}' applikaatiosi sivulta löytyvää
              Client-id:seen.
            </p>
            <br /><img
              src="images/auth.png"
              alt="auth"
              class="showpic"
            /><br /><br /><br /><br /><br />
            <p>
              Botin applikaatiosivulta saat myös bottikäyttäjäsi tokenin, jota
              tarvitset botin configuraatio tiedoston configuroinnissa.
            </p>

            <img alt="kopioi token" class="showpic" src="images/dt.png" />
            <p class="hl">
              HUOMAA! Pidä bottikäyttäjän token turvassa, sen avulla kenen
              tahansa on mahdollista saada valta bottisi yli.
            </p>
            <br /><br /><br /><br /><br /><br />
            <p id="osaconf">
              Bottikäyttäjän luomisen jälkeen muokataan peigom-botin
              configuraatio tiedostoja:
              <span class="ol-code">bot/config/authorize_example.json</span> ja
              <span class="ol-code">bot/config/default_example.json</span>. Mikä
              tahansa teksieditori käy tähän hyvin.
            </p>
            <br />
            <p>
              authorize_exapmple.json tiedostossa sinun täytyy vain asettaa
              hankkineesi token
            </p>
            <p>
              default_example.json tiedoston alkupuolelta löytyy discord osio,
              jonka arvot ovat välttämätöntä päivittää peigom-botin toiminnan
              onnistumiseksi.
            </p>
            <p>Muokkaa tiedostot vastaamaan arvojasi.</p>
            <pre>
<code class="js">
"discord": {
        "prefix": ",", // Komentojen prefix
        "authorized": [
            "USERID" // Valtuutettujen käyttäjien discord ID/ID:T
        ],
        "authorizedRoles": [
            "ROLENAME" // Valtuutetun roolin nimi/nimet
        ],
        "presence": {
            "activities": [         // Jokaiselle riville voi laittaa aktiviteetin,
                ",auta",            //  aktiviteetti vaihtuu 15 min välein
                "my name be jeff",  //    Voit jättää vain yhden rivin.
                "yo big man bom",
                "sugondese is a funny meme",
                "pimpeli pom, nimi o peigom",
                ">:^V"
            ],
            "type" : "LISTENING",    //Aktiviteettien tyyppi (watching, playing, listening)
            "refreshrate" : 15       // Kuinka monen minuutin välein aktiviteetti muuttuu
        }
    },                                  
</code>
                     </pre>
            <p>
              Tässä esimerkki miltä json tiedoston discord arvot voisivat
              näyttää:
            </p>
            <pre>
<code class="js">
"discord": {
        "prefix": ",",
        "authorized": [
            "142097697528601857"
        ],
        "authorizedRoles": [
            "peigom-admin"
        ],
        "presence": {
            "activities": [
                ",auta",
                "my name be jeff",
                "yo big man bom",
                "sugondese is a funny meme",
                "pimpeli pom, nimi o peigom",
                ">:^V"
            ],
            "type" : "PLAYING",
            "refreshrate" : 20
        }
    }, 
},                                  
</code>
                     </pre>
            <br />
            <p>TÄRKEÄÄ,</p>
            <p>
              nimeä tiedostot vielä uudelleen poistamalla tiedostonimien
              lopuista <span class="ol-code">_example</span>.
            </p>
            <br />
            <p>
              Peigom-botin configuraatio tiedostoon tallennetaan discord
              tietojen lisäksi komentojen asetuksia, sekä sanastofiltterin
              sanat. Niitä voi tarvittaessa muokata, mutta väärin muokattuna
              muokatun osan toiminta voi lakata.
            </p>
            <br /><br />
          </div>
          <div class="osa" id="osa3">
            <h2>Käyttö</h2>
            <hr />
            <p>
              Asennettuasi ja configuroituasi peigom-botin on botti valmis
              käynnistämiseen.
            </p>
            <p>
              Avaa terminaali ja vaihda sijainti asennushakemistoon. (<span
                class="ol-code"
                >cd hakemiston-polku</span
              >)
            </p>

            <br />
            <p id="osastart">
              Unix järjestelmässä peigom-botin voi käynnistää komennolla
            </p>
            <div class="code"><code class="code">./bot/runbot.sh</code></div>
            <p>
              Windows järjestelmässä (toimii myös unixissa) voi myös käyttää
            </p>
            <div class="code"><code class="code">node bot/bot.js</code></div>
            <br /><br />
            <p>Onnistunut botin suorittaminen näyttää tältä:</p>
            <img src="images/success.png" alt="success" class="showpic" />
            <br /><br />
            <p>
              Jos peigom-bot on valtuutettu oikein, sen pitäisi näkyä
              hallinnoimallasi discord serverillä.
            </p>
            <img
              src="images/botindisc.png"
              alt="botti discordissa"
              class="showpic"
            /><br /><br />
            <h2 id="osancom">Komentojen käyttö discordissa</h2>
            <p>
              Botin toimivuutta voi kokeilla kirjoittamalla tekstichattiin
              <span class="ol-code">,ping</span>
            </p>
            <img src="images/ping.png" alt="ping" class="showpic" /><br /><br />
            <div class="commands">
              <p>Tässä kaikki botin osaamat komennot:</p>
              <ul class="commands">
                <li>,thonk</li>
                <li>,dankmeme</li>
                <li>,animation</li>
                <li>,oof</li>
                <li>,tomb</li>
                <li>,pussukat</li>
                <li>,hus</li>
                <li>,ping</li>
                <li>,auta</li>
                <li>,help</li>
                <li>,raha</li>
              </ul>
            </div>
            <div class="commands admin">
              <p>
                Alla vielä komennot, joita voivat käyttää vain
                <span class="ol-code">defaults.json</span> tiedostossa
                spesifioidut käyttäjät:
              </p>
              <ul class="commands admin">
                <li>,busy</li>
                <li>,sudo</li>
                <li>,sudopm</li>
                <li>,restart</li>
                <li>,sammuta</li>
                <li>,puhista</li>
                <li>,spam</li>
              </ul>
            </div>
            <p>
              Voit myös listata kaikki botin osaamat komennot kirjoittamalla:
            </p>
            <div class="code"><code class="code">,auta</code></div>
            <p>Saat lisätietoa haluamastasi komennosta kirjoittamalla</p>
            <div class="code">
              <code class="code">,auta &lt;komennon nimi&gt;</code>
            </div>
          </div>
          <div class="osa" id="osa4">
            <h2>Toimintojen luonti ja botin rakenne</h2>
            <hr />
            <p id="osabro">
              On hyvä tietää, että peigom-bottiin uusien toimintojen ja
              komentojen lisääminen edellyttää käyttäjältä Javascript osaamista.
              Bottiin ei tähän mennessä ole tehty mitään muuta tapaa luoda
              toimintoja, kuin raa'alla koodaamisella.
            </p>
            <p>
              Peigom-bot on kumminkin hyvä alusta kirjoittaa uusia komentoja,
              jos osaamista löytyy.
            </p>
            <br />
            <p>
              Peigom-botin muokkaamiseen voi käyttää mitä tahansa
              teksti-editoria, mutta
              <a href="https://code.visualstudio.com/">Visual Studio Code</a> on
              suositeltu editori.
            </p>
            <br />

            <h3 id="osarak">Botin rakenne</h3>
            <p>On hyvä sisäistää botin toiminta ennen sen muokkaamista.</p>
            <p>Peigom botti koostuu niin sanotusti neljästä osasta.</p>
            <div class="core">
              <p>
                <span class="ol-code">bot.js</span> on botin ydin. Se käsittelee
              </p>
              <ul class="margin-left">
                <li>
                  Botin käynnistyksen
                </li>
                <li>
                  Saapuvien viestien tulkitsemisen ja merkkaamisen
                </li>
                <li>
                  Ja on välikätenä moduuleille
                </li>
              </ul>
              <p>
                Bot.js sisältää todella vähän sellaista mitä käyttäjän
                tarvitsisi muokata.
              </p>
            </div>
            <div class="core">
              <p>
                <span class="ol-code">Message-Parser.js</span> on ensimmäinen
                botin moduuleista. Se käsittelee
              </p>
              <ul class="margin-left">
                <li>
                  Saapuvien viestien sisällön
                </li>
                <li>
                  Ja tulkitsee onko tuleva viesti mahdollisesti komento
                </li>
              </ul>
              <p>MessageParser.js ei suositeltava muokattavaksi.</p>
            </div>
            <div class="core">
              <p>
                <span class="ol-code">Command-Handler.js</span> on toinen botin
                moduuleista. Se varmistaa, että
              </p>
              <ul class="margin-left">
                <li>
                  Tuleva viesti on varmasti olemassa oleva komento
                </li>
                <li>
                  Ja tarkastaa onko viestin lähettäjä valtuutettu käyttämään
                  kyseistä komentoa.
                </li>
              </ul>
              <p>CommandHandler.js ei suositeltava muokattavaksi.</p>
            </div>
            <div class="core">
              <p>
                <span class="ol-code">Command-Executor.js</span> on viimeinen
                botin moduuleista. Se
              </p>
              <ul class="margin-left">
                <li>
                  Suorittaa komennot lopullisesti
                </li>
              </ul>
              <p>Command-Executor.js ei suositeltava muokattavaksi.</p>
            </div>
            <h3 id="osaluo">Uusien komentojen luonti</h3>
            <p>
              Kopio botin juuresta löytyvä
              <span class="ol-code">example-command.js</span> kansioon
              <span class="ol-code">./bot/modules/commands</span>
            </p>

            <p>
              Nimeä tiedosto samalla termillä, kuin millä tahdot sitä
              Discordissa kutsua.
            </p>
            <p>Esim: testi.js</p>
            <p>
              Muokkaa tiedoston info muuttujaa vastaamaan komentoasi ja kirjoita
              exports.run() metodiin kaikki komennon logiikka.
            </p>
            <p>
              Komento toimii samantien, jos siinä ei ole syntaksi virheitä ja se
              on varmasti oikeassa bot/modules/commands kansiossa.
            </p>
          </div>
        </div>
      </div>
      <div class="footer">
        <p class="foot">&copy; Arttu Pennanen <span id="curYr"></span></p>
      </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script>
      !window.jQuery &&
        document.write('<script src="js/jquery-3.3.1.min.js"><\/script>');
    </script>
    <script src="js/three.min.js"></script>
    <script src="js/main.js"></script>
  </body>
</html>
