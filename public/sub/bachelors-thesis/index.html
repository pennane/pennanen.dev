<!DOCTYPE html> 
<html lang="fi"> 
<head> <title>Pragmaattisen funktionaalisen ohjelmoinnin arviointi</title> 
<meta charset='UTF-8' /> 
<meta content='TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)' name='generator' /> 
<link href='main.css' rel='stylesheet' type='text/css' /> 
<!--  for beautifying  --><link href='site.css' rel='stylesheet' type='text/css' /> 
<script type='text/x-mathjax-config'> MathJax.Hub.Config({ extensions: ["tex2jax.js"], jax: ["input/TeX", "output/HTML-CSS"], tex2jax: { inlineMath: [ ['$','$'], ["\\(","\\)"] ], displayMath: [ ['$$','$$'], ["\\[","\\]"] ], processEscapes: true }, "HTML-CSS": { availableFonts: ["TeX"] } }); </script> <script src='http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML' type='text/javascript'></script> 
</head><body>
<div class='center'>
<p>
</p> 
<p><strong><span class='ecbx-1728'>Pragmaattisen funktionaalisen</span><br />
<span class='ecbx-1728'>ohjelmoinnin arviointi</span></strong>                                       

                                                                         
</p> 
<p><strong></strong>
</p> 
<p>Insinööri (AMK)
</p> 
<p>Tieto- ja viestintätekniikka
</p> 
<p>Ohjelmistotuotanto
</p> 
<p>Insinöörityö
</p> 
<p>Ohjaaja:  FM Simo Silander
</p> 
<p>Metropolia Ammattikorkeakoulu
</p> 
<p>18.11.2024
</p> 
<p><span class='ecrm-1095'>Pysyvä osoite: </span><a href='https://urn.fi/URN:NBN:fi:amk-2024111828665'><span class='ecrm-1095'>https://urn.fi/URN:NBN:fi:amk-2024111828665</span></a>
</p> 
</div>
                                                                         

                                                                         
   <section class='abstract' role='doc-abstract'> 
<h3 class='abstracttitle'><span class='ecbx-1095'>Tiivistelmä</span></h3>
<p>
             <span class='ecrm-1095'>Funktionaalista   ohjelmointia   tukee   vahva   teoreettinen
      tausta,  ja  sen  käytännön  toteutus  eroaa  olennaisesti  muista
      ohjelmointiparadigmoista.
      Tässä  insinöörityössä  tarkastellaan,  miten  funktionaalisen
      ohjelmoinnin  periaatteita  voidaan  pragmaattisesti  sisällyttää
      ohjelmistoprojekteihin.</span><br class='newline' />
      </p> 
<p>     <span class='ecrm-1095'>Käydään  läpi,  miten  ohjelmistoympäristöön  voidaan
      tuoda funktionaalisen ohjelmoinnin kieliagnostisia piirteitä, jotka
      eivät                                ole                                sidoksissa
      käytettävään ohjelmointikieleen. Koodiesimerkit, näkemykset
      ja perustelut pohjautuvat kokemukseen ohjelmistoyrityksessä sekä
      julkisiin                                                                 lähteisiin,
      joissa käsitellään funktionaalisen ohjelmoinnin, kategoriateorian,
      ongelmien mallintamisen ja ohjelmoinnin periaatteita.</span><br class='newline' />
      </p> 
<p>     <span class='ecrm-1095'>Tuloksena perustellaan funktionaalisen ohjelmoinnin käyttöä
      ohjelmien  oikeellisuuden  ja  ylläpidettävyyden  parantamiseksi.
      Näytetään,
      miten ohjelmat voidaan estää valehtelemasta ja miten operaatioita
      voidaan ketjuttaa funktioiden ja monadien avulla. Funktionaalista
      ohjelmointia  voidaan  liittää  muihin  ohjelmointiparadigmoihin,
      kunhan  huolehditaan  ohjelmiston  monimutkaisuuden  hallinnasta.
      Ohjelmoijat lähtökohtaisesti ajattelevat ongelmia ja ratkaisuja sen
      ohjelmointikielen näkökulmasta, jota he käyttävät.</span>
</p> 
</section>
                                                                         

                                                                         
<p>   <strong><span class='ecbx-1440'>Lisenssi</span></strong>
</p> 
<p>   <strong><span class='ecbx-1200'>Creative Commons Attribution 4.0 International (CC BY
4.0)</span></strong>
</p> 
<p>   <strong><span class='ecbx-1200'>Voit vapaasti:</span></strong> </p> 

      <ul class='itemize1'>
      <li class='itemize'>Jakaa  —  kopioida  aineistoa  ja  levittää  sitä  edelleen  missä
      tahansa  välineessä  ja  muodossa  missä  tahansa  tarkoituksessa,
      myös kaupallisesti.
      </li>
      <li class='itemize'>Muunnella  —  remiksata  ja  muokata  aineistoa  sekä  luoda  sen
      pohjalta  uusia  aineistoja  missä  tahansa  tarkoituksessa,  myös
      kaupallisesti.</li></ul>
<p>   <strong><span class='ecbx-1200'>Seuraavilla ehdoilla:</span></strong> </p> 

      <ul class='itemize1'>
      <li class='itemize'>Nimeä — Sinun on mainittava lähde asianmukaisesti, tarjottava
      linkki lisenssiin sekä merkittävä, mikäli olet tehnyt muutoksia.<br class='newline' />Voit tehdä yllä olevan millä tahansa kohtuullisella tavalla, mutta
      et  siten,  että  annat  ymmärtää  lisenssinantajan  suosittelevan
      sinua tai teoksen käyttöäsi.
      </li>
      <li class='itemize'>Ei muita rajoituksia — Et voi asettaa sellaisia oikeudellisia ehtoja tai
      teknisiä estoja, jotka estävät oikeudellisesti muita tekemästä
      mitään sellaista, minkä lisenssi sallii.</li></ul>
                                                                         

                                                                         
   <h2 class='likechapterHead' id='sisallysluettelo'><a id='x1-1000'></a>Sisällysluettelo</h2>
   <div class='tableofcontents'>
   <span class='chapterToc'>1 <a href='#johdanto' id='QQ2-1-2'>Johdanto</a></span>
<br />   <span class='chapterToc'>2 <a href='#motivaatio' id='QQ2-1-3'>Motivaatio</a></span>
<br />   <span class='sectionToc'>2.1 <a href='#kokemukset-funktionaalisesta-ohjelmoinnista' id='QQ2-1-5'>Kokemukset funktionaalisesta ohjelmoinnista</a></span>
<br />   <span class='sectionToc'>2.2 <a href='#lahestymistapa' id='QQ2-1-7'>Lähestymistapa</a></span>
<br />   <span class='chapterToc'>3 <a href='#teoreettinen-tausta' id='QQ2-1-8'>Teoreettinen tausta</a></span>
<br />   <span class='sectionToc'>3.1 <a href='#funktionaalinen-ohjelmointi' id='QQ2-1-9'>Funktionaalinen ohjelmointi</a></span>
<br />   <span class='subsectionToc'>3.1.1 <a href='#tyon-nimeamiskaytanteet' id='QQ2-1-10'>Työn nimeämiskäytänteet</a></span>
<br />   <span class='subsectionToc'>3.1.2 <a href='#puhtaat-funktiot' id='QQ2-1-12'>Puhtaat funktiot</a></span>
<br />   <span class='subsectionToc'>3.1.3 <a href='#kombinaattorit' id='QQ2-1-13'>Kombinaattorit</a></span>
<br />   <span class='subsectionToc'>3.1.4 <a href='#yhdistetyt-funktiot-ja-niiden-vahva-merkitys' id='QQ2-1-15'>Yhdistetyt funktiot ja niiden vahva merkitys</a></span>
<br />   <span class='sectionToc'>3.2 <a href='#tyyppiteoria-ja-joukkooppi' id='QQ2-1-20'>Tyyppiteoria ja joukko-oppi</a></span>
<br />   <span class='subsectionToc'>3.2.1 <a href='#joukkotietorakenne' id='QQ2-1-22'>Joukkotietorakenne</a></span>
<br />   <span class='subsectionToc'>3.2.2 <a href='#funktioilla-joukoista-toisiin' id='QQ2-1-23'>Funktioilla joukoista toisiin</a></span>
<br />   <span class='subsectionToc'>3.2.3 <a href='#kategoriateoria' id='QQ2-1-31'>Kategoriateoria</a></span>
<br />   <span class='sectionToc'>3.3 <a href='#monadi' id='QQ2-1-32'>Monadi</a></span>
<br />   <span class='subsectionToc'>3.3.1 <a href='#yleiset-monadit' id='QQ2-1-34'>Yleiset monadit</a></span>
<br />   <span class='subsectionToc'>3.3.2 <a href='#monadin-implementointi' id='QQ2-1-35'>Monadin implementointi</a></span>
<br />   <span class='subsectionToc'>3.3.3 <a href='#monadin-kayttaminen' id='QQ2-1-36'>Monadin käyttäminen</a></span>
<br />   <span class='sectionToc'>3.4 <a href='#pragmaattisuus-funktionaalisessa-ohjelmoinnissa' id='QQ2-1-38'>Pragmaattisuus funktionaalisessa ohjelmoinnissa</a></span>
<br />   <span class='sectionToc'>3.5 <a href='#funktionaalinen-ohjelmointi-typescript' id='QQ2-1-39'>Funktionaalinen ohjelmointi &amp; TypeScript</a></span>
<br />   <span class='subsectionToc'>3.5.1 <a href='#kielen-sopivuus-funktionaaliseen-ohjelmointiin' id='QQ2-1-40'>Kielen sopivuus funktionaaliseen ohjelmointiin</a></span>
<br />   <span class='subsectionToc'>3.5.2 <a href='#algebralliset-tietotyypit' id='QQ2-1-43'>Algebralliset tietotyypit</a></span>
<br />   <span class='subsectionToc'>3.5.3 <a href='#kirjastot' id='QQ2-1-46'>Kirjastot</a></span>
<br />   <span class='subsectionToc'>3.5.4 <a href='#promisetietorakenne-on-miltei-monadi' id='QQ2-1-47'>Promise-tietorakenne on miltei monadi</a></span>
<br />   <span class='chapterToc'>4 <a href='#funktionaalisia-kaytanteita-eifunktionaalisissa-ohjelmointikielissa' id='QQ2-1-48'>Funktionaalisia käytänteitä ei-funktionaalisissa ohjelmointikielissä</a></span>
<br />   <span class='sectionToc'>4.1 <a href='#opi-kerran-kayta-kaikkialla' id='QQ2-1-49'>Opi kerran, käytä kaikkialla</a></span>
<br />   <span class='sectionToc'>4.2 <a href='#yhdistetyt-funktiot' id='QQ2-1-51'>Yhdistetyt funktiot</a></span>
<br />   <span class='sectionToc'>4.3 <a href='#puhdas-funktio-ei-ole-aina-paras-ratkaisu' id='QQ2-1-54'>Puhdas funktio ei ole aina paras ratkaisu</a></span>
<br />   <span class='sectionToc'>4.4 <a href='#ongelmien-mallintaminen-lisaa-turvallisuutta' id='QQ2-1-57'>Ongelmien mallintaminen lisää turvallisuutta</a></span>
<br />   <span class='subsectionToc'>4.4.1 <a href='#virheet-mukaan-mallintamiseen' id='QQ2-1-64'>Virheet mukaan mallintamiseen</a></span>
<br />   <span class='subsectionToc'>4.4.2 <a href='#resultmonadi' id='QQ2-1-69'>Result-monadi</a></span>
<br />   <span class='chapterToc'>5 <a href='#kokemukset' id='QQ2-1-75'>Kokemukset</a></span>
<br />   <span class='sectionToc'>5.1 <a href='#luettavuus' id='QQ2-1-76'>Luettavuus</a></span>
<br />   <span class='sectionToc'>5.2 <a href='#uudelleenkaytettavyys' id='QQ2-1-77'>Uudelleenkäytettävyys</a></span>
<br />   <span class='sectionToc'>5.3 <a href='#tehokkuus' id='QQ2-1-78'>Tehokkuus</a></span>
<br />   <span class='chapterToc'>6 <a href='#johtopaatokset-ja-suositukset' id='QQ2-1-79'>Johtopäätökset ja suositukset</a></span>
<br />   <span class='sectionToc'>6.1 <a href='#johtopaatokset' id='QQ2-1-80'>Johtopäätökset</a></span>
<br />   <span class='sectionToc'>6.2 <a href='#aihepiirin-syventaminen' id='QQ2-1-81'>Aihepiirin syventäminen</a></span>
<br />   <span class='subsectionToc'>6.2.1 <a href='#kategoriateoria1' id='QQ2-1-82'>Kategoriateoria</a></span>
                                                                         

                                                                         
<br />   <span class='subsectionToc'>6.2.2 <a href='#fantasylandspesifikaatio' id='QQ2-1-83'>Fantasyland-spesifikaatio</a></span>
<br />   <span class='subsectionToc'>6.2.3 <a href='#fptskirjasto' id='QQ2-1-84'>Fp-ts-kirjasto</a></span>
<br />   <span class='subsectionToc'>6.2.4 <a href='#eri-ohjelmointikielet' id='QQ2-1-85'>Eri ohjelmointikielet</a></span>
<br />   <span class='subsectionToc'>6.2.5 <a href='#tunnetut-ohjelmistokehittajat' id='QQ2-1-86'>Tunnetut ohjelmistokehittäjät</a></span>
<br />   <span class='chapterToc'>7 <a href='#yhteenveto' id='QQ2-1-87'>Yhteenveto</a></span>
<br />   <span class='chapterToc'> <a href='#lahteet1'>Lähteet</a></span>
<br />   <span class='chapterToc'> <a href='#sanasto'>Sanasto</a></span>
   </div>
                                                                         

                                                                         
                                                                         

                                                                         
   <h2 class='chapterHead' id='johdanto'><span class='titlemark'> 1</span><br /><a id='x1-20001'></a>Johdanto</h2>
<p>Insinöörityössä tutkitaan funktionaalisen ohjelmoinnin käytänteitä
sellaisissa ohjelmointikielissä, joissa funktionaalinen ohjelmointi ei ole ollut
kielen luonnin peruste. Etsitään pragmaattista, tavoitelähtöistä puolta
funktionaalisesta ohjelmoinnista, jossa teoriaa ei painoteta ilman selkeitä ja
perusteltuja syitä. Funktionaalinen ohjelmointi on erittäin teoreettista ja
akateemista lähtökohdiltaan.
</p> 
<p>   Kokemusten ja median tarkkailun perusteella on huomattu funktionaalisten
periaatteiden yhdistyvän yleiseen näkemykseen siitä, mitä ohjelmoinnin
tulisi olla. Funktionaalinen ohjelmointi ei ole kuitenkaan noussut valtavirran
suosioon. Insinöörityön tavoitteena on etsiä toimintaperiaatteita
funktionaalisen ohjelmoinnin tuontiin mukaan arkiseen ohjelmointiin ilman
pakonomaista teoriaa. Insinöörityössä kuitenkin etsitään funktionaalisen
ohjelmoinnin teoriasta niitä osia, joilla voitaisiin kasvattaa funktionaalisen
ohjelmoinnin pragmaattista mukaanottoa.
</p> 
<p>   Insinöörityössä tutkitaan funktionaalisen ohjelmoinnin teoriaa
hieman tavanomaisesta poikkeavasta näkökulmasta, jossa ohjelmat
ajatellaan joukko-opin näkökulmasta olevan siirtymiä joukoista toisiin.
Ei paneuduta kaikkiin käsitteisiin, joita tavanomaisesti tarkastellaan
funktionaalisen ohjelmoinnin arvioinnin yhteydessä. Etsitään empiirisiä
anekdootteja tunnettujen ohjelmistokehittäjien töistä, ja kokemuksista
työympäristössä. Haastatellaan lyhyesti entistä Google-kehittäjää, joka
puoltaa ohjelmointikielen omien ominaisuuksien käyttämistä.
</p> 
<p>   Insinöörityön koodiesimerkeissä käytetään <a class='glossary' href='#glo_ts'>TypeScriptiä</a> ja
<a class='glossary' href='#glo_js'>JavaScriptiä</a>. Vaikka kaikki validi JavaScript-koodi on validia TypeScript-koodia
(<a href='#Xtypsecript_website'>4</a>), niin kielten nimiä käytetään työssä tilanteeseen sopien. Kirjoitetaan
TypeScriptistä, kun sen tarjoamat tyypit JavaScriptin päälle ovat
tilanteeseen nähden merkittäviä. Toisaalta kirjoitetaan JavaScriptistä, kun
tyypit eivät ole esimerkille merkittäviä. Muuten pyritään pitämään
käsitellyt asiat sellaisina, että niitä voisi hyödyntää myös muissa
ei-funktionaalisissa ohjelmointikielissä.
                                                                         

                                                                         
   </p> 

   <h2 class='chapterHead' id='motivaatio'><span class='titlemark'> 2</span><br /><a id='x1-30002'></a>Motivaatio</h2>
<p>Ei ole yksiselitteistä, mitä <a class='glossary' href='#glo_functional_programming'>funktionaalisen ohjelmoinnin</a> tulisi olla ja miten
sitä tulisi käyttää. Matemaatikot vannovat funktionaalisen ohjelmoinnin
<a class='glossary' href='#glo_correctness'>oikeellisuuden</a> nimeen, ja pragmaatikot kauhistuvat. Kuuluisan ristiriitaiset
ja mutkikkaat keskustelut hämärtävät pohjaa, minkä päälle
funktionaalinen ohjelmointi on rakennettu. (<a href='#Xstackoverflow_what_monad'>67</a>; <a href='#Xstackoverflow_why_monad'>69</a>; <a href='#Xpromises-spec-94'>57</a>; <a href='#Xdear_functional_bros'>20</a>)
</p> 
<p>   Funktionaalisen ohjelmoinnin hyötyjä on usein sanottu löytyvän
suurelta osin vain matemaattisissa tai datapainotteisissa ohjelmissa (<a href='#Xcantarella_fp_haitat'>16</a>, 10).
Ajatus on haastettavissa.
</p> 
<p>   Ensimmäisenä huomiona on se, että suuri osa ohjelmista on juuri
datapainoitteisia (<a href='#Xgartnerb2b'>29</a>). Tietokannassa on dataa, jota näytetään
käyttöliittymässä. Samaan aikaan kerätään lisää dataa,
jota näytetään toisissa käyttöliittymissä; toisin sanoen varsin
datapainoitteista.
</p> 
<p>   Toisena huomiona on se, että kaikki ongelmat voidaan mallintaa
matemaattisesti. Funktionaalisen ohjelmoinnin Turing-vahva lambda-kalkyyli-pohja
määritelmällisesti mahdollistaa sen, että funktionaalisessa ohjelmoinnissa
voi toteuttaa kaiken saman kuin olio-ohjelmoinnissa (<a href='#XTan2004'>71</a>; <a href='#Xcomputerphile_lambda'>21</a>).
</p> 
<p>   Ongelmien mallintaminen matemaattisesti ei kuitenkaan ole helppoa.
Mallintaminen tuntuu vaativan vahvoja tyyppijärjestelmiä mallinnuksen
järkevästi todistamiseksi.
</p> 
<p>   Kuitenkin pikkuhiljaa funktionaalista ohjelmointia aletaan kutsumaan
ilmiselväksi reitiksi ohjelmoida, ja esimerkiksi olio-ohjelmointia ylivertaisemmaksi
(<a href='#Xthe_oo_way'>58</a>, 1). Jopa Robert C. Martin, tunnettu ohjelmointikäytäntöjen
asiantuntija ja olio-ohjelmoinnin puolestapuhuja, on siirtynyt merkittävästi
funktionaalisen ohjelmoinnin suuntaan (<a href='#Xmartin2019whyclojure'>44</a>; <a href='#Xmartin2017pragmaticfp'>43</a>). Lienee tarpeen selvittää,
miten funktionaalisuutta saataisiin enemmän osaksi nykyohjelmoijan
työkalupakkia.
                                                                         

                                                                         
</p> 
<p>   Tiukasti funktionaaliseen ohjelmointiin tarkoitetut kielet eivät tunnu
saavan nostetta päästäkseen yleiseen suosioon (kuva <a href='#funktionaalisten-ohjelmointikielien-erlangin-haskelin-ocamlin-elixirin-ja-scalan-suosiokehitys-vuosina-kielet-eivat-ole-olleet-suuressa-nousussa-fplanggoogletrend'>1<!-- tex4ht:ref: fig:fplangpopularity  --></a>). Ero siirtyessä
<a class='glossary' href='#glo_object_oriented_programming'>olio-ohjelmoinnista</a> tai <a class='glossary' href='#glo_imperative_programming'>imperatiivisesta ohjelmoinnista</a> funktionaaliseen
ohjelmointiin voi olla kuin yöllä ja päivällä. Siksi funktionaalisen
ohjelmoinnin keinoja ripotellaan osaksi suosittuja ohjelmointikieliä, että
saataisiin vietyä todettuja parhaita funktionaalisen ohjelmoinnin paloja myös
muihin paradigmoihin. Kenties ajatellaan niin, että varpaat on ensin kasteltava,
ennen kuin voi hypätä syvään päätyyn.
   </p> 
<figure class='figure' id='x1-3001r1'><span id='funktionaalisten-ohjelmointikielien-erlangin-haskelin-ocamlin-elixirin-ja-scalan-suosiokehitys-vuosina-kielet-eivat-ole-olleet-suuressa-nousussa-fplanggoogletrend'></span> 

                                                                         

                                                                         

                                                                         

                                                                         
<p><img alt='       Erlang

       Haskell
       OCaml
       Elixir
222222222222222222222024681VS00000000000000000000000000uu0000001111111111222220oo456789012345678901234ssiio Scala' src='main0x.svg' />
</p> 
<figcaption class='caption'><span class='id'>Figure 1: </span><span class='content'>Funktionaalisten ohjelmointikielien Erlangin, Haskelin, OCamlin,
Elixirin ja Scalan suosiokehitys vuosina 2004–2024. Kielet eivät ole olleet
suuressa nousussa. (<a href='#Xfplanggoogletrend'>31</a>)</span></figcaption><!-- tex4ht:label?: x1-3001r1  -->
                                                                         

                                                                         
   </figure>
<p>   Ripottelun voi havaita esimerkiksi, kun vahvasti olio-ohjelmointiin
sovellettua Javaa on tuotu kohti funktionaalista pelikenttää erilaisin
kielen työkalujen, kuten lambdafunktioiden ja Stream-API:n metodien
yhdistämisen avulla (<a href='#Xoracle_function_package'>60</a>; <a href='#Xoracle_stream_api'>59</a>). Javaa voikin nykyään jo kutsua hybridiksi
ohjelmointikieleksi funktionaalisen ja olio-ohjelmoinnin välillä (<a href='#Xsundstrom_java_fp'>70</a>,
50).
</p> 
<p>   Myös JavaScriptissä Array-metodit, kuten <code class='verb'><span style='color:#008000;'>Array</span>.prototype.map</code> (<a href='#Xmdn_array_map'>46</a>),
<code class='verb'><span style='color:#008000;'>Array</span>.prototype.filter</code> (<a href='#Xmdn_array_filter'>45</a>) ja <code class='verb'><span style='color:#008000;'>Array</span>.prototype.reduce</code> (<a href='#Xmdn_array_reduce'>47</a>), ovat
vakiintuneet keskeisiksi työkaluiksi (<a href='#Xvakil2016'>75</a>; <a href='#X8_must_know_array_methods'>79</a>). Kyseiset funktiot ovat laajalti
käytössä funktionaalisessa ohjelmoinnissa. Myös <a class='glossary' href='#glo_js'>JavaScript</a> Set
-tietorakenne (joukko) on juuri saamassa <a class='glossary' href='#glo_set_theory'>joukko-opille</a> ja funktionaaliselle
ohjelmoinnille olennaisia metodeja kuten <code class='verb'><span style='color:#008000;'>Set</span>.prototype.union</code> (<a href='#Xmdn_set_union'>50</a>) ja
<code class='verb'><span style='color:#008000;'>Set</span>.prototype.difference</code> (<a href='#Xmdn_set_intersection'>49</a>), jotka palauttavat uusia Set-tietorakenteita
(joukkoja) aiempien muokkaamisen sijaan funktionaaliselle ohjelmoinnille
ominaisesti (<a href='#Xmdn_set_methods'>51</a>).
</p> 
<p>   Myös kirjoitushetkellä tason 3 TC39-ominaisuusesitys <a class='glossary' href='#glo_js'>JavaScript</a>
iteraattorien apumetodeille vahvistaa funktionaalista tapaa ohjelmoida (<a href='#Xtc39_iterator_helpers'>73</a>).
Näiden metodien lisääminen mahdollistaa vielä johdonmukaisemman
funktionaalisen koodin kirjoittamista.
   
   </p> 

   <h3 class='sectionHead' id='kokemukset-funktionaalisesta-ohjelmoinnista'><span class='titlemark'>2.1   </span> <a id='x1-40002.1'></a>Kokemukset funktionaalisesta ohjelmoinnista</h3>
<p>Tehtäessä työtä osana Hoxhunt Oy:n tuotekehitystiimiä on saatu
kokemusta funktionaalisesta ohjelmoinnista. Kokemuspohjaista tietoa on
kerätty tiimiläisiltä sekä muuten omalta osalta. On nähty, kuinka
funktionaalisen ohjelmoinnin käytänteitä käytetään, siten, että
ensin niiden käyttöön on kannustettu, ja toisin pyritty estämään.
Koodikatselmuksissa ja muissa keskusteluissa on usein kuultu ajatuksia
kärkkäästi niin funktionaalisen ohjelmoinnin puolesta kuin vastaankin.
</p> 
<p>   Funktionaalisen ohjelmoinnin kulmakivi on sen matemaattinen perusta
(<a href='#Xcomputerphile_lambda'>21</a>; <a href='#XTan2004'>71</a>). Toisinaan funktionaalista ohjelmointia on mielletty vain älykkyyden
todistamiseksi, ja jota humoristisesti ajatellaan vain matematiikan
maisterin tutkinnon suorittaneiden taitavan. Voi olla vaikea nähdä
funktionaalisen ohjelmoinnin hyötyjä, jos kokee sen vain ylimääräisenä
monimutkaisuutena.
</p> 
<p>   Funktionaalisen koodin kääntöpuoli on sen selittävyys: deklaratiivisuus.
Jos on nähty funktionaalisen ohjelmoinnin tuntemattomuuden tai havaitun
                                                                         

                                                                         
monimutkaisuuden läpi, niin on huomattu, että funktionaalista ohjelmakoodia
voi parhaimmillaan lukea kuin selkeää englannin kieltä. Tämä johtuu
siitä, että funktionaalinen ohjelmakoodi on perusteiltaan (<a class='glossary' href='#glo_declarative_programming'>deklaratiivista
ohjelmakoodia</a>) suorien käskyjen sijaan (<a class='glossary' href='#glo_imperative_programming'>imperatiivinen ohjelmakoodi</a>)
(<a href='#Xms_fp_vs_imperative'>78</a>).
</p> 
<p>   <a class='glossary' href='#glo_composed_function'>Yhdistetyt funktiot</a>, joissa funktioita suoritetaan toinen toisensa jälkeen, ja
annetaan aina edellisen paluuarvo seuraavan syötteeksi, kertoo suoraan, mitä
siinä tapahtuu. Koodi dokumentoi itse itseään, kun kaikki ohjelman vaiheet
ovat selkeästi nimetyissä palikoissa; erillisiä kommentteja ei koodiin tarvitse
edes lisätä (koodiesimerkki <a href='#javascriptesimerkki-yhdistetysta-funktiosta-funktioiden-yksityiskohtia-ei-tarvitse-tietaa-etta-voi-ymmartaa-ohjelman-kokonaiskuvan'>2.1<!-- tex4ht:ref: code:first_pipeline  --></a>).
                                                                         

                                                                         
</p> 
<p id='javascriptesimerkki-yhdistetysta-funktiosta-funktioiden-yksityiskohtia-ei-tarvitse-tietaa-etta-voi-ymmartaa-ohjelman-kokonaiskuvan'>   <a id='x1-4025r1'></a></p> 
<figure class='float'>
                                                                         

                                                                         
<pre class='fancyvrb' id='fancyvrb1'><a id='x1-4010r1'></a><span style='color:#BABABA;'>     </span><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>congratulateUsers</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>pipe(</span> 
<a id='x1-4012r2'></a><span style='color:#BABABA;'>         </span><span class='ectt-1200'>filter(isActiveUser),</span> 
<a id='x1-4014r3'></a><span style='color:#BABABA;'>         </span><span class='ectt-1200'>filter(isBirthdayToday),</span> 
<a id='x1-4016r4'></a><span style='color:#BABABA;'>         </span><span class='ectt-1200'>map(createCongratulationMessage),</span> 
<a id='x1-4018r5'></a><span style='color:#BABABA;'>         </span><span class='ectt-1200'>sendCongratulations</span> 
<a id='x1-4020r6'></a><span style='color:#BABABA;'>     </span><span class='ectt-1200'>)</span> 
<a id='x1-4022r7'></a><span style='color:#BABABA;'>     </span><span style='color:#3D7A7A;'><em><span class='ecit-1200'>// Onnitellaan kaikkia asiakkaita, joilla on tänään syntymäpäivä!</span></em></span> 
<a id='x1-4024r8'></a><span style='color:#BABABA;'>     </span><span class='ectt-1200'>congratulateUsers(users)</span></pre>
<figcaption class='caption'><span class='id'>Code  2.1:  </span><span class='content'>JavaScript-esimerkki  yhdistetystä  funktiosta.  Funktioiden
yksityiskohtia  ei  tarvitse  tietää,  että  voi  ymmärtää  ohjelman
kokonaiskuvan.</span></figcaption><!-- tex4ht:label?: x1-4025r1  -->
                                                                         

                                                                         
   </figure>
<p>   Toisaalta koodin deklaratiivisuuden ylistämisellä voi yrittää peittää
muita ongelmia. Jos sokeana seuraa sääntöjä ja käytänteitä, voi
jäädä muuten tärkeitä osa-alueita huomioimatta (<a href='#Xfunctional_fixedness'>80</a>). Jos pyrkii liiallisesti
luettavuuteen deklaratiivisella koodilla, voi esimerkiksi ohjelman tehokkuus
kärsiä.
</p> 
<p>   Luettavuus, tehokkuus ja ylläpidettävyys ovat kolme keskeistä
osa-aluetta, joita on painotettu eniten työpaikalla käydyissä keskusteluissa,
kun arvioidaan funktionaalisen ohjelmointitavan laajempia hyötyjä. Nämä
osa-alueet näkyvät merkittävinä myös muiden ohjelmointityylien
arvioinnissa. Luettavuutta pidetään yleensä kaikkein tärkeimpänä.
Ohjelmakoodin ei tarvitse olla tehokasta ennen kuin optimointia todella
tarvitaan (<a href='#Xprematureoptimization'>14</a>), ja ylläpidettävyyden perusta on vahvasti sidoksissa siihen,
kuinka luettavaa koodi on.
   
   </p> 

   <h3 class='sectionHead' id='lahestymistapa'><span class='titlemark'>2.2   </span> <a id='x1-50002.2'></a>Lähestymistapa</h3>
<p>Tässä insinöörityössä tutkitaan, mitä tapahtuu, kun funktionaalista
ohjelmointia ripotellaan proseduraaliseen ohjelmakoodiin. Tätä tarkastellaan
sellaisen ohjelmointikielen näkökulmasta, jota ei ole suunniteltu erityisesti
funktionaaliseen ohjelmointiin, mutta jossa se on kuitenkin mahdollista. Täksi
ohjelmointikieleksi valikoitui <a class='glossary' href='#glo_js'>JavaScript</a> (ja <a class='glossary' href='#glo_ts'>TypeScript</a>). Ohjelmointikieli
valittiin aiemman osaamisen ja kokemusten perusteella, ja toisaalta myös siksi,
että kieli on yksi markkinoiden käytetyimpiä, ja siten myös yksi
olennaisimmista (<a href='#Xpypl_lang'>62</a>). <a class='glossary' href='#glo_js'>JavaScript</a> on myös kielenä siitä mielenkiintoinen,
että se mahdollistaa koodiabstraktioiden luomisen ilman suurta vaivaa
ohjelmoijalta. Hätiköidyt abstraktiot johtavat epäjohdonmukaisuuteen ja
lopulta uudelleenkäyttämättömyyteen (<a href='#Xdijkstra_humble_programmer'>24</a>). Tämä tekee JavaScriptista
haastavan, mutta antoisan kielen tutkia pragmaattista funktionaalisen
ohjelmoinnin ripottelua.
</p> 
<p>   Insinöörityössä käsiteltäviä asioita pyritään perkaamaan
<a class='glossary' href='#glo_language_agnostic'>kieliagnostisesti</a>, jolloin saadut tiedot ja taidot olisivat oleellisia myös
kehittäjille, jotka eivät käytä TypeScriptiä tai JavaScriptiä.
</p> 
<p>   Tarkoituksena on löytää tasapaino sille, miten funktionaalinen
ohjelmointi kannattaa ottaa mukaan ohjelmistoprojektiin. Pohjalla on ajatus,
että paras tapa olisi vain siirtyä kokonaan funktionaalisiin ohjelmointikieliin
hybridikielten sijasta. Tätä ajatusta pyritään kumoamaan, sillä toivotaan,
että funktionaalisuus voisi toimia myös kevyemmin osana ohjelmoijan
                                                                         

                                                                         
arkea.
</p> 
<p>   Kun jotain ei vaadita, se jää usein tekemättä tai ainakin puutteelliseksi.
Siksi voi olla haastavaa ohjelmoida pragmaattista funktionaalista koodia
JavaScriptissä. Kielessä, jossa juuri mitään sääntöjä ei pohjimmiltaan
ole.
   </p> 

   <h2 class='chapterHead' id='teoreettinen-tausta'><span class='titlemark'> 3</span><br /><a id='x1-60003'></a>Teoreettinen tausta</h2>
<p>Jotta voidaan löytää pragmaattinen näkökulma funktionaaliseen
ohjelmointiin, on käsiteltävä funktionaalisen ohjelmoinnin teoreettisia
perusteita ja keskeisiä käsitteitä.
</p> 
<p>   Tarkastellaan joukko-opin sovelluksia ohjelmoinnissa käytännön tasolla.
Sivutaan kategoriateorian osuutta funktionaalisessa ohjelmoinnissa ilman
syvällistä paneutumista yksityiskohtiin. Sivutaan myös <a class='glossary' href='#glo_category_theory'>kategoriateoriaa</a>,
joka on funktionaalisen ohjelmoinnin teoreettisen taustan kulmakivi.
Tarkemmin käydään läpi kategoriateorian <a class='glossary' href='#glo_monad'>monadi</a>-rakennetta, ja sen
toimintaa.
</p> 
<p>   Tutkitaan, miten nämä käsitteet integroituvat moderniin
ohjelmistokehitykseen, kuten TypeScriptin käyttöön.
</p> 
<p>   On tärkeää huomata, että tämän insinöörityön tavoitteena ei ole
tarjota kattavaa opasta kaikkeen funktionaaliseen ohjelmointiin, vaan
keskittyä valittuihin aihealueisiin, jotka tukevat työn pääteemoja ja
osoittavat, miten teoreettiset käsitteet voidaan soveltaa käytännön
ohjelmointihaasteisiin.
</p> 
<p>   Valitut aihealueet pyritään avaamaan <a class='glossary' href='#glo_language_agnostic'>kieliagnostisesti</a>, mutta kuitenkin
JavaScript- sekä TypeScript-ekosysteemien näkökulmasta.
</p> 
<p>   Lopulta näillä tiedoilla voidaan näyttää, miten funktionaalisen
ohjelmoinnin käytänteet näkyvät hyödyllisesti (tai haitallisesti)
ei-funktionaalisissa ohjelmistoprojekteissa.
</p> 
<p>   Teoriaosuudessa pyritään pitämään sisältö mielenkiintoisena
liimaamalla käsitteet yhdeksi kokonaisuudeksi. Teoriaan pyritään tuomaan
konkretiaa erilaisilla esimerkeillä ja anekdooteilla.
   
   </p> 

   <h3 class='sectionHead' id='funktionaalinen-ohjelmointi'><span class='titlemark'>3.1   </span> <a id='x1-70003.1'></a>Funktionaalinen ohjelmointi</h3>
<p>Funktionaalinen ohjelmointi on ohjelmointiparadigma, jonka juuret ulottuvat
1930-luvulle ja lambda-kalkyylin kehitykseen. Lähestymistapa korostaa
funktioiden käyttöä perusyksikköinä ja pyrkii välttämään <a class='glossary' href='#glo_immutable_data'>muuttuvia
tiloja</a> (mutability) sekä <a class='glossary' href='#glo_side_effects'>sivuvaikutuksia</a> (side-effects). Funktionaalisen
                                                                         

                                                                         
ohjelmoinnin keskeisiä käsitteitä ovat <a class='glossary' href='#glo_pure_function'>puhtaat funktiot</a>, <a class='glossary' href='#glo_higher_order_function'>korkeamman
asteen funktiot</a>, <a class='glossary' href='#glo_composed_function'>yhdistetyt funktiot</a> sekä <a class='glossary' href='#glo_declarative_programming'>deklaratiivinen ohjelmointi</a>.
Funktiot ovat funktionaalisessa ohjelmoinnissa tosiaankin keskiössä.
(<a href='#XTan2004'>71</a>; <a href='#Xcomputerphile_lambda'>21</a>)
   
   </p> 

   <h4 class='subsectionHead' id='tyon-nimeamiskaytanteet'><span class='titlemark'>3.1.1   </span> <a id='x1-80003.1.1'></a>Työn nimeämiskäytänteet</h4>
<p>Ohjelmoidessa funktionaalista ohjelmakoodia nimeämiskäytänteet ovat yhtä
vaikeita kuin aina ennenkin. Tässä insinöörityössä käytetään
Haskell-ohjelmoijien keskuudessa näkyviä nimeämiskäytänteitä, joissa
käytetään lyhyitä ja “intuitiivisia” nimiä funktioille ja muuttujille.
Esimerkiksi:
   </p> 

      <ul class='itemize1'>
      <li class='itemize'>x: Yleisesti käytetty muuttuja tai parametri, joka edustaa arvoa,
      jota funktiot käsittelevät. Jos näkyvyysalalla on muita muuttujia,
      niitä nimetään usein aakkosjärjestyksessä x:stä eteenpäin (x,
      y, z).
      </li>
      <li class='itemize'>xs:  Muuttuja,  joka  edustaa  useita  arvoja.  Usein  sisältää  listan
      arvoista, mutta tietorakenteen tietäminen ei ole merkittävää.
      </li>
      <li class='itemize'>f: Yksittäinen funktio, jota voidaan käyttää käsittelemään
      arvoja. Jos näkyvyysalalla on muita funktioita, niitä nimetään
      usein aakkosjärjestyksessä f:stä eteenpäin (f, g, h, i...).
      </li>
      <li class='itemize'>fs: Muuttuja, joka edustaa useita funktioita. Usein sisältää listan
      funktioista, mutta tietorakenteen tietäminen ei ole merkittävää.</li></ul>
<p>   Esimerkkejä käytänteiden käytöstä:
                                                                         

                                                                         
</p> 
<p id='esimerkkeja-insinoorityossa-kaytettavista-nimeamiskaytanteista-muun-muassafunktio-map-ottaa-ensin-yhden-funktion-f-ja-taman-jalkeen-monta-arvoa-xs-pipe-ottaa-ensin-monta-funktiota-fs-ja-taman-jalkeen-yhden-arvon-x'>   <a id='x1-8013r1'></a></p> 
<figure class='float'>
                                                                         

                                                                         
<pre class='fancyvrb' id='fancyvrb2'><a id='x1-8006r1'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>map</span><span style='color:#BABABA;'>    </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>f</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>xs</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>xs.map(f)</span> 
<a id='x1-8008r2'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>either</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>f</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>g</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>x</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>f(x)</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>||</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>g(x)</span> 
<a id='x1-8010r3'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>max</span><span style='color:#BABABA;'>    </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>x</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>y</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>x</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>&gt;</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>y</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>?</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>x</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>y</span> 
<a id='x1-8012r4'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>pipe</span><span style='color:#BABABA;'>   </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>fs</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>x</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>fs.reduce((acc,</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>f)</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>f(acc),</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>x)</span></pre>
<figcaption class='caption'><span class='id'>Code     3.1:     </span><span class='content'>Esimerkkejä     insinöörityössä     käytettävistä
nimeämiskäytänteistä.  Muun  muassafunktio  <code><span class='ectt-1200'>map</span></code> ottaa  ensin  yhden
funktion (f), ja tämän jälkeen monta arvoa (xs). <code><span class='ectt-1200'>Pipe</span></code> ottaa ensin monta
funktiota (fs), ja tämän jälkeen yhden arvon (x).</span></figcaption><!-- tex4ht:label?: x1-8013r1  -->
                                                                         

                                                                         
   </figure>
   
   <h4 class='subsectionHead' id='puhtaat-funktiot'><span class='titlemark'>3.1.2   </span> <a id='x1-90003.1.2'></a>Puhtaat funktiot</h4>
<p>Funktionaalisessa ohjelmoinnissa <a class='glossary' href='#glo_pure_function'>puhtaat funktiot</a> ovat funktioita, jotka
poikkeuksetta aina palauttavat samalle syötteelle saman arvon. Funktion
puhtauden voi päätellä siitä, jos sen voisi teoreettisesti korvata
hakutaulukolla. (<a href='#Xfeldman_fp_pragmatists'>28</a>)
</p> 
<p>   Puhtaista funktioista hyötyy siten, että niitä voi käyttää uudelleen ja
uudelleen kontekstista riippumatta. Puhtailla funktioilla voi rakentaa
järjestelmäriippumattomia kirjastoja.
</p> 
<p>   Puhtaiden funktioiden perusta on matematiikassa. Jos matemaattinen funktio
<!-- l. 54 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>f</mi><mo class='MathClass-open' stretchy='false'>(</mo><mi>x</mi><mo class='MathClass-close' stretchy='false'>)</mo> <mo class='MathClass-rel' stretchy='false'>=</mo> <mi>x</mi> <mo class='MathClass-bin' stretchy='false'>+</mo> <mn>2</mn></mrow></math> esimerkiksi ei aina
palauttaisi samalle <!-- l. 54 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>x</mi></math>
arvolle samaa palautusarvoa, mitä hyötyä funktiosta edes olisi? Toivottavasti
<!-- l. 54 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mn>2</mn> <mo class='MathClass-bin' stretchy='false'>+</mo> <mn>2</mn></mrow></math> tulee aina
olemaan <!-- l. 54 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mn>4</mn></math>.
   
   </p> 

   <h4 class='subsectionHead' id='kombinaattorit'><span class='titlemark'>3.1.3   </span> <a id='x1-100003.1.3'></a>Kombinaattorit</h4>
<p>Funktionaalinen ohjelmointi mahdollistaa koodin uudelleenkäytettävyyden.
Lambda-kalkyylin perustein joka ikisien ongelman voi purkaa pieniksi
funktioiksi (<a href='#XBlellochHarper2015'>11</a>). Lambda-kalkyylistä johdetut kombinaattorit voi ottaa osaksi
ohjelmoijan työkalupakkia missä tahansa ohjelmointikielessä, joka kohtelee
funktioita samalla tavalla kuin muuttujia (first-class citizen) (koodiesimerkki
<a href='#yleiset-kombinaattorit-esitettyna-javascriptissa-javascriptcombinators-kombinaattoreilla-voi-esittaa-lambdakalkyylia-kombinaattoreilla-voi-muokata-funktioiden-toimintaa-ja-yhdistaa-funktioita-yhdistetyiksi-funktioiksi'>3.2<!-- tex4ht:ref: code:javascript_combinators  --></a>).
</p> 
<p>   Jos kombinaattoreille haluaa etsiä vastaavanlaista määritelmää
olio-ohjelmoinnin termeistä, voisi niitä ajatella olevan perustavanlaatuisia
suunittelumalleja.
</p> 
<p>   Kombinaattori <code class='verb'>compose</code> on tapa tehdä yhdistettyjä funktioita, joista
kerrotaan enemmän seuraavassa luvussa.
                                                                         

                                                                         
</p> 
<p id='yleiset-kombinaattorit-esitettyna-javascriptissa-javascriptcombinators-kombinaattoreilla-voi-esittaa-lambdakalkyylia-kombinaattoreilla-voi-muokata-funktioiden-toimintaa-ja-yhdistaa-funktioita-yhdistetyiksi-funktioiksi'>   <a id='x1-10025r2'></a></p> 
<figure class='float'>
                                                                         

                                                                         
<pre class='fancyvrb' id='fancyvrb3'><a id='x1-10010r1'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>identity</span><span style='color:#BABABA;'>      </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>x</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>x</span> 
<a id='x1-10012r2'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>constant</span><span style='color:#BABABA;'>      </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>x</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>y</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>x</span> 
<a id='x1-10014r3'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>apply</span><span style='color:#BABABA;'>         </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>f</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>x</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>f</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>(x)</span> 
<a id='x1-10016r4'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>thrush</span><span style='color:#BABABA;'>        </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>x</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>f</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>f</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>(x)</span> 
<a id='x1-10018r5'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>duplication</span><span style='color:#BABABA;'>   </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>f</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>x</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>f</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>(x)</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>(x)</span> 
<a id='x1-10020r6'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>flip</span><span style='color:#BABABA;'>          </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>f</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>y</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>x</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>f</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>(x)</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>(y)</span> 
<a id='x1-10022r7'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>compose</span><span style='color:#BABABA;'>       </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>f</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>g</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>x</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>f</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>(g</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>(x))</span> 
<a id='x1-10024r8'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>substitution</span><span style='color:#BABABA;'>  </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>f</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>g</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>x</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>f</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>(x)</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>(g</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>(x))</span></pre>
<figcaption class='caption'><span class='id'>Code   3.2:   </span><span class='content'>Yleiset   kombinaattorit   esitettynä   JavaScriptissä   (<a href='#Xjavascript_combinators'>77</a>).
Kombinaattoreilla voi esittää lambda-kalkyyliä. Kombinaattoreilla voi
muokata  funktioiden  toimintaa,  ja  yhdistää  funktioita  yhdistetyiksi
funktioiksi.</span></figcaption><!-- tex4ht:label?: x1-10025r2  -->
                                                                         

                                                                         
   </figure>
<p>   Kombinaattorit näyttävät uhkaavilta, ja raa’assa muodossaan niiden
hyötyarvoa voi olla hankala havaita. Niiden käyttämistä voi kuitenkin
perustella niiden perustavanlaatuisten ja kieliagnostisien ominaisuuksien takia.
Ohjelmoidessa funktionaalisesti ei kombinaattoreita kuitenkaan tarvitse paljoa
ajatella. Niitä tulee kirjoittamaan varmasti vähintään vahingossa, sillä
niitä vaaditaan funktioita pyörittäessä (<a href='#Xjavascript_combinators'>77</a>). Kuitenkin on hyvä tiedostaa
käytössä olevat rakennuspalikat, ja millä nimellä etsiä niistä tietoa
tarvittaessa.
   
   </p> 

   <h4 class='subsectionHead' id='yhdistetyt-funktiot-ja-niiden-vahva-merkitys'><span class='titlemark'>3.1.4   </span> <a id='x1-110003.1.4'></a>Yhdistetyt funktiot ja niiden vahva merkitys</h4>
<p>Usein funktionaalista ohjelmointia mainostaessa puhutaan funktioiden
puhtauden ja datan muuttumattomuuden olevan paradigman oleellisinta.
Kuitenkin samaan aikaan juuri datan muuttumattomuus ja tilattomuus koetaan
paradigman suureksi kompastuskiveksi (<a href='#Xcantarella_fp_haitat'>16</a>; <a href='#Xis_reduce_bad'>18</a>; <a href='#Xvakil2016'>75</a>).
</p> 
<p>   On tärkeää huomata, että kaiken ei tarvitse olla täysin puhdasta ja
muuttumatonta, kunhan ne osat, joissa funktionaalista ohjelmointia
hyödynnetään, pysyvät ennustettavina ja hallittavina.
</p> 
<p>   <a class='glossary' href='#glo_composed_function'>Yhdistetyt funktiot</a> ovat loistava tapa kirjoittaa selkeää ja modulaarista
koodia. Parasta on, että kaiken ei tarvitse olla pelkkiä funktioita: voi hyvin
kirjoittaa myös olio-ohjelmointityylillä ja silti hyödyntää yhdistettyjä
funktioita logiikan selkeyttämiseksi ja yksinkertaistamiseksi.
</p> 
<p>   Loppujen lopuksi funktionaalisen ohjelmoinnin perusta on funktioissa ja
niiden yhdistämisessä. Datan muuttumattomuus ja sivuvaikutuksettomuus on
vain esivaatimus funktioiden ennustettavuudelle.
</p> 
<p>   <a class='glossary' href='#glo_composed_function'>Yhdistetty funktio</a> tarkoittaa yksinkertaisesti kahden, tai
useamman, funktion yhdistämistä siten, että yhden funktion tulos
syötetään seuraavalle. Esimerkiksi koodiesimerkin <a href='#javascriptesimerkki-yhdistetysta-funktiosta-h-ilman-pipe-tai-composefunktiota'>3.3<!-- tex4ht:ref: code:javascript_manual_composition  --></a> funktio
<!-- l. 91 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>h</mi></math> on funktioiden
<!-- l. 91 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>f</mi></math> ja
<!-- l. 91 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>g</mi></math> yhdiste. Ajaessa funktio
<!-- l. 91 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>h</mi></math>, suoritetaan ensin
<!-- l. 91 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>g</mi></math>, jonka palautusarvo
annetaan funktiolle <!-- l. 91 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>f</mi></math>.
Kaksi funktiota yhdistämällä on saatu yksi uusi funktio.
                                                                         

                                                                         
</p> 
<p id='javascriptesimerkki-yhdistetysta-funktiosta-h-ilman-pipe-tai-composefunktiota'>   <a id='x1-11016r3'></a></p> 
<figure class='float'>
                                                                         

                                                                         
<pre class='fancyvrb' id='fancyvrb4'><a id='x1-11007r1'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>f</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>x</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>2</span></span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>*</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>x</span> 
<a id='x1-11009r2'></a> 
<a id='x1-11011r3'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>g</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>x</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>x</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>+</span></span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>3</span></span> 
<a id='x1-11013r4'></a> 
<a id='x1-11015r5'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>h</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>x</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>f(g(x))</span></pre>
<figcaption class='caption'><span class='id'>Code 3.3: </span><span class='content'>JavaScript-esimerkki yhdistetystä funktiosta h ilman pipe- tai
compose-funktiota</span></figcaption><!-- tex4ht:label?: x1-11016r3  -->
                                                                         

                                                                         
   </figure>
<p>   Funktionaalisissa ohjelmointikielissä yhdistettyjä funktioita pystyy usein
kirjoittamaan käyttäen kieleen sisäänrakennettuja operaattoreja, joilla
funktioiden yhdistäminen on helppoa ja suoraan osana ohjelmointikieltä
(<a href='#Xfsharpcomposition'>84</a>; <a href='#Xhaskellcomposition'>36</a>). JavaScriptissä ei ole vastaavanlaista sisäänrakennettua
operaattoria. (Vaikkakin sellainen on ollut kehitteillä (<a href='#Xtc39_pipeline_operator'>72</a>).) Operaattorin voi
kuitenkin kirjoittaa funktiona helposti osaksi mitä tahansa koodikantaa
(koodiesimerkki <a href='#javascriptesimerkki-funktiokompositiosta-pipe-ja-composefunktioilla'>3.4<!-- tex4ht:ref: code:javascript_pipe_composition  --></a>).
                                                                         

                                                                         
</p> 
<p id='javascriptesimerkki-funktiokompositiosta-pipe-ja-composefunktioilla'>   <a id='x1-11035r4'></a></p> 
<figure class='float'>
                                                                         

                                                                         
<pre class='fancyvrb' id='fancyvrb5'><a id='x1-11024r1'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>pipe</span><span style='color:#BABABA;'>    </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>f</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>g</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>x</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>g(f(x))</span> 
<a id='x1-11026r2'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>compose</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>f</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>g</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>x</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>f(g(x))</span> 
<a id='x1-11028r3'></a> 
<a id='x1-11030r4'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>h</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>pipe(f)(g)</span> 
<a id='x1-11032r5'></a><span style='color:#3D7A7A;'><em><span class='ecit-1200'>// tai vaihtoehtoisesti</span></em></span> 
<a id='x1-11034r6'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>h</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>compose(g)(f)</span></pre>
<figcaption class='caption'><span class='id'>Code     3.4:     </span><span class='content'>JavaScript-esimerkki     funktiokompositiosta     pipe-     ja
compose-funktioilla.</span></figcaption><!-- tex4ht:label?: x1-11035r4  -->
                                                                         

                                                                         
   </figure>
<p>   Voi olla mielenkiinoista huomata, että koodiesimerkin <code class='verb'>compose</code> löytyy
myös koodiesimerkin <a href='#yleiset-kombinaattorit-esitettyna-javascriptissa-javascriptcombinators-kombinaattoreilla-voi-esittaa-lambdakalkyylia-kombinaattoreilla-voi-muokata-funktioiden-toimintaa-ja-yhdistaa-funktioita-yhdistetyiksi-funktioiksi'>3.2<!-- tex4ht:ref: code:javascript_combinators  --></a> tunnetuista yleisistä kombinaattoreista.
</p> 
<p>   Koodiesimerkissä <a href='#javascriptesimerkki-funktiokompositiosta-pipe-ja-composefunktioilla'>3.4<!-- tex4ht:ref: code:javascript_pipe_composition  --></a> on näytettynä kaksi eri tapaa yhdistää funktioita:
<code><span class='ectt-1200'>pipe</span></code> ja <code><span class='ectt-1200'>compose</span></code>. Käytännössä tapojen ainoa ero on se, kummasta
suunnasta funktiot suoritetaan. <code><span class='ectt-1200'>compose</span></code> on lähempänä yhdistettyjen
funktioiden matemaattisia perusteita, kun taas <code><span class='ectt-1200'>pipe</span></code> on usein helpompi lukea,
sillä se suoritetaan yleisessä lukemissuunnassa, eli vasemmalta oikealle, tai
ylhäältä alas. (<a href='#Xwhyprefercompose'>23</a>)
</p> 
<p>   Tulevissa koodiesimerkeissä tullaan suosimaan funktioiden yhdistämistä
käyttäen <code><span class='ectt-1200'>pipe</span></code>-funktiota <code><span class='ectt-1200'>compose</span></code>-funktion sijasta.
</p> 
<p>   Esimerkin <a href='#javascriptesimerkki-funktiokompositiosta-pipe-ja-composefunktioilla'>3.4<!-- tex4ht:ref: code:javascript_pipe_composition  --></a> <code><span class='ectt-1200'>pipe</span></code> ja <code><span class='ectt-1200'>compose</span></code> toimivat vain kahdelle funktiolle kerrallaan.
Tämä tapa seuraa lambda-kalkyyliä (<a href='#Xcomputerphile_lambda'>21</a>). Ohjelmointikielen mukaan voi
kuitenkin olla mieluisaa kirjoittaa funktiot niin, että ne tukevat suoraan
mielivaltaista määrää funktioita.
</p> 
<p>   JavaScriptissä näin voi tehdä esimerkiksi hyödyntämällä
Array-tietorakennetta (koodiesimerkki <a href='#javascriptesimerkki-yhdistettyjen-funktioiden-luomisesta-kayttaen-reduce-ja-reduceright-funktioita-nama-versiot-voivat-ottaa-mielivaltaisen-maaran-funktioita-argumenttina'>3.5<!-- tex4ht:ref: code:javascript_better_pipe  --></a>).
                                                                         

                                                                         
</p> 
<p id='javascriptesimerkki-yhdistettyjen-funktioiden-luomisesta-kayttaen-reduce-ja-reduceright-funktioita-nama-versiot-voivat-ottaa-mielivaltaisen-maaran-funktioita-argumenttina'>   <a id='x1-11072r5'></a></p> 
<figure class='float'>
                                                                         

                                                                         
<pre class='fancyvrb' id='fancyvrb6'><a id='x1-11049r1'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>pipe</span><span style='color:#BABABA;'>    </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>fs</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>x</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>fs.reduce((acc,</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>f)</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>f(acc),</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>x)</span> 
<a id='x1-11051r2'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>compose</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>fs</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>x</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>fs.reduceRight((acc,</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>f)</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>f(acc),</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>x)</span> 
<a id='x1-11053r3'></a> 
<a id='x1-11055r4'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>f</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>x</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>x</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>+</span></span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>1</span></span> 
<a id='x1-11057r5'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>g</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>x</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>x</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>*</span></span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>2</span></span> 
<a id='x1-11059r6'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>h</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>x</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>x</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>-</span></span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>3</span></span> 
<a id='x1-11061r7'></a> 
<a id='x1-11063r8'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>i</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>pipe([f,</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>g,</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>h])</span> 
<a id='x1-11065r9'></a><span class='ectt-1200'>i(</span><span style='color:#666666;'><span class='ectt-1200'>5</span></span><span class='ectt-1200'>)</span><span style='color:#BABABA;'> </span><span style='color:#3D7A7A;'><em><span class='ecit-1200'>// (((5 + 1) * 2) - 3) = 9</span></em></span> 
<a id='x1-11067r10'></a><span style='color:#3D7A7A;'><em><span class='ecit-1200'>// tai vaihtoehtoisesti</span></em></span> 
<a id='x1-11069r11'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>i</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>compose([h,</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>g,</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>f])</span> 
<a id='x1-11071r12'></a><span class='ectt-1200'>i(</span><span style='color:#666666;'><span class='ectt-1200'>5</span></span><span class='ectt-1200'>)</span><span style='color:#BABABA;'> </span><span style='color:#3D7A7A;'><em><span class='ecit-1200'>// (((5 + 1) * 2) - 3) = 9</span></em></span></pre>
<figcaption class='caption'><span class='id'>Code   3.5:   </span><span class='content'>JavaScript-esimerkki   yhdistettyjen   funktioiden   luomisesta
käyttäen <code><span class='ectt-1200'>reduce</span></code> ja <code><span class='ectt-1200'>reduceRight</span></code> funktioita. Nämä versiot voivat ottaa
mielivaltaisen määrän funktioita argumenttina.</span></figcaption><!-- tex4ht:label?: x1-11072r5  -->
                                                                         

                                                                         
   </figure>
<p>   Mikä tästä sitten tekee loistavaa? Se, että ohjelmointi on kerrankin
oikeasti kuin LEGO-palikoilla leikkimistä (koodiesimerkki <a href='#javascriptesimerkki-yhdistettyjen-funktioiden-kayttamisesta-laskutoimituksiin-erilaiset-operaatiot-on-pilkottu-uudelleenkaytettaviksi-funktioiksi'>3.6<!-- tex4ht:ref: code:javascript_composition_example  --></a>).
                                                                         

                                                                         
</p> 
<p id='javascriptesimerkki-yhdistettyjen-funktioiden-kayttamisesta-laskutoimituksiin-erilaiset-operaatiot-on-pilkottu-uudelleenkaytettaviksi-funktioiksi'>   <a id='x1-11112r6'></a></p> 
<figure class='float'>
                                                                         

                                                                         
<pre class='fancyvrb' id='fancyvrb7'><a id='x1-11087r1'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>pipe</span><span style='color:#BABABA;'>     </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>fs</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>x</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>fs.reduce((acc,</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>func)</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>func(acc),</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>x)</span> 
<a id='x1-11089r2'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>multiply</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>x</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>y</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>x</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>*</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>y</span> 
<a id='x1-11091r3'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>add</span><span style='color:#BABABA;'>      </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>x</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>y</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>x</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>+</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>y</span> 
<a id='x1-11093r4'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>filter</span><span style='color:#BABABA;'>   </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>f</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>xs</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>xs.filter(f)</span> 
<a id='x1-11095r5'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>map</span><span style='color:#BABABA;'>      </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>f</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>xs</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>xs.map(f)</span> 
<a id='x1-11097r6'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>isEven</span><span style='color:#BABABA;'>   </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>x</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>x</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>%</span></span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>2</span></span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>===</span></span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>0</span></span> 
<a id='x1-11099r7'></a> 
<a id='x1-11101r8'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>rejectOdds</span><span style='color:#BABABA;'>   </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>filter(isEven)</span> 
<a id='x1-11103r9'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>multiplyBy10</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>multiply(</span><span style='color:#666666;'><span class='ectt-1200'>10</span></span><span class='ectt-1200'>)</span> 
<a id='x1-11105r10'></a> 
<a id='x1-11107r11'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>pipeline</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>pipe([rejectOdds,</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>map(multiplyBy10)])</span> 
<a id='x1-11109r12'></a> 
<a id='x1-11111r13'></a><span class='ectt-1200'>pipeline([</span><span style='color:#666666;'><span class='ectt-1200'>1</span></span><span class='ectt-1200'>,</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>2</span></span><span class='ectt-1200'>,</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>3</span></span><span class='ectt-1200'>,</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>4</span></span><span class='ectt-1200'>])</span><span style='color:#BABABA;'> </span><span style='color:#3D7A7A;'><em><span class='ecit-1200'>// [20, 40]</span></em></span></pre>
<figcaption class='caption'><span class='id'>Code 3.6: </span><span class='content'>JavaScript-esimerkki yhdistettyjen funktioiden käyttämisestä
laskutoimituksiin. Erilaiset operaatiot on pilkottu uudelleenkäytettäviksi
funktioiksi.</span></figcaption><!-- tex4ht:label?: x1-11112r6  -->
                                                                         

                                                                         
   </figure>
<p>   Esimerkissä näytetyt funktiot ovat hyvin yksinkertaisia. Kuitenkin ne ovat
täysin uudelleenkäytettäviä. Jos totuttautuu käyttämään joitain
funktioita kaikissa projekteissa, voi huomata koodin kirjoittamisen tehokkuuden
ja johdonmukaisuuden kasvavan.
   
   </p> 

   <h3 class='sectionHead' id='tyyppiteoria-ja-joukkooppi'><span class='titlemark'>3.2   </span> <a id='x1-120003.2'></a>Tyyppiteoria ja joukko-oppi</h3>
<p>Tämä osa pyrkii kirjoittamaan matemaattisista käsitteistä
käytännönläheisesti ja mahdollisesti suuresti yksinkertaistaen. Ajatuksena
on, että ylemmän tason ajattelumalli välittyisi tekstissä tarkkojen
määritelmien sijasta.
</p> 
<p>   Joukko-oppi on matematiikan haara, joka tutkii joukkojen ominaisuuksia ja
niiden välisiä suhteita. Ohjelmoinnissa joukko-oppi ilmenee yksinkertaisimmin
joukkotietorakenteiden kautta, jotka mahdollistavat uniikkien alkioiden
käsittelyn tehokkaasti ja ilmaisuvoimaisesti (<a href='#Xmdn_set'>52</a>; <a href='#Xmdn_set_methods'>51</a>). On myös luotu
ohjelmointikieli, joka perustuu kokonaan joukko-oppiin (<a href='#XSETL_SET_LANGUAGE'>42</a>).
</p> 
<p>   Tyyppiteoria puolestaan on matematiikan haara, joka tutkii arvojen
luokittelua, ja miten niitä käsitellään ohjelmoinnissa ja logiikassa
(<a href='#Xtype_theory'>83</a>; <a href='#Xalgebraic_data_types'>41</a>).
</p> 
<p>   Tyyppien ja joukkojen semanttinen ero on nyanssinen (<a href='#Xtype_vs_set'>66</a>). Ohjelmoinnissa
puhutaan usein tyypeistä. Insinööriopintojen matematiikassa joukot ovat
olleet vahvasti läsnä. Tässä luvussa pääajatuksena on miettiä, kuinka
asiat muutetaan funktioilla toisiksi, asiat voi mieltää kuuluvan joukkoihin tai
tyyppeihin, kumpaa nyt ymmärtää paremmin. Oikea määritelmä saattaa
lähestyä <a class='glossary' href='#glo_category_theory'>kategoriateoriaa</a>, mutta erottaminen ei liene olevan tällä tasolla
relevanttia.
</p> 
<p>   Ihmisillä on kuitenkin kyky hahmottaa asioita joukkoina (tai tyyppeinä).
Koko maailman voi mallintaa niillä (kuva <a href='#mihin-joukkoon-tai-tyyppiin-nama-saattaisivat-kuulua-viljofruits'>2<!-- tex4ht:ref: fig:fruit_set  --></a>) (<a href='#Xalgebraic_data_types'>41</a>).
   </p> 
<figure class='figure' id='x1-12001r2'><span id='mihin-joukkoon-tai-tyyppiin-nama-saattaisivat-kuulua-viljofruits'></span> 

                                                                         

                                                                         

                                                                         

                                                                         
<p><img alt='PIC' height='284' src='./figures/HEDELMIA.png' width='284' />
</p> 
<figcaption class='caption'><span class='id'>Figure 2: </span><span class='content'>Mihin joukkoon tai tyyppiin nämä saattaisivat kuulua (<a href='#Xviljofruits'>61</a>)?</span></figcaption><!-- tex4ht:label?: x1-12001r2  -->
                                                                         

                                                                         
   </figure>
<p>   Koska koko maailman voi mallintaa joukkoina (tai tyyppeinä), voidaan
niillä mallintaa myös ohjelmia.
   
   </p> 

   <h4 class='subsectionHead' id='joukkotietorakenne'><span class='titlemark'>3.2.1   </span> <a id='x1-130003.2.1'></a>Joukkotietorakenne</h4>
<p>Ohjelmoinnissa joukkotietorakennetta käytetään hyvin laajasti, ja sen
merkitys on keskeinen monissa ohjelmointikielissä, kuten Pythonissa, Javassa ja
JavaScriptissä. Joukkotietorakenne mahdollistaa alkioiden tallentamisen ilman
duplikaatteja. Sen operaatiot, kuten unioni, leikkaus ja erotus, ovat suoraan
peräisin matemaattisesta joukko-opista. Joukkotietorakenteen tehokkuus ja
yksinkertaisuus tekevät siitä tehokkaan työkalun monenlaisissa sovelluksissa.
(<a href='#Xmdn_set'>52</a>; <a href='#Xecma_spec'>26</a>)
</p> 
<p>   Joukkotietorakenne kuvaa joukko-opin joukkoa. Joukkotietorakenteessa
säilytetään kokoelma uniikkeja alkioita. Joukkotietorakenne on ohjelmoinnissa
mieluinen työkalu sen tehokkuuden ansiosta. (<a href='#Xecma_spec'>26</a>)
</p> 
<p>   Kokemusten mukaan ohjelmoija ei usein mieti joukkotietorakennetta
matemaattisista lähtökohdista. Tästä kuitenkin voisi olla hyötyä, sillä
joukko-opin periaatteiden ymmärtäminen ja soveltaminen ohjelmoinnissa ei
ainoastaan tehostuskeino, vaan myös laajentaa näkemystä siitä,
miten abstraktit matemaattiset konseptit voidaan muuttaa konkreettisiksi
työkaluiksi. Tämä yhdistelmä tarjoaa ohjelmoijille sekä teoreettisen että
käytännöllisen perustan, joka on arvokas monissa erilaisissa sovelluksissa ja
ongelmanratkaisutilanteissa (<a href='#Xbartosz_category_for_progamers'>55</a>).
   
   </p> 

   <h4 class='subsectionHead' id='funktioilla-joukoista-toisiin'><span class='titlemark'>3.2.2   </span> <a id='x1-140003.2.2'></a>Funktioilla joukoista toisiin</h4>
<p>Kun ohjelmoinnissa pohditaan joukko-opin hyödyntämistä, kehittyy
<a class='glossary' href='#glo_language_agnostic'>kieliriippumaton</a> kyky kirjoittaa koodia. Kun miettii, mitä ylipäätään voi
laskea, pääsee ohjelmoinnissa omalle abstraktille tasolle. (<a href='#XTan2004'>71</a>; <a href='#XBlellochHarper2015'>11</a>)
</p> 
<p>   Matemaattisesti joukkojen välille voidaan tehdä kuvauksia, tai
toisin sanoen funktioita. Merkintä funktiosta, joka “muuttaa” joukon
<!-- l. 208 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>A</mi></math> joukoksi
<!-- l. 208 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>B</mi></math>, on esimerkiksi
yksinkertaisesti <!-- l. 208 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>A</mi> <mo class='MathClass-rel' stretchy='false'>→</mo> <mi>B</mi></mrow></math>
(<a href='#Xmellin2005joukkooppi'>53</a>). Funktio muuttaa minkä tahansa joukon
                                                                         

                                                                         
<!-- l. 208 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>A</mi></math> alkion joksikin
joukon <!-- l. 208 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>B</mi></math>
alkioksi.
</p> 
<p>   Funktionaalisessa ohjelmoinnissa puhtaiden funktioiden voidaan ajatella aina
olevan rinnastettaessa jonkin joukon muutokseksi johonkin toiseen joukkoon
(koodiesimerkki <a href='#havainnollistava-funktio-joka-muuttaa-joukon-a-abc-joukoksi-b-'>3.7<!-- tex4ht:ref: code:ts_set_example  --></a>) (<a href='#Xbartosz_category_for_progamers'>55</a>). (Toisaalta funktioiden argumentit ja palautusarvot
ovat aina joukkoja riippumatta siitä onko funktio puhdas vai ei. Ei-puhtaat
funktiot eivät kuitenkaan välttämättä luo yksikäsitteisiä muutoksia
joukkojen alkioille.)
                                                                         

                                                                         
</p> 
<p id='havainnollistava-funktio-joka-muuttaa-joukon-a-abc-joukoksi-b-'>   <a id='x1-14028r7'></a></p> 
<figure class='float'>
                                                                         

                                                                         
<pre class='fancyvrb' id='fancyvrb8'><a id='x1-14011r1'></a><span style='color:#008000;'><strong><span class='ectt-1200'>type</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>SetA</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span style='color:#BA2121;'><span class='tctt-1200'>'</span><span class='ectt-1200'>a</span><span class='tctt-1200'>'</span></span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>|</span></span><span style='color:#BABABA;'> </span><span style='color:#BA2121;'><span class='tctt-1200'>'</span><span class='ectt-1200'>b</span><span class='tctt-1200'>'</span></span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>|</span></span><span style='color:#BABABA;'> </span><span style='color:#BA2121;'><span class='tctt-1200'>'</span><span class='ectt-1200'>c</span><span class='tctt-1200'>'</span></span> 
<a id='x1-14013r2'></a><span style='color:#008000;'><strong><span class='ectt-1200'>type</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>SetB</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>1</span></span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>|</span></span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>2</span></span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>|</span></span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>3</span></span> 
<a id='x1-14015r3'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>aToB</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>(a</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#B00040;'><strong><span class='ectt-1200'>SetA</span></strong></span><span class='ectt-1200'>)</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>SetB</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>{</span> 
<a id='x1-14017r4'></a><span style='color:#BABABA;'>     </span><span style='color:#008000;'><strong><span class='ectt-1200'>switch</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>(a)</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>{</span> 
<a id='x1-14019r5'></a><span style='color:#BABABA;'>         </span><span style='color:#008000;'><strong><span class='ectt-1200'>case</span></strong></span><span style='color:#BABABA;'> </span><span style='color:#BA2121;'><span class='tctt-1200'>'</span><span class='ectt-1200'>a</span><span class='tctt-1200'>'</span></span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#008000;'><strong><span class='ectt-1200'>return</span></strong></span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>1</span></span> 
<a id='x1-14021r6'></a><span style='color:#BABABA;'>         </span><span style='color:#008000;'><strong><span class='ectt-1200'>case</span></strong></span><span style='color:#BABABA;'> </span><span style='color:#BA2121;'><span class='tctt-1200'>'</span><span class='ectt-1200'>b</span><span class='tctt-1200'>'</span></span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#008000;'><strong><span class='ectt-1200'>return</span></strong></span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>2</span></span> 
<a id='x1-14023r7'></a><span style='color:#BABABA;'>         </span><span style='color:#008000;'><strong><span class='ectt-1200'>case</span></strong></span><span style='color:#BABABA;'> </span><span style='color:#BA2121;'><span class='tctt-1200'>'</span><span class='ectt-1200'>c</span><span class='tctt-1200'>'</span></span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#008000;'><strong><span class='ectt-1200'>return</span></strong></span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>3</span></span> 
<a id='x1-14025r8'></a><span style='color:#BABABA;'>     </span><span class='ectt-1200'>}</span> 
<a id='x1-14027r9'></a><span class='ectt-1200'>}</span></pre>
<figcaption class='caption'><span class='id'>Code  3.7:  </span><span class='content'>Havainnollistava  funktio,  joka  muuttaa  joukon  A,  {a,b,c},
joukoksi B, {1, 2, 3}.</span></figcaption><!-- tex4ht:label?: x1-14028r7  -->
                                                                         

                                                                         
   </figure>
<p>   Tarkastellaan konkreettisempaa esimerkkiä lähtien koodiesimerkistä
<a href='#funktio-joka-jakaa-numeron-toisella'>3.8<!-- tex4ht:ref: code:ts_set_theory_3  --></a>.
                                                                         

                                                                         
</p> 
<p id='funktio-joka-jakaa-numeron-toisella'>   <a id='x1-14032r8'></a></p> 
<figure class='float'>
                                                                         

                                                                         
<pre class='fancyvrb' id='fancyvrb9'><a id='x1-14031r1'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>divide</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>(x</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#B00040;'><strong><span class='ectt-1200'>number</span></strong></span><span class='ectt-1200'>)</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>(y</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#B00040;'><strong><span class='ectt-1200'>number</span></strong></span><span class='ectt-1200'>)</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>x</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>/</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>y</span></pre>
<figcaption class='caption'><span class='id'>Code 3.8: </span><span class='content'>Funktio, joka jakaa numeron toisella.</span></figcaption><!-- tex4ht:label?: x1-14032r8  -->
                                                                         

                                                                         
   </figure>
<p>   Funktio ottaa kaksi numeroa, ja jakaa ensimmäisen toisella. Argumentit on
tyypitetty JavaScript-numeroiksi. Jos kyseistä funktiota haluaa käyttää,
ohjelmoijan tulisi tietää, että nollalla ei voi jakaa ja että jos niin kuitenkin
tehdään, JavaScript palauttaa arvon <code class='verb'><span style='color:#008000;'><strong>Infinity</strong></span></code> (tai erityisemmässä
tapauksessa <code class='verb'><span style='color:#008000;'><strong>NaN</strong></span></code>) (koodiesimerkki <a href='#jakamisoperaattorin-toiminta-javascriptissa'>3.9<!-- tex4ht:ref: code:ts_division  --></a>).
                                                                         

                                                                         
</p> 
<p id='jakamisoperaattorin-toiminta-javascriptissa'>   <a id='x1-14042r9'></a></p> 
<figure class='float'>
                                                                         

                                                                         
<pre class='fancyvrb' id='fancyvrb10'><a id='x1-14037r1'></a><span class='ectt-1200'>console.log(</span><span style='color:#666666;'><span class='ectt-1200'>1</span></span><span style='color:#666666;'><span class='ectt-1200'>/</span></span><span style='color:#666666;'><span class='ectt-1200'>0</span></span><span class='ectt-1200'>)</span><span style='color:#BABABA;'>  </span><span style='color:#3D7A7A;'><em><span class='ecit-1200'>// Infinity</span></em></span> 
<a id='x1-14039r2'></a><span class='ectt-1200'>console.log(</span><span style='color:#666666;'><span class='ectt-1200'>1</span></span><span style='color:#666666;'><span class='ectt-1200'>/-</span></span><span style='color:#666666;'><span class='ectt-1200'>0</span></span><span class='ectt-1200'>)</span><span style='color:#BABABA;'> </span><span style='color:#3D7A7A;'><em><span class='ecit-1200'>// -Infinity</span></em></span> 
<a id='x1-14041r3'></a><span class='ectt-1200'>console.log(</span><span style='color:#666666;'><span class='ectt-1200'>0</span></span><span style='color:#666666;'><span class='ectt-1200'>/</span></span><span style='color:#666666;'><span class='ectt-1200'>0</span></span><span class='ectt-1200'>)</span><span style='color:#BABABA;'>  </span><span style='color:#3D7A7A;'><em><span class='ecit-1200'>// NaN</span></em></span></pre>
<figcaption class='caption'><span class='id'>Code 3.9: </span><span class='content'>Jakamisoperaattorin toiminta JavaScriptissä</span></figcaption><!-- tex4ht:label?: x1-14042r9  -->
                                                                         

                                                                         
   </figure>
<p>   Jos jakolaskufunktion kehitykseen halutaan soveltaa joukko-oppia, voi olla
mieluista määritellä argumenteille spesifimmät joukot, sillä joukkona
JavaScriptin <code class='verb'>number</code> sisältää epämieluisia arvoja laskujen kannalta
(<code class='verb'>[<span style='color:#008000;'><strong>NaN</strong></span>,<span style='color:#BABABA;'> </span><span style='color:#008000;'><strong>Infinity</strong></span>,<span style='color:#BABABA;'> </span><span style='color:#666666;'>-</span><span style='color:#008000;'><strong>Infinity</strong></span>]</code>).
</p> 
<p>   Voidaan luoda jakolaskua varten joukot <code class='verb'>Rational</code> ja <code class='verb'>NonZero</code>, ja ohjelmoida
ne TypeScript-tyypeiksi (koodiesimerkki <a href='#rational-ja-nonzerojoukkojen-maaritelmat-typescriptissa'>3.10<!-- tex4ht:ref: code:ts_type_mayhem  --></a>).
                                                                         

                                                                         
</p> 
<p id='rational-ja-nonzerojoukkojen-maaritelmat-typescriptissa'>   <a id='x1-14073r10'></a></p> 
<figure class='float'>
                                                                         

                                                                         
<pre class='fancyvrb' id='fancyvrb11'><a id='x1-14054r1'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>RationalSymbol</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span style='color:#008000;'><span class='ectt-1200'>Symbol</span></span><span class='ectt-1200'>(</span><span style='color:#BA2121;'><span class='tctt-1200'>'</span><span class='ectt-1200'>Rational</span><span class='tctt-1200'>'</span></span><span class='ectt-1200'>)</span> 
<a id='x1-14056r2'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>NonZeroSymbol</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span style='color:#008000;'><span class='ectt-1200'>Symbol</span></span><span class='ectt-1200'>(</span><span style='color:#BA2121;'><span class='tctt-1200'>'</span><span class='ectt-1200'>NonZero</span><span class='tctt-1200'>'</span></span><span class='ectt-1200'>)</span> 
<a id='x1-14058r3'></a> 
<a id='x1-14060r4'></a><span style='color:#008000;'><strong><span class='ectt-1200'>type</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>Rational</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span style='color:#B00040;'><strong><span class='ectt-1200'>number</span></strong></span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>&amp;</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>{</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>[RationalSymbol]</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#BA2121;'><span class='ectt-1200'>"brand"</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>}</span> 
<a id='x1-14062r5'></a><span style='color:#008000;'><strong><span class='ectt-1200'>type</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>NonZero</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>Rational</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>&amp;</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>{</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>[NonZeroSymbol]</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#BA2121;'><span class='ectt-1200'>"brand"</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>}</span> 
<a id='x1-14064r6'></a> 
<a id='x1-14066r7'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>isRational</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>(x</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#B00040;'><strong><span class='ectt-1200'>number</span></strong></span><span class='ectt-1200'>)</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>x</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>is</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>Rational</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span> 
<a id='x1-14068r8'></a><span style='color:#BABABA;'>     </span><span style='color:#666666;'><span class='ectt-1200'>!</span></span><span class='ectt-1200'>[</span><span style='color:#008000;'><strong><span class='ectt-1200'>Infinity</span></strong></span><span class='ectt-1200'>,</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>-</span></span><span style='color:#008000;'><strong><span class='ectt-1200'>Infinity</span></strong></span><span class='ectt-1200'>,</span><span style='color:#BABABA;'> </span><span style='color:#008000;'><strong><span class='ectt-1200'>NaN</span></strong></span><span class='ectt-1200'>].includes(x)</span> 
<a id='x1-14070r9'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>isNonZero</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>(x</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#B00040;'><strong><span class='ectt-1200'>number</span></strong></span><span class='ectt-1200'>)</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>x</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>is</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>NonZero</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span> 
<a id='x1-14072r10'></a><span style='color:#BABABA;'>     </span><span class='ectt-1200'>isRational(x)</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>&amp;&amp;</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>x</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>!==</span></span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>0</span></span></pre>
<figcaption class='caption'><span class='id'>Code     3.10:     </span><span class='content'>Rational-     ja     NonZero-joukkojen     määritelmät
TypeScriptissä</span></figcaption><!-- tex4ht:label?: x1-14073r10  -->
                                                                         

                                                                         
   </figure>
<p>   Ajatuksena on, että joukko <code class='verb'>Rational</code> sisältää kaikki JavaScriptin
tukemat rationaaliluvut, ja että joukko <code class='verb'>NonZero</code> muuten sama paitsi ilman
nollaa (kuva <a href='#joukot-nonzero-rational-ja-number-esitettyna-osajoukkoina'>3<!-- tex4ht:ref: fig:set-esimerkki  --></a>).
   </p> 
<figure class='figure' id='x1-14074r3'><span id='joukot-nonzero-rational-ja-number-esitettyna-osajoukkoina'></span> 

                                                                         

                                                                         

                                                                         

                                                                         
<p><img alt='PIC' height='202' src='./figures/set_esimerkki.png' width='202' />
</p> 
<figcaption class='caption'><span class='id'>Figure 3: </span><span class='content'>Joukot NonZero, Rational ja number esitettynä osajoukkoina</span></figcaption><!-- tex4ht:label?: x1-14074r3  -->
                                                                         

                                                                         
   </figure>
<p>   Jos jakamisesimerkkiin määritetään joukot funktion argumenttien
oikeiksi rajoitteiksi, ei funktiota voi käyttää väärin. TypeScript ei anna
ajaa koodia, jos arvojen ei ole varmistettu kuuluvan oikeisiin joukkoihin
(koodiesimerkki <a href='#korrekti-versio-funktiolle-annettavat-arvot-on-varmistettava-kuuluvan-oikeisiin-joukkoihin-jossain-vaiheessa-ennen-funktioon-syottoa-kayttaen-maariteltyja-javascriptisrational-ja-javascriptisnonzerofunktioita'>3.11<!-- tex4ht:ref: code:ts_set_theory_6  --></a>) (<a href='#Xtypsecript_website'>4</a>).
                                                                         

                                                                         
</p> 
<p id='korrekti-versio-funktiolle-annettavat-arvot-on-varmistettava-kuuluvan-oikeisiin-joukkoihin-jossain-vaiheessa-ennen-funktioon-syottoa-kayttaen-maariteltyja-javascriptisrational-ja-javascriptisnonzerofunktioita'>   <a id='x1-14078r11'></a></p> 
<figure class='float'>
                                                                         

                                                                         
<pre class='fancyvrb' id='fancyvrb12'><a id='x1-14077r1'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>divide</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>(x</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#B00040;'><strong><span class='ectt-1200'>Rational</span></strong></span><span class='ectt-1200'>)</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>(y</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#B00040;'><strong><span class='ectt-1200'>NonZero</span></strong></span><span class='ectt-1200'>)</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>x</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>/</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>y</span><span style='color:#BABABA;'> </span><span style='color:#008000;'><strong><span class='ectt-1200'>as</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>Rational</span></pre>
<figcaption class='caption'><span class='id'>Code 3.11: </span><span class='content'>Korrekti versio. Funktiolle annettavat arvot on varmistettava
kuuluvan oikeisiin joukkoihin jossain vaiheessa ennen funktioon syöttöä
käyttäen määriteltyjä <code class='verb'>isRational</code>- ja <code class='verb'>isNonZero</code>-funktioita.</span></figcaption><!-- tex4ht:label?: x1-14078r11  -->
                                                                         

                                                                         
   </figure>
<p>   Aiempaan esimerkkiin voisi päätyä, vaikkei olisi koskaan kuullut
joukko-opista. Päällimmäisenä ajatuksena on kuitenkin se, että jos
syötteitä ja palautusarvoja miettii joukkojen kannalta, syntyy luotettavampaa
ohjelmakoodia ja vähemmän yllätyksiä. Tyypit ovat jo itsessään
joukkoja, mutta niiden yksityiskohdat riippuvat käytössä olevasta,
esimerkiksi ohjelmointikielen, tyyppijärjestelmästä (<a href='#Xtype_theory'>83</a>). Siksi ajatuksen
tasolla joukkojen ajattelu on hyödyllistä.
</p> 
<p>   Argumentit ja palautusarvot (tyypit) voi tietysti mieltää joukkoina myös
<a class='glossary' href='#glo_composed_function'>yhdistetyissä funktioissa</a> (kuva <a href='#funktioiden-yhdistaminen-joukkoopin-nakokulmasta-funktiot-a-b-ja-b-c-yhdistamalla-saadaan-a-c-alykkaalla-kaantajalla-voi-poistaa-turhia-laskutoimituksia-keskimmaisen-joukon-evaluointi-on-kaytannossa-turhaa-jos-funktiot-ovat-puhtaita'>4<!-- tex4ht:ref: fig:function_composition_in_sets  --></a>). Vaikka ohjelmoinnissa joukko-oppia ei
rinnasteta ainoastaan funktionaaliseen ohjelmointiin, joukko-opin ajattelu on
siinä vähintäänkin tervetullutta.
   </p> 
<figure class='figure' id='x1-14079r4'><span id='funktioiden-yhdistaminen-joukkoopin-nakokulmasta-funktiot-a-b-ja-b-c-yhdistamalla-saadaan-a-c-alykkaalla-kaantajalla-voi-poistaa-turhia-laskutoimituksia-keskimmaisen-joukon-evaluointi-on-kaytannossa-turhaa-jos-funktiot-ovat-puhtaita'></span> 

                                                                         

                                                                         

                                                                         

                                                                         
<p><img alt='1234ABCDαβγδABC1234αβγδ === {{{1Aα,,, 2Bβ,,,3γ,C,4,}δD} }' src='main1x.svg' />
</p> 
<figcaption class='caption'><span class='id'>Figure 4:   </span><span class='content'>Funktioiden   yhdistäminen   joukko-opin   näkökulmasta.
Funktiot A<!-- l. 372 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mspace class='thinspace' width='0.17em'></mspace> <mo class='MathClass-rel' stretchy='false'>→</mo><mspace class='thinspace' width='0.17em'></mspace></mrow></math>B
ja B<!-- l. 372 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mspace class='thinspace' width='0.17em'></mspace> <mo class='MathClass-rel' stretchy='false'>→</mo><mspace class='thinspace' width='0.17em'></mspace></mrow></math>C
yhdistämällä saadaan A<!-- l. 372 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mspace class='thinspace' width='0.17em'></mspace> <mo class='MathClass-rel' stretchy='false'>→</mo><mspace class='thinspace' width='0.17em'></mspace></mrow></math>C.
Älykkäällä  kääntäjällä  voi  poistaa  turhia  laskutoimituksia.
Keskimmäisen joukon evaluointi on käytännössä turhaa, jos funktiot
ovat puhtaita.</span></figcaption><!-- tex4ht:label?: x1-14079r4  -->
                                                                         

                                                                         
   </figure>
   
   <h4 class='subsectionHead' id='kategoriateoria'><span class='titlemark'>3.2.3   </span> <a id='x1-150003.2.3'></a>Kategoriateoria</h4>
<p>Joukko-oppi ei ole ainoa ohjelmointiin sovellettava matemaattinen osa-alue.
Funktionaaliselle ohjelmoinnille oleellisin ja syvällisin osa-alue on <a class='glossary' href='#glo_category_theory'>kategoriateoria</a>
(<a href='#Xbartosz_category_for_progamers'>55</a>; <a href='#Xpromises-spec-94'>57</a>; <a href='#Xdear_functional_bros'>20</a>).
</p> 
<p>   Kategoriateoria tutkii matemaattisia rakenteita ja niiden välisiä suhteita
erittäin abstraktilla tasolla. Se keskittyy objektien (kuten joukkojen tai
tyyppien) ja niiden välillä olevien morfismien (funktioiden tai muunnosten)
tutkimiseen (<a href='#Xbartosz_category_for_progamers'>55</a>). Kategoriateorian avulla voidaan ymmärtää ja formalisoida
monimutkaisia matemaattisia ja ohjelmallisia rakenteita. (<a href='#Xbartosz_category_for_progamers'>55</a>; <a href='#Xpromises-spec-94'>57</a>; <a href='#Xcategory_theory'>81</a>)
Kategoriateoriaa ohjelmoijille opettavan Bartosz Milewskin kokemusten
mukaan, vaikka algebra tai kalkyyli olisi ohjelmoijalle ajatuksena hirveää,
kategoriateoria on kuitenkin erityisen mieluisaa sen suuresta teoreettisuudesta
huolimatta. (<a href='#Xmilewski2017category'>56</a>, 9).
</p> 
<p>   Kategoriateoriassa peruspalikat ovat kategoriat (<a href='#Xmilewski2017category'>56</a>, 9). Kategoria on
rakenne, joka koostuu morfismeista. Esimerkiksi joukot ja funktiot koostavat
kategorian, jossa joukot ovat kategorian objektit, ja funktiot kategorian
morfismit (<a href='#Xcategory_theory'>81</a>). Kategoriateoriaan ei perehdytä tarkemmin tässä työssä
monadirakennetta lukuun ottamatta. Ei ole käytännönläheistä tuoda
tavattoman teoreettisia käsitteitä työhön, jossa tavoitteena on etsiä
jonkinkaltaista konkretiaa.
   
   </p> 

   <h3 class='sectionHead' id='monadi'><span class='titlemark'>3.3   </span> <a id='x1-160003.3'></a>Monadi</h3>
<p>Monadi tulee esille funktionaalisessa ohjelmoinnissa erittäin usein. Se on alun
perin teoreettinen rakenne, joka on löytynyt 1900-luvun puolivälin jälkeen
kategoriateoriaa tutkivien matemaatikkojen ansiosta (<a href='#XBeck2003'>9</a>). Monadin hyöty
ohjelmoinnissa ilmeni vasta myöhemmin 1990-luvulla (<a href='#Xcomputerphile_monad'>22</a>).
</p> 
<p>   Ohjelmoinnissa ohjelman sivuvaikutukset ovat miltei vaatimus.
Funktionaalisessa ohjelmoinnissa sivuvaikutukset eivät sovi. Monadeilla
onnistuttiin tuomaan sivuvaikutuksia funktionaaliseen ohjelmointiin
säilyttäen ohjelmien ennustettavuus ja puhtaus mutta kuitenkin siten, että
koodi pysyy ulkoisesti sivuvaikutuksettomalta vaikuttavana. (<a href='#Xcomputerphile_monad'>22</a>)
</p> 
<p>   Ohjelmoinnissa monadeilla voidaan hallita sivuvaikutuksia, ketjuttaa
                                                                         

                                                                         
operaatioita ja yhtenäistää abstraktioita (<a href='#Xcomputerphile_monad'>22</a>; <a href='#Xbartosz_category_for_progamers_10'>54</a>; <a href='#Xstackoverflow_what_monad'>67</a>). Ohjelmoinnissa
monadi on kieliagnostinen käsite. Monadin voi kuvitella olevan lähetys, jota
kuljetetaan tehtaasta toiseen. Jokainen tehdas aina pitää huolen, että arvo
on kääritty johonkin laatikkoon (monadiin) (kuva <a href='#monadisten-operaation-ketjuttaminen-kuvattuna-laatikoin-ja-tehtain-laatikko-monadi-kuljetetaan-bind-tehtaiden-function-lapi-laatikon-sisalle-ei-nahda-suoraan-ennen-kuin-se-avataan'>5<!-- tex4ht:ref: fig:monad  --></a>).
   </p> 
<figure class='figure' id='x1-16001r5'><span id='monadisten-operaation-ketjuttaminen-kuvattuna-laatikoin-ja-tehtain-laatikko-monadi-kuljetetaan-bind-tehtaiden-function-lapi-laatikon-sisalle-ei-nahda-suoraan-ennen-kuin-se-avataan'></span> 

                                                                         

                                                                         

                                                                         

                                                                         
<p><img alt='PIC' height='284' src='./figures/bromad.png' width='284' />
</p> 
<figcaption class='caption'><span class='id'>Figure 5:  </span><span class='content'>Monadisten  operaation  ketjuttaminen  kuvattuna  laatikoin  ja
tehtain. Laatikko (monadi) kuljetetaan (bind) tehtaiden (function) läpi.
Laatikon sisälle ei nähdä suoraan, ennen kuin se avataan.</span></figcaption><!-- tex4ht:label?: x1-16001r5  -->
                                                                         

                                                                         
   </figure>
<p>   Tässä luvussa käydään läpi, mitä ovat yleiset monadit, miten
implementoida monadi, miten niitä käytetään, ja lopulta pyritään
tiivistämään miten monadeja voi ajatella ohjelmoinnissa.
   
   </p> 

   <h4 class='subsectionHead' id='yleiset-monadit'><span class='titlemark'>3.3.1   </span> <a id='x1-170003.3.1'></a>Yleiset monadit</h4>
<p><code><span class='ectt-1200'>Promise, Maybe, Either, Result, State, IO, ja Lista (Array)</span></code>. Nämä
ovat esimerkkejä yleisesti käytetyistä monadeista. (<a href='#Xmonad_wikipedia'>82</a>; <a href='#Xbartosz_category_for_progamers_10'>54</a>)
</p> 
<p>   Pintapuolisesti tarkasteltuna esitetyt käsitteet vaikuttavat hyvin erilaisilta,
sillä niiden käyttötarkoitukset ja rakenteet vaihtelevat merkittävästi.
Esimerkiksi <code><span class='ectt-1200'>Promise</span></code> käsittelee asynkronisia operaatioita, kun taas
<code><span class='ectt-1200'>Maybe</span></code> kuvastaa mahdollisia arvoja, jotka voivat olla olemassa tai olla
olematta. <code><span class='ectt-1200'>Either</span></code> ja <code><span class='ectt-1200'>Result</span></code> tarjoavat mekanismin virheiden käsittelyyn,
ja <code><span class='ectt-1200'>State</span></code> mahdollistaa tila-arvojen kantamisen funktioiden läpi. <code><span class='ectt-1200'>IO</span></code>
käsittelee sivuvaikutuksia, ja <code><span class='ectt-1200'>Lista (Array)</span></code> tarjoaa toistuvien arvojen
käsittelyn.
</p> 
<p>   Kuitenkin näitä kaikkia yhdistää yhteinen abstraktio. Ne kaikki
toteuttavat tietyt perustoiminnot <code><span class='ectt-1200'>bind</span></code> (<code><span class='ectt-1200'>flatMap/chain</span></code>) ja <code><span class='ectt-1200'>of</span></code> (<code><span class='ectt-1200'>unit/pure</span></code>).
Näiden operaatioiden avulla monadit voivat kapseloida laskennan tilan tai
sivuvaikutuksen, mikä tarjoaa yhdenmukaisen tavan yhdistää operaatioita ja
siirtää tietoa laskentaketjujen läpi.
</p> 
<p>   JavaScriptissä <code class='verb'><span style='color:#008000;'>Array</span></code> toteuttaa toiminnon <code><span class='ectt-1200'>bind</span></code> <code class='verb'><span style='color:#008000;'>Array</span>.prototype.flatMap</code>-metodilla,
ja <code><span class='ectt-1200'>of</span></code> toiminnon staattisella <code class='verb'><span style='color:#008000;'>Array</span>.<span style='color:#008000;'><strong>of</strong></span></code>-metodilla (<a href='#Xstackoverflow_flatmap_monad'>68</a>; <a href='#Xstackoverflow_js_array_monad'>5</a>).
</p> 
<p>   JavaScriptin <code class='verb'><span style='color:#008000;'>Promise</span></code> toteuttaa toiminnon <code><span class='ectt-1200'>bind</span></code> <code class='verb'><span style='color:#008000;'>Promise</span>.prototype.then</code>-metodilla,
ja <code><span class='ectt-1200'>of</span></code>-toiminnon staattisella <code class='verb'><span style='color:#008000;'>Promise</span>.resolve</code> ja <code class='verb'><span style='color:#008000;'>Promise</span>.reject</code> metodeilla
(<a href='#Xread-it-later-11481'>32</a>; <a href='#Xstackoverflow_why_monad'>69</a>; <a href='#Xpromises-spec-94'>57</a>).
</p> 
<p>   Vaikka JavaScriptin <code class='verb'><span style='color:#008000;'>Promise</span></code> ja <code class='verb'><span style='color:#008000;'>Array</span></code> toteuttavatkin monadin <code><span class='ectt-1200'>bind</span></code>- ja
<code><span class='ectt-1200'>of</span></code>-toiminnot, se ei tee niistä automaattisesti monadeja kategoriateorian tai
funktionaalisen ohjelmoinnin sääntöjen mukaan (<a href='#Xpromises-spec-94'>57</a>; <a href='#Xstackoverflow_why_monad'>69</a>; <a href='#Xstackoverflow_js_array_monad'>5</a>). Kehittäjä
Jake Archibaldin mukaan akateemisten käsitteiden seuraaminen puhtaasti ei
kuitenkaan usein johda käytännöllisiin ratkaisuihin (<a href='#Xpennane_fp_gist'>7</a>). Tästä syystä on
kohtuullista puhua näistä rakenteista monadeina, vaikkeivat ne sitä puhtaasti
olisikaan.
   
   </p> 

                                                                         

                                                                         
   <h4 class='subsectionHead' id='monadin-implementointi'><span class='titlemark'>3.3.2   </span> <a id='x1-180003.3.2'></a>Monadin implementointi</h4>
<p>Konkreettisesti monadilla tulee siis olla kaksi toimintoa: <code><span class='ectt-1200'>of</span></code> ja <code><span class='ectt-1200'>bind</span></code>. Toiminto <code><span class='ectt-1200'>of</span></code>
käärii arvoja monadiin. Toiminnon voidaan ajatella olevan monadin
konstruktori. (<a href='#Xstackoverflow_what_monad'>67</a>)
</p> 
<p>   <code><span class='ectt-1200'>Bind</span></code>-toiminnolla muutetaan monadiin käärittyä arvoa antamalla
toiminnolle funktio, joka palauttaa toisen saman tyypin monadin (<a href='#Xstackoverflow_what_monad'>67</a>).
<code><span class='ectt-1200'>Bind</span></code>-toiminto on käytännössä sama kuin tunnetumpi <code><span class='ectt-1200'>map</span></code>-toiminto. Erona
on, että <code><span class='ectt-1200'>map</span></code> palauttaa muokatun arvon, joka on kääritty samaan monadiin,
kun taas <code><span class='ectt-1200'>bind</span></code> mahdollistaa monadin sisällä olevan arvon muuttamisen ja sen
ketjuttamisen muihin monadisiin operaatioihin.
</p> 
<p>   Näillä kahdella toiminnolla voidaan luoda rakenteita, jotka käyttäytyvät
kuin monadi. Monadin täydet hyödyt eivät kuitenkaan ilmene, jos rakenne ei
myös täytä monadien kolmea sääntöä: vasen identiteetti (left identity),
oikea identiteetti (right identity), ja liitännäisyys (associativity) (<a href='#Xhaskellmonadlaws'>35</a>). Jos
kaikki kolme sääntöä toteutuu, voidaan luoda työkaluja, joissa voidaan
käyttää mitä tahansa monadia, ja silloin monadi on määritelmän
mukaisesti monadi.
</p> 
<p>   Luvussa “Promise-tietorakenne on miltei monadi” puidaan sitä, miksei
JavaScriptin <code><span class='ectt-1200'>Promise</span></code> ole määritelmällisesti täydellisesti monadi ja miksei
ilman ulkoisia kirjastoja JavaScriptiin voida enää tuoda määritelmän
täyttäviä monadeja. Kuitenkin rakenne, joka on kuin monadi, voi myös olla
erittäin hyödyllinen. Siksi ei tarkemmin käsitellä, miten monadin
määritelmän voi oikeellisesti täyttää.
   
   </p> 

   <h4 class='subsectionHead' id='monadin-kayttaminen'><span class='titlemark'>3.3.3   </span> <a id='x1-190003.3.3'></a>Monadin käyttäminen</h4>
<p>Monadeja käytetään operaatioiden ketjuttamiseen. Monadeilla voi
käytännössä tehdä yhdistettyjä funktioita, joissa on mukautettu tapa
hallita, mitä yhdisteen funktiokutsujen välissä tapahtuu.
</p> 
<p>   Käydään esimerkkinä JavaScriptin <code><span class='ectt-1200'>Promise</span></code>-tietorakennetta (joka toimii
kuin monadi) (koodiesimerkki <a href='#promisetietorakenteella-bindoperaatioiden-ketjutus-jossa-haetaan-kayttajatietoja-kuvitteellisesta-ulkoisesta-rajapinnasta-jos-mikaan-yksittainen-askel-paatyy-virhetilaan-palauttaa-ohjelma-tyhjan-listan-kutsumalla-javascriptarrayofmetodia'>3.12<!-- tex4ht:ref: code:promise_monad_concise  --></a>).
                                                                         

                                                                         
</p> 
<p id='promisetietorakenteella-bindoperaatioiden-ketjutus-jossa-haetaan-kayttajatietoja-kuvitteellisesta-ulkoisesta-rajapinnasta-jos-mikaan-yksittainen-askel-paatyy-virhetilaan-palauttaa-ohjelma-tyhjan-listan-kutsumalla-javascriptarrayofmetodia'>   <a id='x1-19016r12'></a></p> 
<figure class='float'>
                                                                         

                                                                         
<pre class='fancyvrb' id='fancyvrb13'><a id='x1-19007r1'></a><span class='ectt-1200'>fetch(</span><span style='color:#BA2121;'><span class='ectt-1200'>"https://some.imaginary.api.com/v1"</span></span><span class='ectt-1200'>)</span> 
<a id='x1-19009r2'></a><span style='color:#BABABA;'>     </span><span class='ectt-1200'>.then(result</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>result.json())</span> 
<a id='x1-19011r3'></a><span style='color:#BABABA;'>     </span><span class='ectt-1200'>.then(data</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>data.users)</span> 
<a id='x1-19013r4'></a><span style='color:#BABABA;'>     </span><span class='ectt-1200'>.then(users</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>users.map(user</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>user.id))</span> 
<a id='x1-19015r5'></a><span style='color:#BABABA;'>     </span><span class='ectt-1200'>.</span><span style='color:#008000;'><strong><span class='ectt-1200'>catch</span></strong></span><span class='ectt-1200'>(error</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span style='color:#008000;'><span class='ectt-1200'>Array</span></span><span class='ectt-1200'>.</span><span style='color:#008000;'><strong><span class='ectt-1200'>of</span></strong></span><span class='ectt-1200'>())</span></pre>
<figcaption class='caption'><span class='id'>Code  3.12:  </span><span class='content'>Promise-tietorakenteella  bind-operaatioiden  ketjutus,  jossa
haetaan  käyttäjätietoja  kuvitteellisesta  ulkoisesta  rajapinnasta.  Jos
mikään  yksittäinen  askel  päätyy  virhetilaan,  palauttaa  ohjelma
tyhjän listan kutsumalla <code class='verb'><span style='color:#008000;'>Array</span>.<span style='color:#008000;'><strong>of</strong></span></code>-metodia.</span></figcaption><!-- tex4ht:label?: x1-19016r12  -->
                                                                         

                                                                         
   </figure>
<p>   Koodiesimerkissä nähdään operaatioiden monadinen ketjutus. Jokainen
<code class='verb'><span style='color:#008000;'>Promise</span>.then</code>-kutsu palauttaa aina uuden Promise-monadin. Jos jokin
yksittäinen Promise päätyy virhetilaan, ei enää seuraavia then-kutsuja
ajeta, vaan ketju päätyy automaattisesti <code><span class='ectt-1200'>catch</span></code>-osioon.
</p> 
<p>   Käytännössä koko ohjelma on siis vain yhdistetty funktio, jossa on
määritelty räätälöityä logiikkaa siihen, miten funktiokutsut
käsitellään. Kuitenkaan <code class='verb'><span style='color:#008000;'>Promise</span>.<span style='color:#008000;'><strong>catch</strong></span></code> ei liity suoraan monadisuuteen,
eikä käytännössä oikeellisesti implementoidun monadin tarvitsisi
käyttää sellaista (<a href='#Xpromises-spec-94'>57</a>).
</p> 
<p>   Raja on häilyvä. Onko JavaScriptin Promise monadi vai ei? Matemaatikkojen
mielestä monadi on “yksinkertaisesti” monoidi endofunktoreiden kategoriassa
(<a href='#Xbartosz_category_for_progamers_10'>54</a>; <a href='#Xmonad_wikipedia'>82</a>; <a href='#Xstackoverflow_what_monad'>67</a>). Toisten mielestä monadi on asia, jolla on <code><span class='ectt-1200'>flatMap</span></code>-metodi
(<a href='#Xstackoverflow_flatmap_monad'>68</a>).
</p> 
<p>   Pragmaattisuuden nimissä monadi saa tässä työssä olla rakenne, jolla
voidaan ketjuttaa operaatioita itsemäärittelemällä tavalla, joka
mahdollisesti eroaa tavallisesta funktioiden yhdistämisestä.
   
   </p> 

   <h3 class='sectionHead' id='pragmaattisuus-funktionaalisessa-ohjelmoinnissa'><span class='titlemark'>3.4   </span> <a id='x1-200003.4'></a>Pragmaattisuus funktionaalisessa ohjelmoinnissa</h3>
<p>Funktionaalisen ohjelmoinnin iskevin teoria on pitkälti käytynä, ja on ehkä
selvää, että funktionaalinen ohjelmointi on pohjimmiltaan erittäin
teoreettista. Voi pohtia, miten funktionaalinen ohjelmoinnin voi tuoda
ohjelmistokehittäjän arsenaaliin käytännönläheisesti.
</p> 
<p>   Kun funktionaalisen ohjelmoinnin kauneus on matemaattisissa kulmakivissä,
joilla ei ole tapaa taipua, miten sen voi yhdistää säännöttömään
JavaScriptiin, tai muuhun vastaavanlaiseen ohjelmointikieleen?
</p> 
<p>   Mikä on se lähestymistapa, jota tarvitaan käytännönläheiseen,
pragmaattiseen, funktionaaliseen ohjelmointiin?
</p> 
<p>   Robert C. Martinin mukaan pragmaattinen funktionaalinen ohjelmointi
on sitä, että käytetään esimerkiksi <a class='glossary' href='#glo_immutable_data'>muuttumattomuutta</a> ja
puhtaita funktioita silloin, kun ne parantavat ohjelman luettavuutta,
ylläpidettävyyttä ja suorituskykyä, ja kuitenkin niin, ettei vaadita
täydellistä sitoutumista funktionaalisen ohjelmoinnin paradigmaan.
(<a href='#Xmartin2017pragmaticfp'>43</a>)
</p> 
<p>   Myös Cantarella mainitsee opinnäytetyönsä loppupuolella ajatuksen,
että mitä enemmän paradigmoihin liittyviin artikkeleihin perehtyy, sitä
myötämielisemmäksi tulee ajatukselle, että paradigmoja tulisi yhdistellä
                                                                         

                                                                         
vapaammin. (<a href='#Xcantarella_fp_haitat'>16</a>, 45)
</p> 
<p>   Myös kokemusten perusteella työpaikalla on havaittu funktionaalisen
ohjelmoinnin toimivan kohtuullisen hyvin ripoteltuna proseduraalisen
ohjelmakoodin.
</p> 
<p>   Pragmaattista funktionaalista ohjelmointia vaikuttaa siis olevan se, että
otetaan vain, mitä tarvitaan (<a href='#Xdear_functional_bros'>20</a>; <a href='#Xmartin2017pragmaticfp'>43</a>; <a href='#Xcantarella_fp_haitat'>16</a>). Toisaalta se, mitä tarvitaan
ei ole välittömästi selvää. Toisille pragmaattista on jättää
kaikki matemaattinen teoria pois ohjelmoinnista heti kättelyssä, toisille
kategoriateorian rakenteiden käyttäminen, kun ne oikeasti sopivat
mallintamaan ongelmaa (<a href='#Xholvikari2021category'>40</a>; <a href='#Xmartin2017pragmaticfp'>43</a>).
</p> 
<p>   Tässä insinöörityössä tarkempia pragmaattisia funktionaalisen
ohjelmoinnin käytäntöjä pyritään tuomaan esille neljännessä luvussa
“Funktionaalisia käytänteitä ei-funktionaalisissa ohjelmointikielissä”, ja
siitä eteenpäin.
   
   </p> 

   <h3 class='sectionHead' id='funktionaalinen-ohjelmointi-typescript'><span class='titlemark'>3.5   </span> <a id='x1-210003.5'></a>Funktionaalinen ohjelmointi &amp; TypeScript</h3>
<p>JavaScript ei ole funktionaalinen ohjelmointikieli, vaikka se funktionaalisuutta
tukeekin (<a href='#Xis_reduce_bad'>18</a>). TypeScriptin tyyppijärjestelmällä funktionaalisesta
ohjelmoinnista saa jo mieluisampaa (<a href='#Xholvikari2021category'>40</a>).
</p> 
<p>   JavaScriptia halutaan käyttää kaikkeen ohjelmointiin, vaikka usein
erinäköisiin tehtäviin olisi parempiakin ohjelmointikieliä tarjolla. Voi itse
päättää, onko pragmaattista käyttää kaikkeen samaa työkalua, ja
säästää opiskelussa, tai käyttää aikaa uuden sopivamman työkalun
löytämiseen, ja säästää toteuttamisessa.
   
   </p> 

   <h4 class='subsectionHead' id='kielen-sopivuus-funktionaaliseen-ohjelmointiin'><span class='titlemark'>3.5.1   </span> <a id='x1-220003.5.1'></a>Kielen sopivuus funktionaaliseen ohjelmointiin</h4>
<p>Vaikka TypeScript ei ole pohjimmiltaan funktionaalinen ohjelmointikieli, on
sillä ominaisuuksia, joilla funktionaalisesta ohjelmoinnista tulee verraten
helppoa.
</p> 
<p>   TypeScriptissä on käytännössä kolme eri tapaa määrittää
funktioita (koodiesimerkki <a href='#kolme-eri-tapaa-kirjoittaa-funktio-javascriptissa-okhravigdiscussion-funktiomaarittely-funktioilmaus-ja-osittain-sovellettava-funktioilmaus'>3.13<!-- tex4ht:ref: code:javascript_function_types  --></a>). Nuolifunktioilla voidaan harjoittaa
funktionaaliselle ohjelmoinnille tyypillistä argumenttien yksi kerrallaan
antamista.
                                                                         

                                                                         
                                                                         

                                                                         
</p> 
<p id='kolme-eri-tapaa-kirjoittaa-funktio-javascriptissa-okhravigdiscussion-funktiomaarittely-funktioilmaus-ja-osittain-sovellettava-funktioilmaus'>   <a id='x1-22016r13'></a></p> 
<figure class='float'>
                                                                         

                                                                         
<pre class='fancyvrb' id='fancyvrb14'><a id='x1-22007r1'></a><span style='color:#008000;'><strong><span class='ectt-1200'>function</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>rnd(min</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#B00040;'><strong><span class='ectt-1200'>number</span></strong></span><span class='ectt-1200'>,</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>max</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#B00040;'><strong><span class='ectt-1200'>number</span></strong></span><span class='ectt-1200'>)</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>{</span> 
<a id='x1-22009r2'></a><span style='color:#BABABA;'>         </span><span style='color:#008000;'><strong><span class='ectt-1200'>return</span></strong></span><span style='color:#BABABA;'> </span><span style='color:#008000;'><span class='ectt-1200'>Math</span></span><span class='ectt-1200'>.floor(</span><span style='color:#008000;'><span class='ectt-1200'>Math</span></span><span class='ectt-1200'>.random()</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>*</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>max)</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>+</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>min;</span> 
<a id='x1-22011r3'></a><span class='ectt-1200'>}</span> 
<a id='x1-22013r4'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>rnd2</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>(min,</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>max)</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span style='color:#008000;'><span class='ectt-1200'>Math</span></span><span class='ectt-1200'>.floor(</span><span style='color:#008000;'><span class='ectt-1200'>Math</span></span><span class='ectt-1200'>.random()</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>*</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>max)</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>+</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>min;</span> 
<a id='x1-22015r5'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>rnd3</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>min</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>max</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span style='color:#008000;'><span class='ectt-1200'>Math</span></span><span class='ectt-1200'>.floor(</span><span style='color:#008000;'><span class='ectt-1200'>Math</span></span><span class='ectt-1200'>.random()</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>*</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>max)</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>+</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>min;</span></pre>
<figcaption class='caption'><span class='id'>Code  3.13:  </span><span class='content'>Kolme  eri  tapaa  kirjoittaa  funktio  JavaScriptissä  (<a href='#Xokhravi-g-discussion'>19</a>).
Funktiomäärittely, funktioilmaus ja osittain sovellettava funktioilmaus.</span></figcaption><!-- tex4ht:label?: x1-22016r13  -->
                                                                         

                                                                         
   </figure>
<p>   Koska funktioita voi käyttää JavaScriptissä kuin muuttujia (first-class
citizen), voi niitä antaa argumentteina toisille funktioille (koodiesimerkki <a href='#funktioiden-ensiluokkaisuus-javascriptissa-funktiolle-b-voidaan-antaa-funktio-argumenttina'>3.14<!-- tex4ht:ref: code:js_first_class  --></a>).
Tämä mahdollistaa funktionaaliselle ohjelmoinnille tyypillisten <a class='glossary' href='#glo_higher_order_function'>korkeamman
asteen funktioiden</a> luomisen, ja käyttämisen.
                                                                         

                                                                         
</p> 
<p id='funktioiden-ensiluokkaisuus-javascriptissa-funktiolle-b-voidaan-antaa-funktio-argumenttina'>   <a id='x1-22026r14'></a></p> 
<figure class='float'>
                                                                         

                                                                         
<pre class='fancyvrb' id='fancyvrb15'><a id='x1-22021r1'></a><span style='color:#008000;'><strong><span class='ectt-1200'>function</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>A()</span><span style='color:#BABABA;'>  </span><span class='ectt-1200'>{</span><span style='color:#BABABA;'> </span><span style='color:#008000;'><strong><span class='ectt-1200'>return</span></strong></span><span style='color:#BABABA;'> </span><span style='color:#BA2121;'><span class='ectt-1200'>"moi"</span></span><span class='ectt-1200'>;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>}</span> 
<a id='x1-22023r2'></a><span style='color:#008000;'><strong><span class='ectt-1200'>function</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>B(f)</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>{</span><span style='color:#BABABA;'> </span><span style='color:#008000;'><strong><span class='ectt-1200'>return</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>f();</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>}</span> 
<a id='x1-22025r3'></a><span class='ectt-1200'>B(A)</span><span style='color:#BABABA;'> </span><span style='color:#3D7A7A;'><em><span class='ecit-1200'>// "moi"</span></em></span></pre>
<figcaption class='caption'><span class='id'>Code  3.14:  </span><span class='content'>Funktioiden  ensiluokkaisuus  JavaScriptissä.  Funktiolle  B
voidaan antaa funktio argumenttina.</span></figcaption><!-- tex4ht:label?: x1-22026r14  -->
                                                                         

                                                                         
   </figure>
<p>   Funktionaalisen ohjelmoinnin piireissä TypeScriptin tyyppijärjestelmää
arvostetaan myös, koska sillä voidaan rakentaa algebrallisia tietotyyppejä,
jotka ovat yleisesti puhtaissa funktionaalisissa ohjelmointikielissä läsnä ja
suuressa roolissa (<a href='#Xholvikari2021category'>40</a>).
   
   </p> 

   <h4 class='subsectionHead' id='algebralliset-tietotyypit'><span class='titlemark'>3.5.2   </span> <a id='x1-230003.5.2'></a>Algebralliset tietotyypit</h4>
<p>TypeScriptin tyypit ovat mieluisia funktionaaliselle ohjelmoinnille. TypeScript
mahdollistaa funktionaaliselle ohjelmoinnille olennaisten algebrallisten
tietotyyppien määrittelemistä (<a href='#Xholvikari2021category'>40</a>).
</p> 
<p>   Algebralliset tietotyypit ovat osa funktionaalisen ohjelmoinnin maailmaa.
Niiden käyttämisen on huomattu olevan järkevää ja luontevaa
(<a href='#Xholvikari2021category'>40</a>; <a href='#Xhickey_maybe_not'>38</a>; <a href='#Xalgebraic_data_types'>41</a>).
</p> 
<p>   Yksinkertaisesti algebralliset tietotyypit ovat keino määritellä ja käsitellä
monimutkaisia datastruktuureja, jotka koostuvat perustietotyypeistä
yhdistämällä niitä eri tavoin. Tyypillisesti algebralliset tietotyypit jaetaan
kahteen päätyyppiin: tulo- ja summatyypit.
</p> 
<p>   <strong><span class='ecbx-1200'>Tulotyyppi</span></strong> (product type) kuvaa tietorakenteita, joissa yhdistetään
useita arvoja yhdeksi kokonaisuudeksi, esimerkiksi luokkien tai tietueiden
(records) avulla. TypeScriptissä tulotyyppejä voi määritellä käyttäen
objekteja tai Record-tyyppejä (koodiesimerkki <a href='#tulotyyppiesimerkki-typescriptissa-tulotyyppi-tulee-siita-etta-tyypin-osien-maaran-voi-kertoa-keskenaan-saadakseen-tyypin-kokonaisen-permutaatioiden-maaran'>3.15<!-- tex4ht:ref: code:ts_product_type  --></a>). (<a href='#Xalgebraic_data_types'>41</a>; <a href='#Xholvikari2021category'>40</a>)
                                                                         

                                                                         
</p> 
<p id='tulotyyppiesimerkki-typescriptissa-tulotyyppi-tulee-siita-etta-tyypin-osien-maaran-voi-kertoa-keskenaan-saadakseen-tyypin-kokonaisen-permutaatioiden-maaran'>   <a id='x1-23007r15'></a></p> 
<figure class='float'>
                                                                         

                                                                         
<pre class='fancyvrb' id='fancyvrb16'><a id='x1-23004r1'></a><span style='color:#3D7A7A;'><em><span class='ecit-1200'>// Tyypin mahdollisten erilaisten alkioiden määrä: värimahdollisuudet * istuinmahdollisuudet -&gt; tulotyyppi</span></em></span> 
<a id='x1-23006r2'></a><span style='color:#008000;'><strong><span class='ectt-1200'>type</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>Car</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>{</span><span style='color:#008000;'><strong><span class='ectt-1200'>type</span></strong></span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#BA2121;'><span class='ectt-1200'>"car"</span></span><span class='ectt-1200'>,</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>color</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#B00040;'><strong><span class='ectt-1200'>string</span></strong></span><span class='ectt-1200'>;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>seats</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#B00040;'><strong><span class='ectt-1200'>number</span></strong></span><span class='ectt-1200'>;}</span></pre>
<figcaption class='caption'><span class='id'>Code 3.15: </span><span class='content'>Tulotyyppi-esimerkki TypeScriptissä. Tulotyyppi tulee siitä,
että tyypin osien määrän voi kertoa keskenään saadakseen tyypin
kokonaisen permutaatioiden määrän.</span></figcaption><!-- tex4ht:label?: x1-23007r15  -->
                                                                         

                                                                         
   </figure>
<p>   <strong><span class='ecbx-1200'>Summatyyppi</span></strong> (sum type) mahdollistaa arvon, joka voi olla yksi useista
ennalta määritellyistä tyypeistä. TypeScriptissä summatyyppejä voi
määritellä käyttäen diskriminoituja unioneja (discriminated union)
(koodiesimerkki <a href='#summatyyppiesimerkki-typescriptissa-summatyyppi-tulee-siita-etta-tyypin-osien-maaran-voi-summata-keskenaan-saadakseen-tyypin-kokonaisen-permutaatioiden-maaran'>3.16<!-- tex4ht:ref: code:ts_sum_type  --></a>). (<a href='#Xalgebraic_data_types'>41</a>; <a href='#Xholvikari2021category'>40</a>)
                                                                         

                                                                         
</p> 
<p id='summatyyppiesimerkki-typescriptissa-summatyyppi-tulee-siita-etta-tyypin-osien-maaran-voi-summata-keskenaan-saadakseen-tyypin-kokonaisen-permutaatioiden-maaran'>   <a id='x1-23020r16'></a></p> 
<figure class='float'>
                                                                         

                                                                         
<pre class='fancyvrb' id='fancyvrb17'><a id='x1-23013r1'></a><span style='color:#008000;'><strong><span class='ectt-1200'>type</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>Car</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>{</span><span style='color:#008000;'><strong><span class='ectt-1200'>type</span></strong></span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#BA2121;'><span class='ectt-1200'>"car"</span></span><span class='ectt-1200'>,</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>color</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#B00040;'><strong><span class='ectt-1200'>string</span></strong></span><span class='ectt-1200'>;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>seats</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#B00040;'><strong><span class='ectt-1200'>number</span></strong></span><span class='ectt-1200'>;}</span> 
<a id='x1-23015r2'></a><span style='color:#008000;'><strong><span class='ectt-1200'>type</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>MotorBike</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>{</span><span style='color:#008000;'><strong><span class='ectt-1200'>type</span></strong></span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#BA2121;'><span class='ectt-1200'>"motorbike"</span></span><span class='ectt-1200'>,</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>top_speed</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#B00040;'><strong><span class='ectt-1200'>number</span></strong></span><span class='ectt-1200'>;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>wheelieability</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#B00040;'><strong><span class='ectt-1200'>number</span></strong></span><span class='ectt-1200'>;}</span> 
<a id='x1-23017r3'></a><span style='color:#3D7A7A;'><em><span class='ecit-1200'>// Tyypin mahdollisten erilaisten alkioiden määrä: autojen määrä + moottoripyörien määrä -&gt; summatyyppi</span></em></span> 
<a id='x1-23019r4'></a><span style='color:#008000;'><strong><span class='ectt-1200'>type</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>Vehicle</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>Car</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>|</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>MotorBike</span></pre>
<figcaption class='caption'><span class='id'>Code 3.16: </span><span class='content'>Summatyyppi-esimerkki TypeScriptissä. Summatyyppi tulee
siitä, että tyypin osien määrän voi summata keskenään saadakseen
tyypin kokonaisen permutaatioiden määrän.</span></figcaption><!-- tex4ht:label?: x1-23020r16  -->
                                                                         

                                                                         
   </figure>
<p>   Vaikka TypeScriptin tyyppijärjestelmä on vankkarakenteinen, ei se
varmista kaikista monimutkaisimpien tyyppien <a class='glossary' href='#glo_correctness'>oikeellisuutta</a>. Sellaisiin tarvitaan
jokin pohjimmiltaan funktionaalinen ohjelmointikieli, kuten Haskell.
(<a href='#Xholvikari2021category'>40</a>)
   
   </p> 

   <h4 class='subsectionHead' id='kirjastot'><span class='titlemark'>3.5.3   </span> <a id='x1-240003.5.3'></a>Kirjastot</h4>
<p>Funktionaalista ohjelmointia on pyritty pitämään elossa erinäköisin
kirjastoin, joissa hyväksikäytetään kielen ominaisuuksia ja luodaan
kirjastoja, joiden käyttäminen vaatii ohjelmoijalta täysin uuden syntaksin
opettelemista JavaScript syntaksin lisäksi (<a href='#Xramda'>63</a>; <a href='#Xsanctuary'>65</a>; <a href='#Xcrocks'>39</a>; <a href='#Xfpts'>17</a>; <a href='#Xholvikari2021category'>40</a>).
</p> 
<p>   Kokemusten perusteella syntaksierot ovat todella hidastava tekijä.
Ohjelmoijat olettavat ohjelmoivansa TypeScript-projektissa TypeScriptiä.
Tai yleisemmin sanottuna: ohjelmoijat olettavat ohjelmoivansa sitä
ohjelmointikieltä, mitä ohjelmoivat.
</p> 
<p>   Funktionaalisen ohjelmoinnin kirjastoilla halutaan tuoda <a class='glossary' href='#glo_ts'>TypeScript</a>-ekosysteemiin
sitä, mitä siitä puuttuu. Kuitenkin on kirjasto kuinka hyvälaatuinen
tahansa, tulee TypeScriptin tyyppijärjestelmän rajoitteet kuitenkin lopulta
vastaan (<a href='#Xholvikari2021category'>40</a>).
   
   </p> 

   <h4 class='subsectionHead' id='promisetietorakenne-on-miltei-monadi'><span class='titlemark'>3.5.4   </span> <a id='x1-250003.5.4'></a>Promise-tietorakenne on miltei monadi</h4>
<p>JavaScriptissä oleva Promise-tietorakenne toimii miltei kuin monadi, muttei ole
sitä määritelmällisesti matematiikan kategoriateorian mukaan (<a href='#Xstackoverflow_why_monad'>69</a>; <a href='#Xpromises-spec-94'>57</a>).
Tässä luvussa puidaan, miten tämä pääsi tapahtumaan ja mitä
merkitystä sillä edes on, että JavaScriptissä ei ole standardoitua tapaa
luoda monadeja.
</p> 
<p>   JavaScriptin kehitys perustuu vahvasti takaperin yhteensopivuuteen, mikä
estää merkittäviä muutoksia kielen rakenteisiin ilman riskiä rikkoa
olemassa olevia verkkosivuja (<a href='#Xprototype_library_trends'>12</a>). Selaimet eivät voi myöskään tehdä
omin päin rikkovia muutoksia (<a href='#Xagainst_self_closing_tags'>6</a>; <a href='#Xproposal-joint-iteration'>33</a>). Jos vierailee lääkärin vastaanoton
verkkosivulla selvittääkseen aukioloajat, kumpi selain on paras: se, joka
näyttää vastaanoton aukioloajat, vai se, joka ei näytä mitään, koska on
ottanut uuden JavaScript-version käyttöön?
                                                                         

                                                                         
</p> 
<p>   Kuitenkin JavaScript kehittyy. Vuonna 2015 Promise-tietorakenne
lisättiin JavaScriptiin ratkaisemaan callback-funktioiden hallinnan ongelmia
asynkronisessa ohjelmoinnissa (<a href='#Xmdn_promise'>48</a>; <a href='#Xcallbackhell'>15</a>). Promise-tietorakenteen juuret ovat
funktionaalisessa ohjelmoinnissa. Promise-tietorakenne on rakenteeltaan
sellainen, että sen voi kuvata monadina (<a href='#Xpromises-spec-94'>57</a>; <a href='#Xstackoverflow_why_monad'>69</a>).
</p> 
<p>   Kun Promise-tietorakennetta oltiin tuomassa osaksi JavaScriptia,
keskusteltiin, tulisiko JavaScriptin Promise-tietorakenteen noudattaa
<a class='glossary' href='#glo_monad'>monadirakennetta</a> (<a href='#Xpromises-spec-94'>57</a>). Keskustelu jäi tuloksettomaksi, vaikka muutokset
implementointiehdotukseen olisivat olleet pienet monadin sääntöjen
pitämiseksi.
</p> 
<p>   Yksityiskohdat eivät liene merkittäviä, mutta lopputulos on se, ettei
JavaScriptin Promise-tietorakennetta saatu täyttämään kaikkia monadien
sääntöjä.
</p> 
<p>   Mahdollisuus tuoda monadit osaksi JavaScript standardia on todennäköisesti
menetetty (<a href='#Xproposal-joint-iteration'>33</a>; <a href='#Xprototype_library_trends'>12</a>). Ohjelmoijat joutuvat itse valitsemaan, miten luoda ja
käyttää monadeja JavaScriptissä. Jos sekä Array että Promise olisivat
yhtenäisesti monadeja, niiden yhteiskäyttö olisi suoraviivaisempaa, ja uusien
monadien implementointi olisi johdonmukaisempaa suoraan JavaScriptissä
kielen tasolla. Nykytilanne pakottaa ohjelmoijat improvisoimaan.
   </p> 

   <h2 class='chapterHead' id='funktionaalisia-kaytanteita-eifunktionaalisissa-ohjelmointikielissa'><span class='titlemark'> 4</span><br /><a id='x1-260004'></a>Funktionaalisia käytänteitä ei-funktionaalisissa ohjelmointikielissä</h2>
<p>Tässä luvussa pyritään esittämään kaikista oleellisin, mitä
funktionaalisella ohjelmoinnilla voidaan saada aikaan. Teoreettisen perustan ja
kokemusten avulla tuodaan esille, mitä funktionaalinen ohjelmointi on koetusti
parhaimmillaan.
</p> 
<p>   Ajatuksena on, että kun ohjelma on mallinnettu oikein, ei ole suurta
merkitystä, ohjelmoidaanko olio-ohjelmointia, imperatiivista ohjelmointia, vai
funktionaalista ohjelmointia. Olio-ohjelmoinnissa mallinnus saatettaisiin hoitaa
rajapinnoilla (interface). Funktionaalisen ohjelmoinnin tapa mallintaa on
käyttää tyyppejä ja abstrakteja (algebrallisia) tietorakenteita.
</p> 
<p>   Tuodaan ilmi, millaisia käytänteitä voidaan ripotella ohjelmointiin,
vaikka ohjelmointikieli ei varsinaisesti olisi funktionaalinen.
</p> 
<p>   Pyritään herättämään ajatuksia, milloin ja miten funktioita
kannattaa käyttää. Esitetään, kuinka suuressa roolissa ongelmien
mallintaminen on. Kun ongelmien mallit pureskellaan oikeisiin joukkoihin,
saadaan turvallisempaa ohjelmakoodia. Silloin on myös helpompi kirjoittaa
deklaratiivista koodia, joka on funktionaaliselle ohjelmoinnille ominaista.
   
                                                                         

                                                                         
   </p> 

   <h3 class='sectionHead' id='opi-kerran-kayta-kaikkialla'><span class='titlemark'>4.1   </span> <a id='x1-270004.1'></a>Opi kerran, käytä kaikkialla</h3>
<p>Funktionaalinen ohjelmointi kannustaa asioiden uudelleenkäytettävyyteen.
Funktionaalisessa ohjelmoinnissa etsitään yleisiä teemoja ja viedään
toistuvia malleja funktioiksi, jotta voidaan kirjoittaa funktioiden nimiä
syntaksin sijasta.
</p> 
<p>   Esimerkiksi olio-ohjelmoinnissa, tai muuten imperatiivisessa ohjelmoinnissa,
for-silmukalla toteutettavat algoritmit voidaan yleistää funktioiksi (kuva <a href='#ramdajskirjaston-funktioita-listojen-kasittelyyn-ohjelmoinnissa-ramdadocs-kaikki-nama-voitaisiin-korvata-forsilmukoilla-imperatiivisessa-paradigmassa'>6<!-- tex4ht:ref: fig:ramdacmds  --></a>).
Onko helpompaa opetella ääretön määrä funktioita, vai yksi kielirakenne:
for-silmukka?
   </p> 
<figure class='figure' id='x1-27001r6'><span id='ramdajskirjaston-funktioita-listojen-kasittelyyn-ohjelmoinnissa-ramdadocs-kaikki-nama-voitaisiin-korvata-forsilmukoilla-imperatiivisessa-paradigmassa'></span> 

                                                                         

                                                                         

                                                                         

                                                                         
<table class='equation-star'><tr><td>
<!-- l. 25 --><math class='equation' display='block' xmlns='http://www.w3.org/1998/Math/MathML'><mrow>
 <mtable align='axis' class='array' columnlines='none' displaystyle='true' equalcolumns='false' equalrows='false' rowlines='none none none none' style=''> <mtr class='array-row'><mtd class='array-td' columnalign='right'>  <mrow><mo fence='true' form='prefix'></mo><mrow> <mtable align='axis' class='array' displaystyle='true' equalcolumns='false' equalrows='false' rowlines='none none none' style=''> <mtr class='array-row'><mtd class='array-td' columnalign='left'> <mi mathvariant='italic'>𝑓𝑖𝑙𝑡𝑒𝑟</mi><mo class='MathClass-punc' stretchy='false'>,</mo><mi mathvariant='italic'>𝑤𝑖𝑡h𝑜𝑢𝑡</mi><mo class='MathClass-punc' stretchy='false'>,</mo><mi mathvariant='italic'>𝑓𝑖𝑛𝑑</mi><mo class='MathClass-punc' stretchy='false'>,</mo><mi mathvariant='italic'>𝑓𝑖𝑛𝑑𝐼𝑛𝑑𝑒𝑥</mi><mo class='MathClass-punc' stretchy='false'>,</mo><mi mathvariant='italic'>𝑓𝑖𝑛𝑑𝐿𝑎𝑠𝑡</mi><mo class='MathClass-punc' stretchy='false'>,</mo><mi mathvariant='italic'>𝑓𝑖𝑛𝑑𝐿𝑎𝑠𝑡𝐼𝑛𝑑𝑒𝑥</mi> </mtd>
</mtr>  <mtr class='array-row'><mtd class='array-td' columnalign='left'> <mi mathvariant='italic'>𝑚𝑎𝑝</mi><mo class='MathClass-punc' stretchy='false'>,</mo><mi mathvariant='italic'>𝑚𝑎𝑝𝐼𝑛𝑑𝑒𝑥𝑒𝑑</mi><mo class='MathClass-punc' stretchy='false'>,</mo><mi mathvariant='italic'>𝑚𝑎𝑝𝐼𝑛𝑑𝑒𝑥𝑒𝑑𝑅𝑖𝑔h𝑡</mi><mo class='MathClass-punc' stretchy='false'>,</mo><mi mathvariant='italic'>𝑐h𝑎𝑖𝑛</mi><mo class='MathClass-punc' stretchy='false'>,</mo><mi mathvariant='italic'>𝑐𝑜𝑛𝑐𝑎𝑡</mi><mo class='MathClass-punc' stretchy='false'>,</mo><mi mathvariant='italic'>𝑧𝑖𝑝</mi>     </mtd>
</mtr>  <mtr class='array-row'><mtd class='array-td' columnalign='left'> <mi mathvariant='italic'>𝑟𝑒𝑑𝑢𝑐𝑒</mi><mo class='MathClass-punc' stretchy='false'>,</mo><mi mathvariant='italic'>𝑟𝑒𝑑𝑢𝑐𝑒𝑅𝑖𝑔h𝑡</mi><mo class='MathClass-punc' stretchy='false'>,</mo><mi mathvariant='italic'>𝑠𝑐𝑎𝑛</mi><mo class='MathClass-punc' stretchy='false'>,</mo><mi mathvariant='italic'>𝑝𝑎𝑟𝑡𝑖𝑡𝑖𝑜𝑛</mi><mo class='MathClass-punc' stretchy='false'>,</mo><mi mathvariant='italic'>𝑢𝑛𝑖𝑞</mi><mo class='MathClass-punc' stretchy='false'>,</mo><mi mathvariant='italic'>𝑓𝑜𝑟𝐸𝑎𝑐h</mi>         </mtd>
</mtr>  <mtr class='array-row'><mtd class='array-td' columnalign='left'> <mi mathvariant='italic'>𝑠𝑙𝑖𝑐𝑒</mi><mo class='MathClass-punc' stretchy='false'>,</mo><mi mathvariant='italic'>𝑑𝑟𝑜𝑝</mi><mo class='MathClass-punc' stretchy='false'>,</mo><mi mathvariant='italic'>𝑡𝑎𝑘𝑒</mi><mo class='MathClass-punc' stretchy='false'>,</mo><mi mathvariant='italic'>𝑑𝑟𝑜𝑝𝑊h𝑖𝑙𝑒</mi><mo class='MathClass-punc' stretchy='false'>,</mo><mi mathvariant='italic'>𝑡𝑎𝑘𝑒𝑊h𝑖𝑙𝑒</mi><mo class='MathClass-punc' stretchy='false'>,</mo><mi mathvariant='italic'>𝑧𝑖𝑝</mi><mo class='MathClass-punc' stretchy='false'>,</mo><mi mathvariant='italic'>𝑧𝑖𝑝𝑊𝑖𝑡h</mi>        </mtd>
</mtr>  <mtr class='array-row'><mtd class='array-td' columnalign='left'> <mi mathvariant='italic'>𝑎𝑙𝑙</mi><mo class='MathClass-punc' stretchy='false'>,</mo><mi mathvariant='italic'>𝑎𝑛𝑦</mi><mo class='MathClass-punc' stretchy='false'>,</mo><mi mathvariant='italic'>𝑛𝑜𝑛𝑒</mi>                                                    </mtd></mtr><!-- l --></mtable>              </mrow><mo fence='true' form='postfix'>]</mo></mrow><mspace class='quad' width='1em'></mspace><mstyle class='text'><mtext>for loop</mtext></mstyle> </mtd>
</mtr>  <!-- rl --></mtable>
</mrow></math></td></tr></table>
<figcaption class='caption'><span class='id'>Figure 6:                        </span><span class='content'>Ramda.js-kirjaston                        funktioita
listojen käsittelyyn ohjelmoinnissa (<a href='#Xramda_docs'>64</a>). Kaikki nämä voitaisiin korvata
for-silmukoilla imperatiivisessa paradigmassa.</span></figcaption><!-- tex4ht:label?: x1-27001r6  -->
                                                                         

                                                                         
   </figure>
<p>   Nimet ovat syntaksiriippumattomia. Samoja nimiä voi käyttää
ohjelmointikielestä riippumatta. Nimillä voi kuvata oikean maailman
asioita. Siksi voi perustella, että kun tietyn logiikan aina laittaa tietyn
nimen taakse funktioksi, ymmärtää sen aina vaikka ohjelmointikieli
vaihtuisi. Jos muistaa idean, ei implementaation yksityiskohdilla ole
merkitystä.
</p> 
<p>   Jos asia on tarpeeksi monimutkainen ja sen piilottaa nimen taakse,
hyötyarvon määrittäminen voi olla haastavaa. Mitä monimutkaisempaa
asiaa yritetään enkoodata yksittäiseen nimeen, sitä vaikeampaa se on
lukijan ymmärtää, ja myös sitä vaikeampaa sille on löytää
uudelleenkäyttötilanteita. Pienikin nyanssiero funktion implementaatiossa
totuttuun implementaatioon voi mitätöidä opitun hyödyn eri
ympäristöissä.
</p> 
<p>   Yksinkertaisiakin funktioita voi olla vaikea hahmottaa koodista. Mikään ei
pakota ohjelmoijaa nimeämään funktiota samalla tavalla kuin miten sama
funktio on nimetty jossain toisessa projektissa tai ohjelmointikielessä.
Nimeämiskäytänteiden noudattaminen ei kuitenkaan ole helppoa.
Käytänteitä voi olla vaikea löytää, tai niitä voi olla useita (<a href='#Xramda_docs'>64</a>).
</p> 
<p>   Kannattanee käyttää ohjelmointikielen sisäänrakennettuja funktioita,
ja metodeja aina kun mahdollista. Näin voi maksimoida sen, että koodi
ymmärretään. Jos kyse on jostakin projektin sisäisestä kirjastosta, voi olla
hyödyllistä lisätä funktiolle kommentti, jos se tunnetaan muissa
ohjelmointiympäristöissä jollain toisella nimellä.
</p> 
<p>   Jos on kyse jostain toimintaympäristökohtaisesta funktiosta, eikä
perustavanlaatuisesta yleispätevästä funktiosta, on tärkeää, että funktio
nimetään mahdollisimman kuvaavasti. Esimerkiksi sen sijaan, että
nimeää funktion nimellä “processUsers”, voi miettiä, tarvitseeko funktion
kutsupaikoissa ymmärtää enemmän siitä, mitä funktio tekee. Jos
kontekstista on selvää, mitä funktio tekee, nimen voi jättää sellaiseksi
kuin on. Jos konteksti ei avaa toimintaa enemmän, “processUsers” on erittäin
ympäripyöreä nimi.
   
   </p> 

   <h3 class='sectionHead' id='yhdistetyt-funktiot'><span class='titlemark'>4.2   </span> <a id='x1-280004.2'></a>Yhdistetyt funktiot</h3>
<p>Kun funktioita on saatu kasattua työkalupakkiin, niitä voi yhdistellä
erilaisten tarpeiden mukaan. Kerran kirjoitetut funktiot ovat monikäyttöisiä
ja niitä voidaan ketjuttaa keskenään, jolloin monimutkaisemmat operaatiot
                                                                         

                                                                         
rakentuvat valikoiduista palikoista.
</p> 
<p>   Yhdistettyjen funktioiden avulla voidaan saavuttaa korkea taso ohjelmoinnin
joustavuudessa. Ad hoc -funktioiden, eli tilanteeseen nopeasti mukautettujen
funktioiden, kirjoittaminen on vaivatonta, ja niiden lisääminen osaksi
olemassa olevia ketjuja onnistuu helposti. Tämä mahdollistaa nopean
iteroinnin ja mukautumisen uusiin tarpeisiin ilman merkittäviä muutoksia
alkuperäiseen koodiin.
</p> 
<p>   Yhdistetyt funktiot eivät kuitenkaan automaattisesti takaa koodin
luettavuutta. Liiallinen abstraktio voi tehdä koodista vaikeasti seurattavaa,
erityisesti jos funktion yhdisteleminen tuo mukanaan monimutkaisia käsitteitä,
jotka eivät ole suoraan yhteydessä ratkaistavaan ongelmaan. Turha abstraktio
voi johtaa tilanteeseen, jossa koodin toiminnan ymmärtämiseksi täytyy
perehtyä moniin välivaiheisiin ja ylimääräisiin konsepteihin, vaikka
ongelma itsessään olisi yksinkertainen.
</p> 
<p>   Koodiesimerkki <a href='#funktio-muuttaa-listan-kayttajia-sellaisiksi-etta-niita-voidaan-kayttaa-tuloslistoilla-funktio-on-yhdistetty-monesta-funktiosta-kayttamalla-ramdajskirjaston-funktioita-funktiossa-kaytetaan-useita-muita-funktioita-joiden-toiminnan-lukijan-on-tiedettava-tai-arvattava'>4.1<!-- tex4ht:ref: code:js_garbage_pipe  --></a> näyttää tilanteen, jossa Ramda.js-kirjastoa on
käytetty yhdistetyn funktion rakentamiseen. Vaikka funktio toimii, sen
ymmärtämiseen tarvitsee paljon ylimääräistä tietoa.
                                                                         

                                                                         
</p> 
<p id='funktio-muuttaa-listan-kayttajia-sellaisiksi-etta-niita-voidaan-kayttaa-tuloslistoilla-funktio-on-yhdistetty-monesta-funktiosta-kayttamalla-ramdajskirjaston-funktioita-funktiossa-kaytetaan-useita-muita-funktioita-joiden-toiminnan-lukijan-on-tiedettava-tai-arvattava'>   <a id='x1-28031r1'></a></p> 
<figure class='float'>
                                                                         

                                                                         
<pre class='fancyvrb' id='fancyvrb18'><a id='x1-28012r1'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>convertUsersToLeaderboardUsers</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>(users</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#B00040;'><strong><span class='ectt-1200'>Array</span></strong></span><span style='color:#666666;'><span class='ectt-1200'>&lt;</span></span><span class='ectt-1200'>User</span><span style='color:#666666;'><span class='ectt-1200'>&gt;</span></span><span class='ectt-1200'>,</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>anonymizeUsers</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#B00040;'><strong><span class='ectt-1200'>boolean</span></strong></span><span class='ectt-1200'>)</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>R.pipe(</span> 
<a id='x1-28014r2'></a><span style='color:#BABABA;'>     </span><span class='ectt-1200'>R.pick([</span><span style='color:#BA2121;'><span class='ectt-1200'>"userName"</span></span><span class='ectt-1200'>,</span><span style='color:#BABABA;'> </span><span style='color:#BA2121;'><span class='ectt-1200'>"score"</span></span><span class='ectt-1200'>,</span><span style='color:#BABABA;'> </span><span style='color:#BA2121;'><span class='ectt-1200'>"id"</span></span><span class='ectt-1200'>]),</span> 
<a id='x1-28016r3'></a><span style='color:#BABABA;'>     </span><span class='ectt-1200'>R.ifElse(</span> 
<a id='x1-28018r4'></a><span style='color:#BABABA;'>         </span><span class='ectt-1200'>R.always(anonymizeUsers),</span> 
<a id='x1-28020r5'></a><span style='color:#BABABA;'>         </span><span class='ectt-1200'>R.map(R.omit([</span><span style='color:#BA2121;'><span class='ectt-1200'>"userName"</span></span><span class='ectt-1200'>])),</span> 
<a id='x1-28022r6'></a><span style='color:#BABABA;'>         </span><span class='ectt-1200'>R.identity</span> 
<a id='x1-28024r7'></a><span style='color:#BABABA;'>     </span><span class='ectt-1200'>),</span> 
<a id='x1-28026r8'></a><span style='color:#BABABA;'>     </span><span class='ectt-1200'>R.map(R.assoc(</span><span style='color:#BA2121;'><span class='ectt-1200'>"type"</span></span><span class='ectt-1200'>,</span><span style='color:#BABABA;'> </span><span style='color:#BA2121;'><span class='ectt-1200'>"leaderboardUser"</span></span><span class='ectt-1200'>)),</span> 
<a id='x1-28028r9'></a><span style='color:#BABABA;'>     </span><span class='ectt-1200'>R.sortWith([R.descend(R.prop(</span><span style='color:#BA2121;'><span class='ectt-1200'>"score"</span></span><span class='ectt-1200'>))])</span> 
<a id='x1-28030r10'></a><span class='ectt-1200'>)(users)</span></pre>
<figcaption class='caption'><span class='id'>Code  4.1:  </span><span class='content'>Funktio,  muuttaa  listan  käyttäjiä  sellaisiksi,  että  niitä
voidaan käyttää tuloslistoilla. Funktio on yhdistetty monesta funktiosta
käyttämällä Ramda.js-kirjaston funktioita. Funktiossa käytetään
useita  muita  funktioita,  joiden  toiminnan  lukijan  on  tiedettävä  tai
arvattava.</span></figcaption><!-- tex4ht:label?: x1-28031r1  -->
                                                                         

                                                                         
   </figure>
<p>   Sen sijaan esimerkkikoodissa <a href='#toiminnaltaan-sama-funktio-mutta-kaytettyna-on-vain-javascriptin-sisaanrakennettuja-palikoita-useampi-lukija-ymmartaa-funktion-silla-se-ei-kayta-ulkoisia-kirjastoja'>4.2<!-- tex4ht:ref: code:js_legit_pipe  --></a> käytetään vain JavaScriptin
sisäänrakennettuja työkaluja. Funktio on yleisemmin helppo lukea.
Vaikka luettavuus on subjektiivista, ja perustuu pitkälti ohjelmointityylin
tuttavuuteen, on todennäköisempää, että ohjelmoija ymmärtää
JavaScriptin omia Array-metodeja, kuin minkäkin kirjaston funktioita,
vaikka kirjaston funktiot olisikin pyritty kirjoittamaan noudattaen yleisiä
käytänteitä.
                                                                         

                                                                         
</p> 
<p id='toiminnaltaan-sama-funktio-mutta-kaytettyna-on-vain-javascriptin-sisaanrakennettuja-palikoita-useampi-lukija-ymmartaa-funktion-silla-se-ei-kayta-ulkoisia-kirjastoja'>   <a id='x1-28059r2'></a></p> 
<figure class='float'>
                                                                         

                                                                         
<pre class='fancyvrb' id='fancyvrb19'><a id='x1-28042r1'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>convertUsersToLeaderboardUsers</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>(users</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#B00040;'><strong><span class='ectt-1200'>Array</span></strong></span><span style='color:#666666;'><span class='ectt-1200'>&lt;</span></span><span class='ectt-1200'>User</span><span style='color:#666666;'><span class='ectt-1200'>&gt;</span></span><span class='ectt-1200'>,</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>anonymizeUsers</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#B00040;'><strong><span class='ectt-1200'>boolean</span></strong></span><span class='ectt-1200'>)</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>users</span> 
<a id='x1-28044r2'></a><span style='color:#BABABA;'>     </span><span class='ectt-1200'>.map(user</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>({</span> 
<a id='x1-28046r3'></a><span style='color:#BABABA;'>         </span><span style='color:#008000;'><strong><span class='ectt-1200'>type</span></strong></span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#BA2121;'><span class='ectt-1200'>"leaderboardUser"</span></span><span class='ectt-1200'>,</span> 
<a id='x1-28048r4'></a><span style='color:#BABABA;'>         </span><span class='ectt-1200'>userName</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#B00040;'><strong><span class='ectt-1200'>anonymizeUsers</span></strong></span> 
<a id='x1-28050r5'></a><span style='color:#BABABA;'>              </span><span style='color:#666666;'><span class='ectt-1200'>?</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>undefined</span> 
<a id='x1-28052r6'></a><span style='color:#BABABA;'>              </span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#B00040;'><strong><span class='ectt-1200'>user.userName</span></strong></span><span class='ectt-1200'>,</span> 
<a id='x1-28054r7'></a><span style='color:#BABABA;'>         </span><span class='ectt-1200'>score</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#B00040;'><strong><span class='ectt-1200'>user.score</span></strong></span> 
<a id='x1-28056r8'></a><span style='color:#BABABA;'>     </span><span class='ectt-1200'>}))</span> 
<a id='x1-28058r9'></a><span style='color:#BABABA;'>     </span><span class='ectt-1200'>.sort((userA,</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>userB)</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>userB.score</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>-</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>userA.score)</span></pre>
<figcaption class='caption'><span class='id'>Code  4.2:  </span><span class='content'>Toiminnaltaan  sama  funktio,  mutta  käytettynä  on  vain
JavaScriptin sisäänrakennettuja palikoita. Useampi lukija ymmärtää
funktion, sillä se ei käytä ulkoisia kirjastoja.</span></figcaption><!-- tex4ht:label?: x1-28059r2  -->
                                                                         

                                                                         
   </figure>
<p>   On tärkeää, että abstrahoinnin taso pysyy hallittuna, eikä yhdistetty
funktio tuo mukanaan lisämonimutkaisuutta. Abstraktioiden on oltava
perusteltuja ja niiden tulee aidosti parantaa koodin ylläpidettävyyttä ja
uudelleenkäytettävyyttä, eikä vain noudattaa jotain häilyviä teoreettisia
malleja ilman konkreettisia hyötyjä.
</p> 
<p>   Pitää siis pitää mielessä ohjelmointikieli, jossa toimitaan. Säännöt
tulee sopeuttaa ympäristöön. Vaikka funktionaalisessa ohjelmoinnissa
pyritään olla mutatoimatta dataa, tästä ei missään nimessä ole pakko
pitää kiinni kynsin hampain.
   
   </p> 

   <h3 class='sectionHead' id='puhdas-funktio-ei-ole-aina-paras-ratkaisu'><span class='titlemark'>4.3   </span> <a id='x1-290004.3'></a>Puhdas funktio ei ole aina paras ratkaisu</h3>
<p>Funktionaalisessa ohjelmoinnissa pyritään välttämään mutatointia, eli
ajonaikaisten muuttujien arvojen muuttamista. Tietorakenteiden muuttamisen
sijasta pyritään luomaan tietorakenteista uusia kopioita ja jättämään
vanhat ennalleen (<a href='#Ximmutablejs_immutable'>3</a>; <a href='#Xhickey_persistent_2009'>37</a>).
</p> 
<p>   Joissain ohjelmointikielissä, tai ohjelmointikielien kirjastoissa,
muuttumattomien tietorakenteiden käyttäminen on saatu varsin
tehokkaaksi (<a href='#Xhickey_persistent_2009'>37</a>; <a href='#Ximmutablejs_immutable'>3</a>). Näin ei kuitenkaan ole asian laita JavaScriptissä, tai
ohjelmointikielissä yleisesti. Tiedon mutatointi on nopeaa ja kopiointi hidasta
(<a href='#Xturner_trauring_copying_2020'>74</a>). Näin ollen, jos kirjoitetaan funktioita, jotka palauttavat aina uusia
kopioita, vanhojen mutatoimisen sijasta, saadaan usein hidasta ja tehotonta
ohjelmakoodia.
</p> 
<p>   Jossain vaiheessa ohjelman suoritusta tietokoneen bitit kääntyvät
nollista ykkösiin, tai toisin sanoen mutatoituvat (<a href='#Xis_reduce_bad'>18</a>). Niin tietokoneet
toimivat, minkä vuoksi mutaatiota ei saa pelätä, kunhan sen hoitaa
asianmukaisesti.
</p> 
<p>   Jos funktio mutatoi ainoastaan muuttujia, joita se itse luo funktion ajon
ajaksi, ei ole koodin turvallisuuden kannalta toiminnallista merkitystä mitä
funktion sisällä tapahtuu. Kuitenkin tehokkuusvoitot voivat olla huomattavat
versioihin, joissa mutatointia ei harjoiteta, kuten seuraavat esimerkit
osoittavat.
</p> 
<p>   Esimerkkinä on funktio, joka ottaa sisään listan avain-arvo-pareja, ja luo
niistä olion, josta voi hakea arvoja avainten perusteella. Näytetään kaksi
(funktionaalista) tapaa toteuttaa tämä mielivaltainen funktio: versio,
joka ei mutatoi muuttujia missään vaiheessa (koodiesimerkki <a href='#funktio-joka-ottaa-listan-avainarvopareja-ja-luo-niista-olion-olion-luonnissa-ei-kayteta-ollenkaan-mutatointia-funktion-suorittaminen-avainarvoparille-kesti-noin-millisekuntia'>4.3<!-- tex4ht:ref: code:js_just_mutate_immutable  --></a>),
ja versio, joka mutatoi vain itse luomiaan muuttujia (koodiesimerkki
                                                                         

                                                                         
<a href='#sama-funktio-kuin-aiempi-ainoa-ero-etta-pareja-iteroidessa-luotavaa-oliota-mutatoidaan-funktion-suorittaminen-lle-avainarvoparille-kesti-vain-noin-millisekuntia'>4.4<!-- tex4ht:ref: code:js_just_mutate_mutable  --></a>).
</p> 
<p>   Tarkkailijan näkökulmasta molemmat funktiot ovat kuitenkin puhtaita.
                                                                         

                                                                         
</p> 
<p id='funktio-joka-ottaa-listan-avainarvopareja-ja-luo-niista-olion-olion-luonnissa-ei-kayteta-ollenkaan-mutatointia-funktion-suorittaminen-avainarvoparille-kesti-noin-millisekuntia'>   <a id='x1-29043r3'></a></p> 
<figure class='float'>
                                                                         

                                                                         
<pre class='fancyvrb' id='fancyvrb20'><a id='x1-29016r1'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>entries</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span style='color:#008000;'><span class='ectt-1200'>Array</span></span><span class='ectt-1200'>.</span><span style='color:#008000;'><strong><span class='ectt-1200'>from</span></strong></span><span class='ectt-1200'>({</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>length</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>1000</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>},</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>(_,</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>i)</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>[</span> 
<a id='x1-29018r2'></a><span style='color:#BABABA;'>     </span><span style='color:#BA2121;'><span class='tctt-1200'>`</span><span class='ectt-1200'>key-</span></span><span style='color:#A35978;'><strong><span class='ectt-1200'>${</span></strong></span><span class='ectt-1200'>i</span><span style='color:#A35978;'><strong><span class='ectt-1200'>}</span></strong></span><span style='color:#BA2121;'><span class='tctt-1200'>`</span></span><span class='ectt-1200'>,</span> 
<a id='x1-29020r3'></a><span style='color:#BABABA;'>     </span><span style='color:#BA2121;'><span class='tctt-1200'>`</span><span class='ectt-1200'>value-</span></span><span style='color:#A35978;'><strong><span class='ectt-1200'>${</span></strong></span><span class='ectt-1200'>i</span><span style='color:#A35978;'><strong><span class='ectt-1200'>}</span></strong></span><span style='color:#BA2121;'><span class='tctt-1200'>`</span></span> 
<a id='x1-29022r4'></a><span class='ectt-1200'>])</span> 
<a id='x1-29024r5'></a> 
<a id='x1-29026r6'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>objectFromEntries</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>(entries)</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span> 
<a id='x1-29028r7'></a><span style='color:#BABABA;'>     </span><span class='ectt-1200'>entries.reduce((acc,</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>entry)</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>{</span> 
<a id='x1-29030r8'></a><span style='color:#BABABA;'>         </span><span style='color:#008000;'><strong><span class='ectt-1200'>return</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>{</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>...acc,</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>[entry[</span><span style='color:#666666;'><span class='ectt-1200'>0</span></span><span class='ectt-1200'>]]</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>entry[</span><span style='color:#666666;'><span class='ectt-1200'>1</span></span><span class='ectt-1200'>]</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>}</span> 
<a id='x1-29032r9'></a><span style='color:#BABABA;'>     </span><span class='ectt-1200'>},</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>{})</span> 
<a id='x1-29034r10'></a> 
<a id='x1-29036r11'></a><span class='ectt-1200'>console.time(</span><span style='color:#BA2121;'><span class='tctt-1200'>'</span><span class='ectt-1200'>Immutable</span><span class='tctt-1200'>'</span></span><span class='ectt-1200'>)</span> 
<a id='x1-29038r12'></a><span class='ectt-1200'>objectFromEntries(entries)</span> 
<a id='x1-29040r13'></a><span class='ectt-1200'>console.timeEnd(</span><span style='color:#BA2121;'><span class='tctt-1200'>'</span><span class='ectt-1200'>Immutable</span><span class='tctt-1200'>'</span></span><span class='ectt-1200'>)</span> 
<a id='x1-29042r14'></a><span style='color:#3D7A7A;'><em><span class='ecit-1200'>// Immutable: 112.718017578125 ms</span></em></span></pre>
<figcaption class='caption'><span class='id'>Code 4.3: </span><span class='content'>Funktio, joka ottaa listan avain-arvo-pareja ja luo niistä olion.
Olion luonnissa ei käytetä ollenkaan mutatointia Funktion suorittaminen
1000 avain-arvo-parille kesti noin 113 millisekuntia.</span></figcaption><!-- tex4ht:label?: x1-29043r3  -->
                                                                         

                                                                         
   </figure>
<p>   Täysin mutatoimattomalla versiolla kesti luoda tuhannesta avaimesta olio
yli 300 kertaa kauemmin kuin versiolla, joka mutatoi käyttämiään
muuttujia (113 ms ja 0,4 ms).
                                                                         

                                                                         
</p> 
<p id='sama-funktio-kuin-aiempi-ainoa-ero-etta-pareja-iteroidessa-luotavaa-oliota-mutatoidaan-funktion-suorittaminen-lle-avainarvoparille-kesti-vain-noin-millisekuntia'>   <a id='x1-29089r4'></a></p> 
<figure class='float'>
                                                                         

                                                                         
<pre class='fancyvrb' id='fancyvrb21'><a id='x1-29060r1'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>entries</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span style='color:#008000;'><span class='ectt-1200'>Array</span></span><span class='ectt-1200'>.</span><span style='color:#008000;'><strong><span class='ectt-1200'>from</span></strong></span><span class='ectt-1200'>({</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>length</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>1000</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>},</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>(_,</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>i)</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>[</span> 
<a id='x1-29062r2'></a><span style='color:#BABABA;'>     </span><span style='color:#BA2121;'><span class='tctt-1200'>`</span><span class='ectt-1200'>key-</span></span><span style='color:#A35978;'><strong><span class='ectt-1200'>${</span></strong></span><span class='ectt-1200'>i</span><span style='color:#A35978;'><strong><span class='ectt-1200'>}</span></strong></span><span style='color:#BA2121;'><span class='tctt-1200'>`</span></span><span class='ectt-1200'>,</span> 
<a id='x1-29064r3'></a><span style='color:#BABABA;'>     </span><span style='color:#BA2121;'><span class='tctt-1200'>`</span><span class='ectt-1200'>value-</span></span><span style='color:#A35978;'><strong><span class='ectt-1200'>${</span></strong></span><span class='ectt-1200'>i</span><span style='color:#A35978;'><strong><span class='ectt-1200'>}</span></strong></span><span style='color:#BA2121;'><span class='tctt-1200'>`</span></span> 
<a id='x1-29066r4'></a><span class='ectt-1200'>])</span> 
<a id='x1-29068r5'></a> 
<a id='x1-29070r6'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>objectFromEntries</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>(entries)</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span> 
<a id='x1-29072r7'></a><span style='color:#BABABA;'>     </span><span class='ectt-1200'>entries.reduce((acc,</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>entry)</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>{</span> 
<a id='x1-29074r8'></a><span style='color:#BABABA;'>         </span><span class='ectt-1200'>acc[entry[</span><span style='color:#666666;'><span class='ectt-1200'>0</span></span><span class='ectt-1200'>]]</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>entry[</span><span style='color:#666666;'><span class='ectt-1200'>1</span></span><span class='ectt-1200'>]</span> 
<a id='x1-29076r9'></a><span style='color:#BABABA;'>         </span><span style='color:#008000;'><strong><span class='ectt-1200'>return</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>acc</span> 
<a id='x1-29078r10'></a><span style='color:#BABABA;'>     </span><span class='ectt-1200'>},</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>{})</span> 
<a id='x1-29080r11'></a> 
<a id='x1-29082r12'></a><span class='ectt-1200'>console.time(</span><span style='color:#BA2121;'><span class='tctt-1200'>'</span><span class='ectt-1200'>Mutable</span><span class='tctt-1200'>'</span></span><span class='ectt-1200'>)</span> 
<a id='x1-29084r13'></a><span class='ectt-1200'>objectFromEntries(entries)</span> 
<a id='x1-29086r14'></a><span class='ectt-1200'>console.timeEnd(</span><span style='color:#BA2121;'><span class='tctt-1200'>'</span><span class='ectt-1200'>Mutable</span><span class='tctt-1200'>'</span></span><span class='ectt-1200'>)</span> 
<a id='x1-29088r15'></a><span style='color:#3D7A7A;'><em><span class='ecit-1200'>// Mutable: 0.35693359375 ms</span></em></span></pre>
<figcaption class='caption'><span class='id'>Code   4.4:   </span><span class='content'>Sama   funktio   kuin   aiempi.   Ainoa   ero,   että   pareja
iteroidessa luotavaa oliota mutatoidaan. Funktion suorittaminen 1000:lle
avain-arvo-parille kesti vain noin 0,4 millisekuntia.</span></figcaption><!-- tex4ht:label?: x1-29089r4  -->
                                                                         

                                                                         
   </figure>
<p>   Useimmiten ohjelman tehokkuudella ei ole paljoa merkitystä, ja luotettavuus ja
luettavuus on syytä pitää etusijalla. Kuitenkin tässä tilanteessa
tehokkuuserot ovat niin merkittävät, että jos 1 000 avain-arvo-parin
sijasta, olisi käytetty 100 000, tai vaikka 1 000 000 avain-arvo-paria,
mutatoimaton versio ei välttämättä olisi suoriutunut tehtävästä
koskaan. Näitä määriä yritettiin, mutta suoritukset lopetettiin kesken,
kun alkoi näyttämään, ettei tehtävä tosiaan ollut suoriutumassa
koskaan.
   
   </p> 

   <h3 class='sectionHead' id='ongelmien-mallintaminen-lisaa-turvallisuutta'><span class='titlemark'>4.4   </span> <a id='x1-300004.4'></a>Ongelmien mallintaminen lisää turvallisuutta</h3>
<p>Funktionaalinen ohjelmointi mahdollistaa deklaratiivisen ja itsensä selittävän
koodin kirjoittamisen (<a href='#Xms_fp_vs_imperative'>78</a>). Oikeiden nimien löytäminen funktioille tai muille
ohjelmiston osille on vaikeaa, jos ongelma on mallinnettu väärin. Tässä
osiossa käsitellään pragmaattista mallinnusta pala palalta kuvitteelliselle
alustalle.
</p> 
<p>   Käydään läpi valheellisen mallin haitat ja oikean mallin hyödyt.
Staattisen tyyppijärjestelmän avulla oikea malli poistaa ohjelmavirheitä jo
käännösvaiheessa ja vähentää testaustarpeita (<a href='#Ximpossiblebetter'>27</a>).
</p> 
<p>   Oikeellisen mallin avulla koodi on luotettavampaa, ja sen avulla voidaan
poistaa tarpeettomia if-lauseita. Jos mallista poistetaan mahdottomat tilat,
niitä ei tarvitse edes testata (<a href='#Ximpossiblebetter'>27</a>). Seuraavaksi muutetaan virheellinen malli
oikeaksi.
</p> 
<p>   Kuvitellaan, että ollaan rakentamassa rajapintaa verkossa toimivalle
tietovisa-alustalle, jossa tietovisa koostuu useasta monivalintakysymyksestä.
Mallinnus voi alkaa näin.
                                                                         

                                                                         
</p> 
<p id='mahdollinen-lahestymistapa-yksinkertaiselle-tietovisan-mallinnukselle-malli-koostuu-visasta-quiz-ja-se-kysymyksista-question'>   <a id='x1-30034r5'></a></p> 
<figure class='float'>
                                                                         

                                                                         
<pre class='fancyvrb' id='fancyvrb22'><a id='x1-30013r1'></a><span style='color:#008000;'><strong><span class='ectt-1200'>type</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>Question</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>{</span> 
<a id='x1-30015r2'></a><span style='color:#BABABA;'>  </span><span class='ectt-1200'>question</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#B00040;'><strong><span class='ectt-1200'>string</span></strong></span> 
<a id='x1-30017r3'></a><span style='color:#BABABA;'>  </span><span class='ectt-1200'>answers</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#B00040;'><strong><span class='ectt-1200'>Array</span></strong></span><span style='color:#666666;'><span class='ectt-1200'>&lt;</span></span><span style='color:#B00040;'><strong><span class='ectt-1200'>string</span></strong></span><span style='color:#666666;'><span class='ectt-1200'>&gt;</span></span> 
<a id='x1-30019r4'></a><span style='color:#BABABA;'>  </span><span class='ectt-1200'>correctAnswerIndices</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#B00040;'><strong><span class='ectt-1200'>Array</span></strong></span><span style='color:#666666;'><span class='ectt-1200'>&lt;</span></span><span style='color:#B00040;'><strong><span class='ectt-1200'>number</span></strong></span><span style='color:#666666;'><span class='ectt-1200'>&gt;</span></span> 
<a id='x1-30021r5'></a><span class='ectt-1200'>}</span> 
<a id='x1-30023r6'></a> 
<a id='x1-30025r7'></a><span style='color:#008000;'><strong><span class='ectt-1200'>type</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>Quiz</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>{</span> 
<a id='x1-30027r8'></a><span style='color:#BABABA;'>  </span><span class='ectt-1200'>description</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#B00040;'><strong><span class='ectt-1200'>string</span></strong></span> 
<a id='x1-30029r9'></a><span style='color:#BABABA;'>  </span><span class='ectt-1200'>questions</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#B00040;'><strong><span class='ectt-1200'>Array</span></strong></span><span style='color:#666666;'><span class='ectt-1200'>&lt;</span></span><span class='ectt-1200'>Question</span><span style='color:#666666;'><span class='ectt-1200'>&gt;</span></span> 
<a id='x1-30031r10'></a><span class='ectt-1200'>}</span> 
<a id='x1-30033r11'></a></pre>
<figcaption class='caption'><span class='id'>Code       4.5:       </span><span class='content'>Mahdollinen       lähestymistapa       yksinkertaiselle
tietovisan mallinnukselle. Malli koostuu visasta (Quiz) ja se kysymyksistä
(Question).</span></figcaption><!-- tex4ht:label?: x1-30034r5  -->
                                                                         

                                                                         
   </figure>
<p>   Yksinkertaisen tietovisan saisi toimimaan kyseisellä mallilla. Yksi
kysymys tukee jopa montaa oikeaa vastausta. Mallintamisessa on kuitenkin
ongelma. Se valehtelee. Sillä voidaan kuvata tiloja, joiden pitäisi olla
mahdottomia.
</p> 
<p>   <strong><span class='ecbx-1200'>Listat voivat olla tyhjiä.</span></strong> Malli ei pidä huolta, että tietovisassa on
oltava vähintään yksi kysymys. Malli ei pidä myöskään huolta siitä,
että kysymyksillä tulisi olla vähintään yksi vastaus. Tämä johtuu siitä,
että <code class='verb'><span style='color:#008000;'>Array</span></code>-tietorakenne voi olla tyhjä.
</p> 
<p>   Jos mallissa käytetään listaa, mutta se ei kuitenkaan todellisuudessa saisi
olla tyhjä, niin ohjelmoijan on tarkistettava koodissa manuaalisesti, että listan
sisältö on läsnä.
</p> 
<p>   Vastauksena ongelmaan on luoda tyyppi listalle, joka yksiselitteisesti ei voi
olla tyhjä (koodiesimerkki <a href='#mahdollinen-lahestymistapa-yksinkertaiselle-tietovisan-mallinnukselle-tyypissa-on-kaytetty-tyyppimuuttujaa-t-tyyppimuuttuja-tarkoittaa-sita-etta-sen-sijalle-voi-laittaa-minka-tahansa-tyypin-kyse-on-myos-parametrisesta-polymorfista-parametric-polymorphism'>4.6<!-- tex4ht:ref: code:ts_non_empty  --></a>).
                                                                         

                                                                         
</p> 
<p id='mahdollinen-lahestymistapa-yksinkertaiselle-tietovisan-mallinnukselle-tyypissa-on-kaytetty-tyyppimuuttujaa-t-tyyppimuuttuja-tarkoittaa-sita-etta-sen-sijalle-voi-laittaa-minka-tahansa-tyypin-kyse-on-myos-parametrisesta-polymorfista-parametric-polymorphism'>   <a id='x1-30047r6'></a></p> 
<figure class='float'>
                                                                         

                                                                         
<pre class='fancyvrb' id='fancyvrb23'><a id='x1-30040r1'></a><span style='color:#008000;'><strong><span class='ectt-1200'>type</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>NonEmptyArray</span><span style='color:#666666;'><span class='ectt-1200'>&lt;</span></span><span class='ectt-1200'>T</span><span style='color:#666666;'><span class='ectt-1200'>&gt;</span></span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>{</span> 
<a id='x1-30042r2'></a><span style='color:#BABABA;'>     </span><span class='ectt-1200'>first</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#B00040;'><strong><span class='ectt-1200'>T</span></strong></span> 
<a id='x1-30044r3'></a><span style='color:#BABABA;'>     </span><span class='ectt-1200'>rest</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#B00040;'><strong><span class='ectt-1200'>Array</span></strong></span><span style='color:#666666;'><span class='ectt-1200'>&lt;</span></span><span class='ectt-1200'>T</span><span style='color:#666666;'><span class='ectt-1200'>&gt;</span></span> 
<a id='x1-30046r4'></a><span class='ectt-1200'>}</span></pre>
<figcaption class='caption'><span class='id'>Code
4.6: </span><span class='content'>Mahdollinen lähestymistapa yksinkertaiselle tietovisan mallinnukselle.
Tyypissä  on  käytetty  tyyppimuuttujaa  <code><span class='ectt-1200'>T</span></code>.  Tyyppimuuttuja  tarkoittaa
sitä, että sen sijalle voi laittaa minkä tahansa tyypin. Kyse on myös
parametrisestä polymorfista (parametric polymorphism).</span></figcaption><!-- tex4ht:label?: x1-30047r6  -->
                                                                         

                                                                         
   </figure>
<p>   Tyypillä on kenttä <code class='verb'>first</code>, jonka arvon on oltava olemassa, ja kenttä
<code class='verb'>rest</code>, jossa säilytetään listan loput alkiot. Tuon kentän lista taas on
tavallinen <code class='verb'><span style='color:#008000;'>Array</span></code>. Pelkällä tyypin muutoksella voidaan pitää huolta, että
listassa on 0..n sijasta 1..n alkiota.
                                                                         

                                                                         
</p> 
<p id='vaihtoehtoinen-lahestymistapa-tietovisan-mallintamiselle-jossa-kaytetaan-itsemaaritettya-nonemptyarraytyyppia'>   <a id='x1-30078r7'></a></p> 
<figure class='float'>
                                                                         

                                                                         
<pre class='fancyvrb' id='fancyvrb24'><a id='x1-30059r1'></a><span style='color:#008000;'><strong><span class='ectt-1200'>type</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>Question</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>{</span> 
<a id='x1-30061r2'></a><span style='color:#BABABA;'>     </span><span class='ectt-1200'>question</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#B00040;'><strong><span class='ectt-1200'>string</span></strong></span> 
<a id='x1-30063r3'></a><span style='color:#BABABA;'>     </span><span class='ectt-1200'>answers</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#B00040;'><strong><span class='ectt-1200'>NonEmptyArray</span></strong></span><span style='color:#666666;'><span class='ectt-1200'>&lt;</span></span><span style='color:#B00040;'><strong><span class='ectt-1200'>string</span></strong></span><span style='color:#666666;'><span class='ectt-1200'>&gt;</span></span> 
<a id='x1-30065r4'></a><span style='color:#BABABA;'>     </span><span class='ectt-1200'>correctAnswerIndices</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#B00040;'><strong><span class='ectt-1200'>Array</span></strong></span><span style='color:#666666;'><span class='ectt-1200'>&lt;</span></span><span style='color:#B00040;'><strong><span class='ectt-1200'>number</span></strong></span><span style='color:#666666;'><span class='ectt-1200'>&gt;</span></span> 
<a id='x1-30067r5'></a><span class='ectt-1200'>}</span> 
<a id='x1-30069r6'></a> 
<a id='x1-30071r7'></a><span style='color:#008000;'><strong><span class='ectt-1200'>type</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>Quiz</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>{</span> 
<a id='x1-30073r8'></a><span style='color:#BABABA;'>     </span><span class='ectt-1200'>description</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#B00040;'><strong><span class='ectt-1200'>string</span></strong></span> 
<a id='x1-30075r9'></a><span style='color:#BABABA;'>     </span><span class='ectt-1200'>questions</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#B00040;'><strong><span class='ectt-1200'>NonEmptyArray</span></strong></span><span style='color:#666666;'><span class='ectt-1200'>&lt;</span></span><span class='ectt-1200'>Question</span><span style='color:#666666;'><span class='ectt-1200'>&gt;</span></span> 
<a id='x1-30077r10'></a><span class='ectt-1200'>}</span></pre>
<figcaption class='caption'><span class='id'>Code 4.7: </span><span class='content'>Vaihtoehtoinen lähestymistapa tietovisan mallintamiselle, jossa
käytetään itsemääritettyä NonEmptyArray-tyyppiä.</span></figcaption><!-- tex4ht:label?: x1-30078r7  -->
                                                                         

                                                                         
   </figure>
<p>   Nyt tietovisassa on oltava vähintään yksi kysymys (koodiesimerkki
<a href='#vaihtoehtoinen-lahestymistapa-tietovisan-mallintamiselle-jossa-kaytetaan-itsemaaritettya-nonemptyarraytyyppia'>4.7<!-- tex4ht:ref: code:ts_non_empty_quiz  --></a>), ja jokaisella kysymyksellä vähintään yksi vastaus. Kuitenkin
oikeita vastauksia ei ole välttämättä ainuttakaan, sillä kenttä
<code class='verb'>correctAnswerIncides</code> on edelleen tyypiltään <code class='verb'><span style='color:#008000;'>Array</span><span style='color:#666666;'>&lt;</span><span style='color:#B00040;'><strong>number</strong></span><span style='color:#666666;'>&gt;</span></code>.
</p> 
<p>   Staattisella tyyppijärjestelmällä voi pitää huolen, että mallia
seurataan. Tarkastuksia tyhjyydestä ei tarvitse tehdä if-lauseilla. Malli ei
kuitenkaan ole vieläkään täydellinen.
</p> 
<p>   <strong><span class='ecbx-1200'>Kenttien arvot voivat olla mitä tahansa.</span></strong> Mikään ei pidä huolta,
että esimerkiksi kentän <code class='verb'>correctAnswerIncides</code> indeksit ovat <a class='glossary' href='#glo_correctness'>oikeellisia</a>.
Myös kaikki, joissa tyyppinä on <code class='verb'><span style='color:#B00040;'><strong>string</strong></span></code> voivat ottaa vastaan mitä tahansa
merkkijonoja, myös tyhjiä merkkijonoja.
</p> 
<p>   Merkkijonojen validointi TypeScriptin tyyppijärjestelmässä on
kuitenkin hieman vaivalloista, eikä välttämättä tarpeellista. Kenttä
<code class='verb'>correctAnswerIncides</code> on kuitenkin ajatuksena erittäin huono, sillä malli ei
millään tavalla määrittele, miten se liittyy kysymykseen tarkemmin.
Mikään ei estä laittamasta täysin päättömiä numeroita “oikeiksi”
indekseiksi. Korjauskeinona on paras keino: kentän poistaminen.
</p> 
<p>   Kentän voi poistaa kokonaan, jos mallinnusta viedään pidemmälle.
Voidaan sopia, että on olemassa kahdenlaisia vastauksia: oikeita tai vääriä.
Tämä on varsin helppo mallintaa (koodiesimerkki <a href='#oikeille-ja-vaarille-vastauksille-omat-tyypit'>4.8<!-- tex4ht:ref: code:ts_answer_types  --></a>)
                                                                         

                                                                         
</p> 
<p id='oikeille-ja-vaarille-vastauksille-omat-tyypit'>   <a id='x1-30103r8'></a></p> 
<figure class='float'>
                                                                         

                                                                         
<pre class='fancyvrb' id='fancyvrb25'><a id='x1-30088r1'></a><span style='color:#008000;'><strong><span class='ectt-1200'>type</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>CorrectAnswer</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>{</span> 
<a id='x1-30090r2'></a><span style='color:#BABABA;'>     </span><span style='color:#008000;'><strong><span class='ectt-1200'>type</span></strong></span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#BA2121;'><span class='ectt-1200'>"correct"</span></span> 
<a id='x1-30092r3'></a><span style='color:#BABABA;'>     </span><span class='ectt-1200'>answer</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#B00040;'><strong><span class='ectt-1200'>string</span></strong></span> 
<a id='x1-30094r4'></a><span class='ectt-1200'>}</span> 
<a id='x1-30096r5'></a><span style='color:#008000;'><strong><span class='ectt-1200'>type</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>IncorrectAnswer</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>{</span> 
<a id='x1-30098r6'></a><span style='color:#BABABA;'>     </span><span style='color:#008000;'><strong><span class='ectt-1200'>type</span></strong></span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#BA2121;'><span class='ectt-1200'>"incorrect"</span></span> 
<a id='x1-30100r7'></a><span style='color:#BABABA;'>     </span><span class='ectt-1200'>answer</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#B00040;'><strong><span class='ectt-1200'>string</span></strong></span> 
<a id='x1-30102r8'></a><span class='ectt-1200'>}</span></pre>
<figcaption class='caption'><span class='id'>Code 4.8: </span><span class='content'>Oikeille ja väärille vastauksille omat tyypit</span></figcaption><!-- tex4ht:label?: x1-30103r8  -->
                                                                         

                                                                         
   </figure>
<p>   Uusilla tyypeillä voidaan mallintaa kysymyksiä <a class='glossary' href='#glo_correctness'>oikeellisemmin</a>. Voidaan
myös määrittää, että kysymyksellä on oltava vähintään yksi
oikea vastaus, ja nolla tai useampi väärä vastaus (koodiesimerkki
<a href='#kysymykseen-voi-tarkentaa-millaisia-vastauksia-hyvaksytaan'>4.9<!-- tex4ht:ref: code:ts_question_with_explicit_answer_types  --></a>).
                                                                         

                                                                         
</p> 
<p id='kysymykseen-voi-tarkentaa-millaisia-vastauksia-hyvaksytaan'>   <a id='x1-30119r9'></a></p> 
<figure class='float'>
                                                                         

                                                                         
<pre class='fancyvrb' id='fancyvrb26'><a id='x1-30110r1'></a><span style='color:#008000;'><strong><span class='ectt-1200'>type</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>Question</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>{</span> 
<a id='x1-30112r2'></a><span style='color:#BABABA;'>     </span><span class='ectt-1200'>question</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#B00040;'><strong><span class='ectt-1200'>string</span></strong></span> 
<a id='x1-30114r3'></a><span style='color:#BABABA;'>     </span><span class='ectt-1200'>correctAnswers</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#B00040;'><strong><span class='ectt-1200'>NonEmptyArray</span></strong></span><span style='color:#666666;'><span class='ectt-1200'>&lt;</span></span><span class='ectt-1200'>CorrectAnswer</span><span style='color:#666666;'><span class='ectt-1200'>&gt;</span></span> 
<a id='x1-30116r4'></a><span style='color:#BABABA;'>     </span><span class='ectt-1200'>incorrectAnswers</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#B00040;'><strong><span class='ectt-1200'>Array</span></strong></span><span style='color:#666666;'><span class='ectt-1200'>&lt;</span></span><span class='ectt-1200'>IncorrectAnswer</span><span style='color:#666666;'><span class='ectt-1200'>&gt;</span></span> 
<a id='x1-30118r5'></a><span class='ectt-1200'>}</span></pre>
<figcaption class='caption'><span class='id'>Code 4.9: </span><span class='content'>Kysymykseen voi tarkentaa millaisia vastauksia hyväksytään.</span></figcaption><!-- tex4ht:label?: x1-30119r9  -->
                                                                         

                                                                         
   </figure>
<p>   Malli ei enää valehtele. Voi kuitenkin olla, että tulevaisuudessa on tarve
luoda visalle enemmän ominaisuuksia. Voidaan haluta rajoittaa, että
kysymyksessä voi valita vain yhden vaihtoehdon, tai usean. Voidaan esimerkiksi
haluta antaa mahdollisuus antaa vastauksena vapaata tekstiä (<a href='#Ximpossiblebetter'>27</a>). Muita
tarpeita voi olla loputtomasti.
</p> 
<p>   <strong><span class='ecbx-1200'>Voidaan ottaa käyttöön summatyyppejä.</span></strong> Sen sijasta, että
lisättäisiin tyyppeihin uusia kenttiä kuten <code class='verb'>isMultipleAnswerQuestion</code> tai
<code class='verb'>isFreform</code>, voidaan puolestaan luoda jokaiselle fundamentaalisesti erilaiselle
asialle kokonaan oma tyyppinsä, ja yhdistää ne yhdeksi summatyypiksi.
Näin pidetään huolta, että jokaisella asialla voi olla vain kenttiä, jotka
kuuluvat sille.
                                                                         

                                                                         
</p> 
<p id='kysymysten-mallintaminen-summatyypilla-monivalintakysymykselle-yksinkertaiselle-kysymykselle-ja-vapaatekstikentalliselle-kysymykselle-on-jokaiselle-oma-tyyppi-tyypit-on-nostettu-yhteen-summatyyppiin-question'>   <a id='x1-30180r10'></a></p> 
<figure class='float'>
                                                                         

                                                                         
<pre class='fancyvrb' id='fancyvrb27'><a id='x1-30141r1'></a><span style='color:#008000;'><strong><span class='ectt-1200'>type</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>MultipleAnswerQuestion</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>{</span> 
<a id='x1-30143r2'></a><span style='color:#BABABA;'>     </span><span style='color:#008000;'><strong><span class='ectt-1200'>type</span></strong></span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#BA2121;'><span class='ectt-1200'>"multipleAnswerQuestion"</span></span> 
<a id='x1-30145r3'></a><span style='color:#BABABA;'>     </span><span class='ectt-1200'>question</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#B00040;'><strong><span class='ectt-1200'>string</span></strong></span> 
<a id='x1-30147r4'></a><span style='color:#BABABA;'>     </span><span class='ectt-1200'>correctAnswers</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#B00040;'><strong><span class='ectt-1200'>NonEmptyArray</span></strong></span><span style='color:#666666;'><span class='ectt-1200'>&lt;</span></span><span class='ectt-1200'>CorrectAnswer</span><span style='color:#666666;'><span class='ectt-1200'>&gt;</span></span> 
<a id='x1-30149r5'></a><span style='color:#BABABA;'>     </span><span class='ectt-1200'>incorrectAnswers</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#B00040;'><strong><span class='ectt-1200'>Array</span></strong></span><span style='color:#666666;'><span class='ectt-1200'>&lt;</span></span><span class='ectt-1200'>IncorrectAnswer</span><span style='color:#666666;'><span class='ectt-1200'>&gt;</span></span> 
<a id='x1-30151r6'></a><span class='ectt-1200'>}</span> 
<a id='x1-30153r7'></a> 
<a id='x1-30155r8'></a><span style='color:#008000;'><strong><span class='ectt-1200'>type</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>SingleAnswerQuestion</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>{</span> 
<a id='x1-30157r9'></a><span style='color:#BABABA;'>     </span><span style='color:#008000;'><strong><span class='ectt-1200'>type</span></strong></span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#BA2121;'><span class='ectt-1200'>"singleAnswerQuestion"</span></span> 
<a id='x1-30159r10'></a><span style='color:#BABABA;'>     </span><span class='ectt-1200'>question</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#B00040;'><strong><span class='ectt-1200'>string</span></strong></span> 
<a id='x1-30161r11'></a><span style='color:#BABABA;'>     </span><span class='ectt-1200'>correctAnswer</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#B00040;'><strong><span class='ectt-1200'>CorrectAnswer</span></strong></span> 
<a id='x1-30163r12'></a><span style='color:#BABABA;'>     </span><span class='ectt-1200'>incorrectAnswers</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#B00040;'><strong><span class='ectt-1200'>Array</span></strong></span><span style='color:#666666;'><span class='ectt-1200'>&lt;</span></span><span class='ectt-1200'>IncorrectAnswer</span><span style='color:#666666;'><span class='ectt-1200'>&gt;</span></span> 
<a id='x1-30165r13'></a><span class='ectt-1200'>}</span> 
<a id='x1-30167r14'></a> 
<a id='x1-30169r15'></a><span style='color:#008000;'><strong><span class='ectt-1200'>type</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>FreformQuestion</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>{</span> 
<a id='x1-30171r16'></a><span style='color:#BABABA;'>     </span><span style='color:#008000;'><strong><span class='ectt-1200'>type</span></strong></span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#BA2121;'><span class='ectt-1200'>"freformQuestion"</span></span> 
<a id='x1-30173r17'></a><span style='color:#BABABA;'>     </span><span class='ectt-1200'>question</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#B00040;'><strong><span class='ectt-1200'>string</span></strong></span> 
<a id='x1-30175r18'></a><span class='ectt-1200'>}</span> 
<a id='x1-30177r19'></a> 
<a id='x1-30179r20'></a><span style='color:#008000;'><strong><span class='ectt-1200'>type</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>Question</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>MultipleAnswerQuestion</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>|</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>SingleAnswerQuestion</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>|</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>FreformQuestion</span></pre>
<figcaption class='caption'><span class='id'>Code                 4.10:                 </span><span class='content'>Kysymysten                 mallintaminen
summatyypillä. Monivalintakysymykselle, yksinkertaiselle kysymykselle ja
vapaatekstikentälliselle kysymykselle on jokaiselle oma tyyppi. Tyypit on
nostettu yhteen summatyyppiin (Question).</span></figcaption><!-- tex4ht:label?: x1-30180r10  -->
                                                                         

                                                                         
   </figure>
<p>   Kysymysten <code class='verb'>type</code>-kentän perusteella voidaan tarkistaa, millaisesta
kysymyksestä on todella kyse, jonka jälkeen voidaan suorittaa koodia, joka
liittyy vain kyseisen kysymystyypin toimintaan.
</p> 
<p>   Todellisuutta mallintavilla malleilla saadaan luotettavampaa koodia ja
poistetaan turhia if-lauseita. Myös jos mallista poistetaan mahdottomat tilat,
niitä ei tarvitse edes testata.
   
   </p> 

   <h4 class='subsectionHead' id='virheet-mukaan-mallintamiseen'><span class='titlemark'>4.4.1   </span> <a id='x1-310004.4.1'></a>Virheet mukaan mallintamiseen</h4>
<p>Ohjelmissa tapahtuu virheitä. Vaikka pyrittäisiin malleihin, joista on poistettu
mahdottomat tilat, niin ohjelmia ajaessa tullaan silti törmäämään
virheisiin.
</p> 
<p>   Miten on hyvä mallintaa tilanteita, kun virheitä tapahtuu?
</p> 
<p>   Yleisesti imperatiivisissa paradigmoissa virhetilanteissa metodit ja funktiot
palauttavat <code><span class='ectt-1200'>null</span></code>-arvoja, virheitä tai poikkeuksia. Funktionaalisessa
ohjelmoinnissa voidaan käyttää samoja keinoja, mutta useimmin
funktioiden suorituksen räjäyttämisen sijasta funktiot palauttavat
summatyyppejä, tai monadeja, joissa voi olla sisällä joko oikea palautus- tai
virhetyyppi.
</p> 
<p>   TypeScriptissä yksinkertaisimmillaan tämän voi toteuttaa yhdellä
omalla tyypillä (koodiesimerkki <a href='#mahdollisesti-puuttuvan-paluuarvon-malli-maybe-voi-sisaltaa-jonkin-tyypin-tai-arvon-null'>4.11<!-- tex4ht:ref: code:ts_null_sum  --></a>).
                                                                         

                                                                         
</p> 
<p id='mahdollisesti-puuttuvan-paluuarvon-malli-maybe-voi-sisaltaa-jonkin-tyypin-tai-arvon-null'>   <a id='x1-31022r11'></a></p> 
<figure class='float'>
                                                                         

                                                                         
<pre class='fancyvrb' id='fancyvrb28'><a id='x1-31009r1'></a><span style='color:#008000;'><strong><span class='ectt-1200'>type</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>Maybe</span><span style='color:#666666;'><span class='ectt-1200'>&lt;</span></span><span class='ectt-1200'>T</span><span style='color:#666666;'><span class='ectt-1200'>&gt;</span></span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>T</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>|</span></span><span style='color:#BABABA;'> </span><span style='color:#008000;'><strong><span class='ectt-1200'>null</span></strong></span> 
<a id='x1-31011r2'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>mightWorkMightNot</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>()</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>Maybe</span><span style='color:#666666;'><span class='ectt-1200'>&lt;</span></span><span style='color:#B00040;'><strong><span class='ectt-1200'>string</span></strong></span><span style='color:#666666;'><span class='ectt-1200'>&gt;</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>{</span> 
<a id='x1-31013r3'></a><span style='color:#BABABA;'>     </span><span style='color:#008000;'><strong><span class='ectt-1200'>if</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>(</span><span style='color:#008000;'><span class='ectt-1200'>Math</span></span><span class='ectt-1200'>.random()</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>&gt;</span></span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>0.5</span></span><span class='ectt-1200'>)</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>{</span> 
<a id='x1-31015r4'></a><span style='color:#BABABA;'>         </span><span style='color:#008000;'><strong><span class='ectt-1200'>return</span></strong></span><span style='color:#BABABA;'> </span><span style='color:#008000;'><strong><span class='ectt-1200'>null</span></strong></span> 
<a id='x1-31017r5'></a><span style='color:#BABABA;'>     </span><span class='ectt-1200'>}</span> 
<a id='x1-31019r6'></a><span style='color:#BABABA;'>     </span><span style='color:#008000;'><strong><span class='ectt-1200'>return</span></strong></span><span style='color:#BABABA;'> </span><span style='color:#BA2121;'><span class='ectt-1200'>"hello world"</span></span> 
<a id='x1-31021r7'></a><span class='ectt-1200'>}</span></pre>
<figcaption class='caption'><span class='id'>Code   4.11:   </span><span class='content'>Mahdollisesti   puuttuvan   paluuarvon   malli.   Maybe   voi
sisältää jonkin tyypin tai arvon <code><span class='ectt-1200'>null</span></code>.</span></figcaption><!-- tex4ht:label?: x1-31022r11  -->
                                                                         

                                                                         
   </figure>
<p>   Deklaratiivisesti funktio kertoo, että se saattaa palauttaa merkkijonon, tai
saattaa olla palauttamatta. Ehkä se on merkkijono, ehkä se ei ole.
Tyypin käyttäminen on hieman tönkköä, sillä jos funktion oikea
palautusarvo on null, on mahdotonta sanoa, oliko funktiokutsu onnistunut vai
ei.
</p> 
<p>   Tyypin voi viedä pidemmälle, jos arvot kääritään objekteihin.
Vaihdetaan nimi Result-tyypiksi, että tyyppi voi kapseloida myös virheitä.
(koodiesimerkki <a href='#vaihtoehtoinen-malli-mahdollisesti-epaonnistuvalle-paluuarvolle-result-on-joko-success-tai-failure-molemmissa-tapauksissa-arvo-on-kuitenkin-yhden-kentan-objekti-jonka-ansiosta-tyyppiin-voi-tallentaa-nullarvon-ilman-etta-tietoa-menetetaan'>4.12<!-- tex4ht:ref: code:ts_better_result_sum  --></a>.)
                                                                         

                                                                         
</p> 
<p id='vaihtoehtoinen-malli-mahdollisesti-epaonnistuvalle-paluuarvolle-result-on-joko-success-tai-failure-molemmissa-tapauksissa-arvo-on-kuitenkin-yhden-kentan-objekti-jonka-ansiosta-tyyppiin-voi-tallentaa-nullarvon-ilman-etta-tietoa-menetetaan'>   <a id='x1-31053r12'></a></p> 
<figure class='float'>
                                                                         

                                                                         
<pre class='fancyvrb' id='fancyvrb29'><a id='x1-31034r1'></a><span style='color:#008000;'><strong><span class='ectt-1200'>type</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>Success</span><span style='color:#666666;'><span class='ectt-1200'>&lt;</span></span><span class='ectt-1200'>T</span><span style='color:#666666;'><span class='ectt-1200'>&gt;</span></span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>{</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>value</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#B00040;'><strong><span class='ectt-1200'>T</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>}</span> 
<a id='x1-31036r2'></a><span style='color:#008000;'><strong><span class='ectt-1200'>type</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>Failure</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>{</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>error</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#B00040;'><strong><span class='ectt-1200'>Error</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>}</span> 
<a id='x1-31038r3'></a><span style='color:#008000;'><strong><span class='ectt-1200'>type</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>Result</span><span style='color:#666666;'><span class='ectt-1200'>&lt;</span></span><span class='ectt-1200'>T</span><span style='color:#666666;'><span class='ectt-1200'>&gt;</span></span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>Success</span><span style='color:#666666;'><span class='ectt-1200'>&lt;</span></span><span class='ectt-1200'>T</span><span style='color:#666666;'><span class='ectt-1200'>&gt;</span></span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>|</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>Failure</span> 
<a id='x1-31040r4'></a> 
<a id='x1-31042r5'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>mightWorkMightNot</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>()</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>Result</span><span style='color:#666666;'><span class='ectt-1200'>&lt;</span></span><span style='color:#B00040;'><strong><span class='ectt-1200'>string</span></strong></span><span style='color:#666666;'><span class='ectt-1200'>&gt;</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>{</span> 
<a id='x1-31044r6'></a><span style='color:#BABABA;'>     </span><span style='color:#008000;'><strong><span class='ectt-1200'>if</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>(</span><span style='color:#008000;'><span class='ectt-1200'>Math</span></span><span class='ectt-1200'>.random()</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>&gt;</span></span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>0.5</span></span><span class='ectt-1200'>)</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>{</span> 
<a id='x1-31046r7'></a><span style='color:#BABABA;'>         </span><span style='color:#008000;'><strong><span class='ectt-1200'>return</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>{</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>error</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#B00040;'><strong><span class='ectt-1200'>new</span></strong></span><span style='color:#BABABA;'> </span><span style='color:#CC4038;'><strong><span class='ectt-1200'>Error</span></strong></span><span class='ectt-1200'>(</span><span style='color:#BA2121;'><span class='ectt-1200'>"Sorry, bad failure."</span></span><span class='ectt-1200'>)</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>}</span> 
<a id='x1-31048r8'></a><span style='color:#BABABA;'>     </span><span class='ectt-1200'>}</span> 
<a id='x1-31050r9'></a><span style='color:#BABABA;'>     </span><span style='color:#008000;'><strong><span class='ectt-1200'>return</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>{</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>value</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#BA2121;'><span class='ectt-1200'>"hello world"</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>}</span> 
<a id='x1-31052r10'></a><span class='ectt-1200'>}</span></pre>
<figcaption class='caption'><span class='id'>Code                                                                                     4.12:
</span><span class='content'>Vaihtoehtoinen malli mahdollisesti epäonnistuvalle paluuarvolle. Result on
joko Success, tai Failure. Molemmissa tapauksissa arvo on kuitenkin yhden
kentän objekti, jonka ansiosta tyyppiin voi tallentaa <code><span class='ectt-1200'>null</span></code>-arvon ilman,
että tietoa menetetään.</span></figcaption><!-- tex4ht:label?: x1-31053r12  -->
                                                                         

                                                                         
   </figure>
<p>   Näin Result-tyyppi voi sisältää myös arvon <code class='verb'><span style='color:#008000;'><strong>null</strong></span></code>, sillä Result-objektin
tarkan tyypin voi nyt päätellä ilman sitä. Nyt tarkan tyypin voi
määrittää <code class='verb'>value</code>- tai <code class='verb'>error</code>-kentän läsnäolosta tai puutteesta. Näin
rakennettuna tyypille on myös helppo rakentaa apufunktioita, joilla
selvitetään, onko paluuarvo onnistunut, vai ei. Voi myös luoda apufunktiot,
joilla luoda Result-objekteja (koodiesimerkki <a href='#apufunktioita-resulttyypin-tarkastamiseen-ja-luomiseen-typescriptissa'>4.13<!-- tex4ht:ref: code:result_helpers  --></a>).
                                                                         

                                                                         
</p> 
<p id='apufunktioita-resulttyypin-tarkastamiseen-ja-luomiseen-typescriptissa'>   <a id='x1-31078r13'></a></p> 
<figure class='float'>
                                                                         

                                                                         
<pre class='fancyvrb' id='fancyvrb30'><a id='x1-31063r1'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>isFailure</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>&lt;</span></span><span class='ectt-1200'>T</span><span style='color:#666666;'><span class='ectt-1200'>&gt;</span></span><span class='ectt-1200'>(x</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#B00040;'><strong><span class='ectt-1200'>Result</span></strong></span><span style='color:#666666;'><span class='ectt-1200'>&lt;</span></span><span class='ectt-1200'>T</span><span style='color:#666666;'><span class='ectt-1200'>&gt;</span></span><span class='ectt-1200'>)</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>x</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>is</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>Failure</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span> 
<a id='x1-31065r2'></a><span style='color:#BABABA;'>     </span><span style='color:#BA2121;'><span class='ectt-1200'>"error"</span></span><span style='color:#BABABA;'> </span><span style='color:#AB21FF;'><strong><span class='ectt-1200'>in</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>x</span> 
<a id='x1-31067r3'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>isSuccess</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>&lt;</span></span><span class='ectt-1200'>T</span><span style='color:#666666;'><span class='ectt-1200'>&gt;</span></span><span class='ectt-1200'>(x</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#B00040;'><strong><span class='ectt-1200'>Result</span></strong></span><span style='color:#666666;'><span class='ectt-1200'>&lt;</span></span><span class='ectt-1200'>T</span><span style='color:#666666;'><span class='ectt-1200'>&gt;</span></span><span class='ectt-1200'>)</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>x</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>is</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>Success</span><span style='color:#666666;'><span class='ectt-1200'>&lt;</span></span><span class='ectt-1200'>T</span><span style='color:#666666;'><span class='ectt-1200'>&gt;</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span> 
<a id='x1-31069r4'></a><span style='color:#BABABA;'>     </span><span style='color:#666666;'><span class='ectt-1200'>!</span></span><span class='ectt-1200'>isFailure(x)</span> 
<a id='x1-31071r5'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>failureOf</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>(error</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#B00040;'><strong><span class='ectt-1200'>string</span></strong></span><span class='ectt-1200'>)</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>Failure</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span> 
<a id='x1-31073r6'></a><span style='color:#BABABA;'>     </span><span class='ectt-1200'>({</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>error</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#B00040;'><strong><span class='ectt-1200'>new</span></strong></span><span style='color:#BABABA;'> </span><span style='color:#CC4038;'><strong><span class='ectt-1200'>Error</span></strong></span><span class='ectt-1200'>(error)</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>})</span> 
<a id='x1-31075r7'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>successOf</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>&lt;</span></span><span class='ectt-1200'>T</span><span style='color:#666666;'><span class='ectt-1200'>&gt;</span></span><span class='ectt-1200'>(value</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#B00040;'><strong><span class='ectt-1200'>T</span></strong></span><span class='ectt-1200'>)</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>Success</span><span style='color:#666666;'><span class='ectt-1200'>&lt;</span></span><span class='ectt-1200'>T</span><span style='color:#666666;'><span class='ectt-1200'>&gt;</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span> 
<a id='x1-31077r8'></a><span style='color:#BABABA;'>     </span><span class='ectt-1200'>({</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>value</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>})</span></pre>
<figcaption class='caption'><span class='id'>Code  4.13:  </span><span class='content'>Apufunktioita  Result-tyypin  tarkastamiseen  ja  luomiseen
TypeScriptissä.</span></figcaption><!-- tex4ht:label?: x1-31078r13  -->
                                                                         

                                                                         
   </figure>
<p>   Näillä voidaan rakentaa yhdistettyjä funktioita, joissa paluuarvon luonti
ja palauttaminen on eksplisiittistä ja selkeää. Koodiesimerkissä <a href='#esimerkki-yhdistetysta-funktiosta-resulttyypin-kanssa-jokaisen-valifunktion-on-tarkastettava-onko-edellinen-kutsu-onnistunut-vai-ei'>4.14<!-- tex4ht:ref: code:result_pipe_example  --></a>
käsitellään Result-objekteja yhdistetyssä funktiossa. Jokaisessa
yhdisteen funktiossa tarkistetaan, onko aiempi tulos epäonnistunut.
Epäonnistumisen sattuessa virhearvo päästetään suoraan putken
läpi.
                                                                         

                                                                         
</p> 
<p id='esimerkki-yhdistetysta-funktiosta-resulttyypin-kanssa-jokaisen-valifunktion-on-tarkastettava-onko-edellinen-kutsu-onnistunut-vai-ei'>   <a id='x1-31151r14'></a></p> 
<figure class='float'>
                                                                         

                                                                         
<pre class='fancyvrb' id='fancyvrb31'><a id='x1-31104r1'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>helloMaybe</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>()</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>Result</span><span style='color:#666666;'><span class='ectt-1200'>&lt;</span></span><span style='color:#B00040;'><strong><span class='ectt-1200'>string</span></strong></span><span style='color:#666666;'><span class='ectt-1200'>&gt;</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>{</span> 
<a id='x1-31106r2'></a><span style='color:#BABABA;'>     </span><span style='color:#008000;'><strong><span class='ectt-1200'>if</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>(</span><span style='color:#008000;'><span class='ectt-1200'>Math</span></span><span class='ectt-1200'>.random()</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>&gt;</span></span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>0.5</span></span><span class='ectt-1200'>)</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>{</span> 
<a id='x1-31108r3'></a><span style='color:#BABABA;'>         </span><span style='color:#008000;'><strong><span class='ectt-1200'>return</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>failureOf(</span><span style='color:#BA2121;'><span class='ectt-1200'>"Sorry, bad failure."</span></span><span class='ectt-1200'>)</span> 
<a id='x1-31110r4'></a><span style='color:#BABABA;'>     </span><span class='ectt-1200'>}</span> 
<a id='x1-31112r5'></a><span style='color:#BABABA;'>     </span><span style='color:#008000;'><strong><span class='ectt-1200'>return</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>successOf(</span><span style='color:#BA2121;'><span class='ectt-1200'>"hello world"</span></span><span class='ectt-1200'>)</span> 
<a id='x1-31114r6'></a><span class='ectt-1200'>}</span> 
<a id='x1-31116r7'></a> 
<a id='x1-31118r8'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>addExclamation</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>(x</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#B00040;'><strong><span class='ectt-1200'>Result</span></strong></span><span style='color:#666666;'><span class='ectt-1200'>&lt;</span></span><span style='color:#B00040;'><strong><span class='ectt-1200'>string</span></strong></span><span style='color:#666666;'><span class='ectt-1200'>&gt;</span></span><span class='ectt-1200'>)</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>Result</span><span style='color:#666666;'><span class='ectt-1200'>&lt;</span></span><span style='color:#B00040;'><strong><span class='ectt-1200'>string</span></strong></span><span style='color:#666666;'><span class='ectt-1200'>&gt;</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>{</span> 
<a id='x1-31120r9'></a><span style='color:#BABABA;'>     </span><span style='color:#008000;'><strong><span class='ectt-1200'>if</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>(isFailure(x))</span><span style='color:#BABABA;'> </span><span style='color:#008000;'><strong><span class='ectt-1200'>return</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>x</span> 
<a id='x1-31122r10'></a><span style='color:#BABABA;'>     </span><span style='color:#008000;'><strong><span class='ectt-1200'>return</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>successOf(x.value</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>+</span></span><span style='color:#BABABA;'> </span><span style='color:#BA2121;'><span class='ectt-1200'>"!"</span></span><span class='ectt-1200'>)</span> 
<a id='x1-31124r11'></a><span class='ectt-1200'>}</span> 
<a id='x1-31126r12'></a> 
<a id='x1-31128r13'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>toUpperCase</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>(x</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#B00040;'><strong><span class='ectt-1200'>Result</span></strong></span><span style='color:#666666;'><span class='ectt-1200'>&lt;</span></span><span style='color:#B00040;'><strong><span class='ectt-1200'>string</span></strong></span><span style='color:#666666;'><span class='ectt-1200'>&gt;</span></span><span class='ectt-1200'>)</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>Result</span><span style='color:#666666;'><span class='ectt-1200'>&lt;</span></span><span style='color:#B00040;'><strong><span class='ectt-1200'>string</span></strong></span><span style='color:#666666;'><span class='ectt-1200'>&gt;</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>{</span> 
<a id='x1-31130r14'></a><span style='color:#BABABA;'>     </span><span style='color:#008000;'><strong><span class='ectt-1200'>if</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>(isFailure(x))</span><span style='color:#BABABA;'> </span><span style='color:#008000;'><strong><span class='ectt-1200'>return</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>x</span> 
<a id='x1-31132r15'></a><span style='color:#BABABA;'>     </span><span style='color:#008000;'><strong><span class='ectt-1200'>return</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>successOf(x.value.toUpperCase())</span> 
<a id='x1-31134r16'></a><span class='ectt-1200'>}</span> 
<a id='x1-31136r17'></a> 
<a id='x1-31138r18'></a><span class='ectt-1200'>pipe([</span> 
<a id='x1-31140r19'></a><span style='color:#BABABA;'>     </span><span class='ectt-1200'>helloMaybe,</span> 
<a id='x1-31142r20'></a><span style='color:#BABABA;'>     </span><span class='ectt-1200'>addExclamation,</span> 
<a id='x1-31144r21'></a><span style='color:#BABABA;'>     </span><span class='ectt-1200'>toUpperCase</span> 
<a id='x1-31146r22'></a><span class='ectt-1200'>])()</span> 
<a id='x1-31148r23'></a><span style='color:#3D7A7A;'><em><span class='ecit-1200'>// Palauttaa { value : "HELLO WORLD!}</span></em></span> 
<a id='x1-31150r24'></a><span style='color:#3D7A7A;'><em><span class='ecit-1200'>// tai { error: Error("Sorry, bad failure.") }</span></em></span></pre>
<figcaption class='caption'><span class='id'>Code  4.14:  </span><span class='content'>Esimerkki  yhdistetystä  funktiosta  Result-tyypin  kanssa.
Jokaisen välifunktion on tarkastettava, onko edellinen kutsu onnistunut
vai ei.</span></figcaption><!-- tex4ht:label?: x1-31151r14  -->
                                                                         

                                                                         
   </figure>
<p>   Result-tyypin käyttö on selkeää, ja TypeScriptillä on pakko tarkistaa,
onko arvo <code class='verb'>Success</code> vai <code class='verb'>Failure</code>, ennen kuin sen käärittyä arvoa voi
tarkastella tai muokata.
</p> 
<p>   Jos yksikin funktio palauttaa Result-objektin, jossa on virhe, objekti kulkee
muuttumattomana loppujen funktioiden lävitse.
</p> 
<p>   Kuitenkin ongelma on, että tämänkaltaisena Result-tyypin käyttäminen
on loppujen lopuksi vain syntaksisokeroitu null-arvon tarkistus. Ne if-lauseet,
joita aiemmin poistettiin todenmukaisella tyyppimallinnuksella, ovat tulleet
takaisin aina pakollisen virhetarkistamisen muodossa.
</p> 
<p>   Result-tyypillä on kuitenkin jotain, jolla sen voi viedä vielä askelta
pidemmälle. Result-tyypin voi toteuttaa monadina.
   
   </p> 

   <h4 class='subsectionHead' id='resultmonadi'><span class='titlemark'>4.4.2   </span> <a id='x1-320004.4.2'></a>Result-monadi</h4>
<p>Monadi oli suuressa osassa teoriaosuudessa. Jatketaan mahdollisesti
epäonnistuvan ohjelman toteuttamista siten, että siinä on mukana monadisia
periaatteita. Monadia käyttämällä voidaan siirtää virheentarkastuksen
if-lauseet yhteen paikkaan keskitetysti.
</p> 
<p>   Luodaan <code><span class='ectt-1200'>Result</span></code>-monadi (koodiesimerkki <a href='#result-implementoituna-monadiksi-result-monadeja-voi-luoda-staattisella-javascriptresultofmetodilla-ja-monadiin-voi-ketjuttaa-operaatioita-javascriptresultprototypebindmetodilla-jos-ketjutuksessa-monadin-arvo-on-error-niin-ketjutus-lopetetaan-ja-saatu-virhearvo-kuljetetaan-suoraan-lavitse'>4.15<!-- tex4ht:ref: code:result_monad_impl  --></a>).
                                                                         

                                                                         
</p> 
<p id='result-implementoituna-monadiksi-result-monadeja-voi-luoda-staattisella-javascriptresultofmetodilla-ja-monadiin-voi-ketjuttaa-operaatioita-javascriptresultprototypebindmetodilla-jos-ketjutuksessa-monadin-arvo-on-error-niin-ketjutus-lopetetaan-ja-saatu-virhearvo-kuljetetaan-suoraan-lavitse'>   <a id='x1-32064r15'></a></p> 
<figure class='float'>
                                                                         

                                                                         
<pre class='fancyvrb' id='fancyvrb32'><a id='x1-32023r1'></a><span style='color:#008000;'><strong><span class='ectt-1200'>class</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>Result</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>{</span> 
<a id='x1-32025r2'></a><span style='color:#BABABA;'>     </span><span style='color:#008000;'><strong><span class='ectt-1200'>constructor</span></strong></span><span class='ectt-1200'>(x)</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>{</span> 
<a id='x1-32027r3'></a><span style='color:#BABABA;'>         </span><span style='color:#008000;'><strong><span class='ectt-1200'>this</span></strong></span><span class='ectt-1200'>.value</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>x</span> 
<a id='x1-32029r4'></a><span style='color:#BABABA;'>     </span><span class='ectt-1200'>}</span> 
<a id='x1-32031r5'></a><span style='color:#BABABA;'>     </span><span style='color:#008000;'><strong><span class='ectt-1200'>static</span></strong></span><span style='color:#BABABA;'> </span><span style='color:#008000;'><strong><span class='ectt-1200'>of</span></strong></span><span class='ectt-1200'>(x)</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>{</span> 
<a id='x1-32033r6'></a><span style='color:#BABABA;'>         </span><span style='color:#008000;'><strong><span class='ectt-1200'>return</span></strong></span><span style='color:#BABABA;'> </span><span style='color:#AB21FF;'><strong><span class='ectt-1200'>new</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>Result(x)</span> 
<a id='x1-32035r7'></a><span style='color:#BABABA;'>     </span><span class='ectt-1200'>}</span> 
<a id='x1-32037r8'></a><span style='color:#BABABA;'>     </span><span class='ectt-1200'>bind(f)</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>{</span> 
<a id='x1-32039r9'></a><span style='color:#BABABA;'>         </span><span style='color:#008000;'><strong><span class='ectt-1200'>if</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>(</span><span style='color:#008000;'><strong><span class='ectt-1200'>this</span></strong></span><span class='ectt-1200'>.value</span><span style='color:#BABABA;'> </span><span style='color:#AB21FF;'><strong><span class='ectt-1200'>instanceof</span></strong></span><span style='color:#BABABA;'> </span><span style='color:#CC4038;'><strong><span class='ectt-1200'>Error</span></strong></span><span class='ectt-1200'>)</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>{</span> 
<a id='x1-32041r10'></a><span style='color:#BABABA;'>              </span><span style='color:#008000;'><strong><span class='ectt-1200'>return</span></strong></span><span style='color:#BABABA;'> </span><span style='color:#008000;'><strong><span class='ectt-1200'>this</span></strong></span> 
<a id='x1-32043r11'></a><span style='color:#BABABA;'>         </span><span class='ectt-1200'>}</span> 
<a id='x1-32045r12'></a> 
<a id='x1-32047r13'></a><span style='color:#BABABA;'>         </span><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>result</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>f(</span><span style='color:#008000;'><strong><span class='ectt-1200'>this</span></strong></span><span class='ectt-1200'>.value)</span> 
<a id='x1-32049r14'></a> 
<a id='x1-32051r15'></a><span style='color:#BABABA;'>         </span><span style='color:#008000;'><strong><span class='ectt-1200'>if</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>(</span><span style='color:#666666;'><span class='ectt-1200'>!</span></span><span class='ectt-1200'>(result</span><span style='color:#BABABA;'> </span><span style='color:#AB21FF;'><strong><span class='ectt-1200'>instanceof</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>Result))</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>{</span> 
<a id='x1-32053r16'></a><span style='color:#BABABA;'>              </span><span style='color:#008000;'><strong><span class='ectt-1200'>return</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>Result.</span><span style='color:#008000;'><strong><span class='ectt-1200'>of</span></strong></span><span class='ectt-1200'>(result)</span> 
<a id='x1-32055r17'></a><span style='color:#BABABA;'>         </span><span class='ectt-1200'>}</span> 
<a id='x1-32057r18'></a> 
<a id='x1-32059r19'></a><span style='color:#BABABA;'>         </span><span style='color:#008000;'><strong><span class='ectt-1200'>return</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>x</span> 
<a id='x1-32061r20'></a><span style='color:#BABABA;'>     </span><span class='ectt-1200'>}</span> 
<a id='x1-32063r21'></a><span class='ectt-1200'>}</span></pre>
<figcaption class='caption'><span class='id'>Code 4.15: </span><span class='content'>Result implementoituna monadiksi. Result monadeja voi luoda
staattisella  <code class='verb'>Result.<span style='color:#008000;'><strong>of</strong></span></code>-metodilla,  ja  monadiin  voi  ketjuttaa  operaatioita
<code class='verb'>Result.prototype.bind</code>-metodilla.  Jos  ketjutuksessa  monadin  arvo  on
Error,  niin  ketjutus  lopetetaan,  ja  saatu  virhearvo  kuljetetaan  suoraan
lävitse.</span></figcaption><!-- tex4ht:label?: x1-32064r15  -->
                                                                         

                                                                         
   </figure>
<p>   Jos <code><span class='ectt-1200'>Result</span></code>-monadi otetaan käyttöön aiemman osan koodiesimerkkiin,
huomataan luettavan koodin määrän pienentyneen (koodiesimerkki
<a href='#monadisia-operaatioita-ketjutettuna-resultmonadiin-annettavat-funktiot-voivat-palauttaa-kaarimattomia-arvoja-johtuen-resultmonadin-implementaatiosta'>4.16<!-- tex4ht:ref: code:result_monad_example_2  --></a>).
                                                                         

                                                                         
</p> 
<p id='monadisia-operaatioita-ketjutettuna-resultmonadiin-annettavat-funktiot-voivat-palauttaa-kaarimattomia-arvoja-johtuen-resultmonadin-implementaatiosta'>   <a id='x1-32104r16'></a></p> 
<figure class='float'>
                                                                         

                                                                         
<pre class='fancyvrb' id='fancyvrb33'><a id='x1-32079r1'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>helloMaybe</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>()</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#B00040;'><strong><span class='ectt-1200'>string</span></strong></span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>|</span></span><span style='color:#BABABA;'> </span><span style='color:#CC4038;'><strong><span class='ectt-1200'>Error</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span> 
<a id='x1-32081r2'></a><span style='color:#BABABA;'>     </span><span style='color:#008000;'><span class='ectt-1200'>Math</span></span><span class='ectt-1200'>.random()</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>&gt;</span></span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>0.5</span></span> 
<a id='x1-32083r3'></a><span style='color:#BABABA;'>         </span><span style='color:#666666;'><span class='ectt-1200'>?</span></span><span style='color:#BABABA;'> </span><span style='color:#BA2121;'><span class='ectt-1200'>"hello world"</span></span> 
<a id='x1-32085r4'></a><span style='color:#BABABA;'>         </span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#AB21FF;'><strong><span class='ectt-1200'>new</span></strong></span><span style='color:#BABABA;'> </span><span style='color:#CC4038;'><strong><span class='ectt-1200'>Error</span></strong></span><span class='ectt-1200'>(</span><span style='color:#BA2121;'><span class='ectt-1200'>"Sorry, bad failure."</span></span><span class='ectt-1200'>)</span> 
<a id='x1-32087r5'></a> 
<a id='x1-32089r6'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>addExclamation</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>(x</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#B00040;'><strong><span class='ectt-1200'>string</span></strong></span><span class='ectt-1200'>)</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>x</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>+</span></span><span style='color:#BABABA;'> </span><span style='color:#BA2121;'><span class='ectt-1200'>"!"</span></span> 
<a id='x1-32091r7'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>toUpperCase</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>(x</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#B00040;'><strong><span class='ectt-1200'>string</span></strong></span><span class='ectt-1200'>)</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>x.toUpperCase()</span> 
<a id='x1-32093r8'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>reverse</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>(x</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#B00040;'><strong><span class='ectt-1200'>string</span></strong></span><span class='ectt-1200'>)</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>x.split(</span><span style='color:#BA2121;'><span class='ectt-1200'>""</span></span><span class='ectt-1200'>).reverse().join(</span><span style='color:#BA2121;'><span class='ectt-1200'>""</span></span><span class='ectt-1200'>)</span> 
<a id='x1-32095r9'></a> 
<a id='x1-32097r10'></a><span class='ectt-1200'>Result.</span><span style='color:#008000;'><strong><span class='ectt-1200'>of</span></strong></span><span class='ectt-1200'>(helloMaybe())</span> 
<a id='x1-32099r11'></a><span style='color:#BABABA;'> </span><span class='ectt-1200'>.bind(addExclamation)</span> 
<a id='x1-32101r12'></a><span style='color:#BABABA;'> </span><span class='ectt-1200'>.bind(toUpperCase)</span> 
<a id='x1-32103r13'></a><span style='color:#BABABA;'> </span><span class='ectt-1200'>.bind(reverse)</span></pre>
<figcaption class='caption'><span class='id'>Code   4.16:   </span><span class='content'>Monadisia   operaatioita   ketjutettuna   Result-monadiin.
Annettavat funktiot voivat palauttaa käärimättömiä arvoja johtuen
Result-monadin implementaatiosta.</span></figcaption><!-- tex4ht:label?: x1-32104r16  -->
                                                                         

                                                                         
   </figure>
<p>   Jos yksikin monadin funktioketjusta epäonnistuu, suoritus lakkaa ja virhe
palautuu loppuun asti. Arvon voi vetää ulos monadista useilla eri
tavoilla. Implementaation ansiosta tässä yhteydessä arvon voi ottaa ulos
monadista yksinkertaisesti käyttäen <code><span class='ectt-1200'>value</span></code>-kenttää (koodiesimerkki
<a href='#arvon-voi-poistaa-monadin-kontekstista-yksinkertaisesti-hakemalla-javascriptvaluekenttaa'>4.17<!-- tex4ht:ref: code:result_monad_example_3  --></a>)
                                                                         

                                                                         
</p> 
<p id='arvon-voi-poistaa-monadin-kontekstista-yksinkertaisesti-hakemalla-javascriptvaluekenttaa'>   <a id='x1-32123r17'></a></p> 
<figure class='float'>
                                                                         

                                                                         
<pre class='fancyvrb' id='fancyvrb34'><a id='x1-32112r1'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>monad</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>Result.</span><span style='color:#008000;'><strong><span class='ectt-1200'>of</span></strong></span><span class='ectt-1200'>(helloMaybe())</span> 
<a id='x1-32114r2'></a><span style='color:#BABABA;'>     </span><span class='ectt-1200'>.bind(addExclamation)</span> 
<a id='x1-32116r3'></a><span style='color:#BABABA;'>     </span><span class='ectt-1200'>.bind(toUpperCase)</span> 
<a id='x1-32118r4'></a><span style='color:#BABABA;'>     </span><span class='ectt-1200'>.bind(reverse)</span> 
<a id='x1-32120r5'></a><span style='color:#BABABA;'> </span><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>value</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>monad.value</span> 
<a id='x1-32122r6'></a><span style='color:#BABABA;'> </span><span style='color:#3D7A7A;'><em><span class='ecit-1200'>// value on joko "!DLROW OLLEH" tai Error("Sorry, bad failure")</span></em></span></pre>
<figcaption class='caption'><span class='id'>Code  4.17:  </span><span class='content'>Arvon  voi  poistaa  monadin  kontekstista  yksinkertaisesti
hakemalla <code class='verb'>value</code>-kenttää.</span></figcaption><!-- tex4ht:label?: x1-32123r17  -->
                                                                         

                                                                         
   </figure>
<p>   Eri ohjelmointikielissä tai kirjastoissa monadeista arvon ulos saaminen voi
poiketa. Matemaattisessa määritelmässä arvoa ei ole tarkoitus koskaan
saada pois monadista. Esimerkiksi Haskellissa lähtökohtaisesti arvo kuuluu
aina jättää monadinsa kontekstiin, eikä sitä tulisi käsitellä suoraan
(<a href='#Xhaskellallmonad'>34</a>).
</p> 
<p>   Result-monadin luominen ja käyttäminen vaatii ohjelmiston kehittäjiltä
ylimääräistä kontekstia funktionaalisista käsitteistä. Kontekstin
poistamiseksi voidaan käyttää räätälöidyn monadin sijasta JavaScriptin
<code><span class='ectt-1200'>Promise</span></code>-tietorakennetta (koodiesimerkki <a href='#resultmonadiesimerkki-kayttaen-javascriptin-sisaanrakennettua-promisetietorakennetta-toimintaperiaate-vastaa-aiempaa-koodiesimerkkia-eika-vaadi-erillisia-kirjastoja'>4.18<!-- tex4ht:ref: code:result_monad_example_4  --></a>).
                                                                         

                                                                         
</p> 
<p id='resultmonadiesimerkki-kayttaen-javascriptin-sisaanrakennettua-promisetietorakennetta-toimintaperiaate-vastaa-aiempaa-koodiesimerkkia-eika-vaadi-erillisia-kirjastoja'>   <a id='x1-32160r18'></a></p> 
<figure class='float'>
                                                                         

                                                                         
<pre class='fancyvrb' id='fancyvrb35'><a id='x1-32137r1'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>mightSayHello</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span style='color:#008000;'><strong><span class='ectt-1200'>async</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>()</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>{</span> 
<a id='x1-32139r2'></a><span style='color:#BABABA;'>     </span><span style='color:#008000;'><strong><span class='ectt-1200'>if</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>(</span><span style='color:#008000;'><span class='ectt-1200'>Math</span></span><span class='ectt-1200'>.random()</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>&gt;</span></span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>0.5</span></span><span class='ectt-1200'>)</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>{</span> 
<a id='x1-32141r3'></a><span style='color:#BABABA;'>         </span><span style='color:#008000;'><strong><span class='ectt-1200'>throw</span></strong></span><span style='color:#BABABA;'> </span><span style='color:#AB21FF;'><strong><span class='ectt-1200'>new</span></strong></span><span style='color:#BABABA;'> </span><span style='color:#CC4038;'><strong><span class='ectt-1200'>Error</span></strong></span><span class='ectt-1200'>(</span><span style='color:#BA2121;'><span class='ectt-1200'>"Sorry, bad failure"</span></span><span class='ectt-1200'>)</span> 
<a id='x1-32143r4'></a><span style='color:#BABABA;'>     </span><span class='ectt-1200'>}</span> 
<a id='x1-32145r5'></a><span style='color:#BABABA;'>     </span><span style='color:#008000;'><strong><span class='ectt-1200'>return</span></strong></span><span style='color:#BABABA;'> </span><span style='color:#BA2121;'><span class='tctt-1200'>'</span><span class='ectt-1200'>hello world</span><span class='tctt-1200'>'</span></span> 
<a id='x1-32147r6'></a><span class='ectt-1200'>}</span> 
<a id='x1-32149r7'></a> 
<a id='x1-32151r8'></a><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>promise</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span style='color:#008000;'><span class='ectt-1200'>Promise</span></span><span class='ectt-1200'>.resolve(mightSayHello())</span> 
<a id='x1-32153r9'></a><span style='color:#BABABA;'>     </span><span class='ectt-1200'>.then(x</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>x</span><span style='color:#666666;'><span class='ectt-1200'>+</span></span><span style='color:#BA2121;'><span class='ectt-1200'>"!"</span></span><span class='ectt-1200'>)</span> 
<a id='x1-32155r10'></a><span style='color:#BABABA;'>     </span><span class='ectt-1200'>.then(x</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>x.toUpperCase())</span> 
<a id='x1-32157r11'></a><span style='color:#BABABA;'>     </span><span class='ectt-1200'>.then(x</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>=&gt;</span><span style='color:#BABABA;'> </span><span class='ectt-1200'>x.split(</span><span style='color:#BA2121;'><span class='ectt-1200'>""</span></span><span class='ectt-1200'>).reverse().join(</span><span style='color:#BA2121;'><span class='ectt-1200'>""</span></span><span class='ectt-1200'>))</span> 
<a id='x1-32159r12'></a><span style='color:#3D7A7A;'><em><span class='ecit-1200'>//  .catch(x =&gt; x)</span></em></span></pre>
<figcaption class='caption'><span class='id'>Code                          4.18:                          </span><span class='content'>Result-monadi-esimerkki
käyttäen   JavaScriptin   sisäänrakennettua   Promise-tietorakennetta.
Toimintaperiaate vastaa aiempaa koodiesimerkkiä, eikä vaadi erillisiä
kirjastoja.</span></figcaption><!-- tex4ht:label?: x1-32160r18  -->
                                                                         

                                                                         
   </figure>
<p>   <code><span class='ectt-1200'>Promise</span></code>:n käyttäminen Result-monadin sijasta voi selkeyttää
ohjelmakoodin luettavuutta JavaScript-kehittäjille. Toisaalta <code><span class='ectt-1200'>Promise</span></code>:n
käyttäminen esimerkin tavalla tuo turhaa monimutkaisuutta, sillä <code><span class='ectt-1200'>Promise</span></code>:n
luontainen asynkronisuus tuo turhia tehokkuushaittoja, kun operaatiot eivät
muuten olisi asynkronisia (<a href='#Xmdn_promise'>48</a>).
</p> 
<p>   Ohjelmistokehittäjä Jake Archibald suosisi ohjelman kirjoittamista vielä
enemmän JavaScriptin tyylillä (koodiesimerkki <a href='#ohjelmistokehittaja-jake-archibaldin-versio-funktiosta-pennanefpgist-versio-suosii-imperatiivisia-tapoja-toteuttaa-funktio'>4.19<!-- tex4ht:ref: code:archibald_bro  --></a>) (<a href='#Xpennane_fp_gist'>7</a>) .
                                                                         

                                                                         
</p> 
<p id='ohjelmistokehittaja-jake-archibaldin-versio-funktiosta-pennanefpgist-versio-suosii-imperatiivisia-tapoja-toteuttaa-funktio'>   <a id='x1-32176r19'></a></p> 
<figure class='float'>
                                                                         

                                                                         
<pre class='fancyvrb' id='fancyvrb36'><a id='x1-32167r1'></a><span style='color:#008000;'><strong><span class='ectt-1200'>function</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>someWellNamedFunction()</span><span style='color:#666666;'><span class='ectt-1200'>:</span></span><span style='color:#BABABA;'> </span><span style='color:#B00040;'><strong><span class='ectt-1200'>string</span></strong></span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>|</span></span><span style='color:#BABABA;'> </span><span style='color:#008000;'><strong><span class='ectt-1200'>null</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>{</span> 
<a id='x1-32169r2'></a><span style='color:#BABABA;'>     </span><span style='color:#008000;'><strong><span class='ectt-1200'>const</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>result</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>=</span></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>mightSayHello();</span> 
<a id='x1-32171r3'></a><span style='color:#BABABA;'>     </span><span style='color:#008000;'><strong><span class='ectt-1200'>if</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>(result</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>===</span></span><span style='color:#BABABA;'> </span><span style='color:#008000;'><strong><span class='ectt-1200'>null</span></strong></span><span class='ectt-1200'>)</span><span style='color:#BABABA;'> </span><span style='color:#008000;'><strong><span class='ectt-1200'>return</span></strong></span><span class='ectt-1200'>;</span> 
<a id='x1-32173r4'></a><span style='color:#BABABA;'>     </span><span style='color:#008000;'><strong><span class='ectt-1200'>return</span></strong></span><span style='color:#BABABA;'> </span><span class='ectt-1200'>reverse(result</span><span style='color:#BABABA;'> </span><span style='color:#666666;'><span class='ectt-1200'>+</span></span><span style='color:#BABABA;'> </span><span style='color:#BA2121;'><span class='tctt-1200'>'</span><span class='ectt-1200'>!</span><span class='tctt-1200'>'</span></span><span class='ectt-1200'>).toUpperCase();</span> 
<a id='x1-32175r5'></a><span class='ectt-1200'>}</span></pre>
<figcaption class='caption'><span class='id'>Code 4.19: </span><span class='content'>Ohjelmistokehittäjä Jake Archibaldin versio funktiosta (<a href='#Xpennane_fp_gist'>7</a>).
Versio suosii imperatiivisia tapoja toteuttaa funktio.</span></figcaption><!-- tex4ht:label?: x1-32176r19  -->
                                                                         

                                                                         
   </figure>
<p>   Saman asian voi siis toteuttaa monella eri tavalla. On suositeltavaa asettaa
tiukan arvioinnin alle se, mikä versio sopii mihinkin tilanteeseen.
                                                                         

                                                                         
   </p> 

   <h2 class='chapterHead' id='kokemukset'><span class='titlemark'> 5</span><br /><a id='x1-330005'></a>Kokemukset</h2>
<p>Tässä luvussa käsitellään ohjelmointikokemuksia erityisesti funktionaalisen
ja oliopohjaisen ohjelmoinnin näkökulmista. Pohditaan, miten kokemukset,
ohjelmointiparadigmat ja käytetyn kielen ominaisuudet vaikuttavat
luettavuuteen, uudelleenkäytettävyyteen ja tehokkuuteen.
</p> 
<p>   Kokemuksella on suuri rooli siinä, miten ohjelmoija lähestyy näitä
teemoja. Vastaavasti eri ohjelmointiparadigmat — kuten funktionaalinen ja
olio-ohjelmointi — tarjoavat erilaisia työkaluja ja periaatteita, jotka voivat joko
helpottaa tai hankaloittaa näiden tavoitteiden saavuttamista. Ohjelmointikielen
ominaisuudet, kuten Pythonin yksinkertaisuus tai JavaScriptin toiminnalliset
työkalut, voivat myös muokata koodikäytäntöjä ja vaikuttaa siihen,
mikä on optimaalista kussakin tilanteessa.
   
   </p> 

   <h3 class='sectionHead' id='luettavuus'><span class='titlemark'>5.1   </span> <a id='x1-340005.1'></a>Luettavuus</h3>
<p>Puidaan luettavuutta hieman eri näkökulmista. X-alustalla keskusteltiin
entisen Google kehittäjän Jake Archibaldin kanssa, joka suostui vastaamaan
funktionaaliseen ohjelmointiin liittyviin kysymyksiin (<a href='#Xpennane_x_convo'>8</a>).
</p> 
<p>   Yli 20 vuotta JavaScriptia ohjelmoinut Archibald pyrkii ohjelmoimaan
koodia, joka on kuin suoraan ohjelmoinnin alkeita käsittelevästä
oppikirjasta (<a href='#Xis_reduce_bad'>18</a>; <a href='#Xpennane_fp_gist'>7</a>). Hän pyrkii olemaan käyttämättä monimutkaisempia
ohjelmoinnin työkaluja (<a href='#Xis_reduce_bad'>18</a>), kuten esimerkiksi <code><span class='ectt-1200'>Array.prototype.reduce</span></code>,
osittaissoveltaminen (partial application) tai säännölliset lausekkeet (regular
expressions) (<a href='#Xis_reduce_bad'>18</a>; <a href='#Xpennane_x_convo'>8</a>).
</p> 
<p>   Hän suosii for-silmukoiden käyttämistä funktionaalisen <code><span class='ectt-1200'>reduce</span></code>-funktion
sijasta, ja perustelee valintaa luettavuudella (<a href='#Xis_reduce_bad'>18</a>; <a href='#Xpennane_x_convo'>8</a>; <a href='#Xpennane_fp_gist'>7</a>). Yleisesti Archibald
kuitenkin kokee funktionaalisen ohjelmoinnin olevan tuonut positiivisa
vaikutteita JavaScriptiin (<a href='#Xpennane_x_convo'>8</a>). Luettavuuden kannalta merkittävimpiä
tekijöitä ovat keskimääräinen rivin pituus, tunnisteiden määrä per rivi
ja keskimääräinen sulkeiden määrä (<a href='#Xbusereadability'>13</a>, 8). Edsger Dijkstran
mukaan ohjelman luettavuus riippuu suurelta osin sen <a class='glossary' href='#glo_ohjausrakenne'>ohjausrakenteiden</a>
yksinkertaisuudesta (<a href='#Xdijkstra1976discipline'>25</a>). Ohjelmoijat oppivat ensin for-silmukoita, ennen kuin
ymmärtävät, mitä <code><span class='ectt-1200'>reduce</span></code> (tai <code><span class='ectt-1200'>fold</span></code>) tarkoittaa. Kuitenkin tunnisteet ja
rakenteet, jotka ohjelmoija tuntee, ovat henkilökohtaisia ja perustuvat
kokemuksiin sekä opiskelutaustaan.
</p> 
<p>   Myös Pythonin luojana tunnettu Guido van Rossum halusi poistatti
Python 3 versiosta <code><span class='ectt-1200'>reduce</span></code>-funktion, ja perusteli sitä luettavuudella, ja kielen
yksinkertaistamisella (<a href='#Xvanrossum2008reduce'>76</a>).
                                                                         

                                                                         
</p> 
<p>   Voi siis ajatella, että luettavuus on tarpeellista suhteuttaa
työympäristöön. Jos koodikannassa suositaan funktioiden yhdistelemistä,
tätä käytäntöä kannattaa noudattaa. Jos taas for-silmukoita
käytetään mieluummin <code><span class='ectt-1200'>reduce</span></code>-funktion sijasta, ne ovat parempi
valinta.
</p> 
<p>   Kokemuksien mukaan voi olla vaikeaa olla käyttämättä työkaluja,
joiden näkee sopivan tilanteeseen. Kuitenkin kannattanee ottaa askel
taaksepäin ja pitää huolta, että ohjelmakoodi on aina luettavaa tilanteeseen
sopien.
   
   </p> 

   <h3 class='sectionHead' id='uudelleenkaytettavyys'><span class='titlemark'>5.2   </span> <a id='x1-350005.2'></a>Uudelleenkäytettävyys</h3>
<p>Työpaikalla keskusteluissa on näkynyt käytänteitä, että ennen
kuin jotakin tarvitaan kolmesti, ei sille ole kannattavaa kirjoittaa
uudelleenkäytettävää abstraktiota. Toisaalta kehitettäessä ulkoisia
rajapintoja, on tilanne eri, sillä on pidettävä huolta taaksepäin
suuntautuvasta yhteensopivuudesta.
</p> 
<p>   Uudelleenkäytettävien palikoiden löytäminen ei myöskään ole
itsestäänselvyys. On keskusteltu siitä, että kannattaisi välttää logiikan
koostamista, ja toisinaan suosia yksinkertaisuuksia ja kovakoodattua tietoa,
jotta sen etsiminen olisi koodikannasta helpompaa (esimerkiksi käyttämällä
grep-komentorivikomentoa).
</p> 
<p>   Uudelleenkäytettävyyttä voidaan harjoittaa erinäköisillä
koodikäytänteillä, kuten erinäköisin funktionaalisen ohjelmoinnin
periaattein, tai olio-ohjelmoinnin periaattein. Archibaldin mukaan
koodikäytänteet usein epäonnistuvat tehtävässään, kun niissä
yritetään liikaa pysytellä niiden puhtaissa akateemisissa raameissa
(<a href='#Xpennane_fp_gist'>7</a>).
   
   </p> 

   <h3 class='sectionHead' id='tehokkuus'><span class='titlemark'>5.3   </span> <a id='x1-360005.3'></a>Tehokkuus</h3>
<p>Tehokkuutta ei ole suotavaa miettiä liikaa ennen kuin ohjelmoidaan
systeemejä, jotka todella riippuvat siitä. Monet ovat tätä mieltä
(<a href='#Xpennane_fp_gist'>7</a>; <a href='#Xprematureoptimization'>14</a>). Kun tehokkuusongelmat alkavat näkyä, on kokemusten mukaan
todennäköisempää, että yhden ohjelman kriisipesäkkeen (hot spot)
                                                                         

                                                                         
korjaamisella tilanne voidaan korjata, eikä tuhannen sivalluksen kuolema ole
todennäköisin.
</p> 
<p>   Ohjelman tehokkuuteen vaikuttavien asioiden tiedostaminen kuitenkin
ennaltaehkäisee ongelmatilanteita. Esimerkiksi tiedon kopioinnin tai
<code><span class='ectt-1200'>reduce</span></code>-funktion välttämisellä voidaan ajaa proaktiivisesti ohjelmaa
toimivampaan suuntaan.
   </p> 

   <h2 class='chapterHead' id='johtopaatokset-ja-suositukset'><span class='titlemark'> 6</span><br /><a id='x1-370006'></a>Johtopäätökset ja suositukset</h2>
<p>Funktionaalisen ohjelmointi eroaa fundamentaalisesti tavanomaisesti opetetuista
ohjelmointiparadigmoista. Tässä luvussa käydään työn keskeiset
johtopäätökset ja mahdolliset jatkotutkimuskohteet. Johtopäätöksissä
pohditaan funktionaalisen ohjelmoinnin soveltamista perinteisempään
ohjelmointiin painottaen maltillisuutta. Jatkon osalta käsitellään mahdollisia
aihepiirin syventymisalueita, joilla voi rikastuttaa ohjelmoinnin käsityksen
monimuotoisuutta.
   
   </p> 

   <h3 class='sectionHead' id='johtopaatokset'><span class='titlemark'>6.1   </span> <a id='x1-380006.1'></a>Johtopäätökset</h3>
<p>Funktionaalisen ohjelmoinnin periaatteet voidaan integroida perinteisempään
ohjelmointiin. Liiallinen pedanttisuus käsitteitä kohtaan kuitenkin saattaa
johtaa ohjelman ylläpidettävyyden ongelmiin, erityisesti muuttuvan koodin
tuottamisessa asiakaskäyttöön. Ongelmat tulee mallintaa oikein, sillä
tämä vähentää tarpeettomien testausvaiheiden ja if-lauseiden tarvetta.
Hyvin mallinnettuna ohjelmakoodin määrä vähenee ja ylläpidettävyys
paranee.
</p> 
<p>   Akateemiset käsitteet funktionaalisessa ohjelmoinnissa ovat tiukasti
määriteltyjä, mutta niiden noudattaminen ei vaadi pilkuntarkkuutta. Sokeaa
sääntöjen noudattamista ilman perusteltua syytä tulee välttää.
Yhdistetyt funktiot, funktioiden puhtaus, tiedon muuttumattomuus,
algebralliset tietotyypit ja rakenteet ovat toimivia työkaluja ohjelmien
rakentamisessa. Jos ohjelmointikieli ei tue niitä natiivisti, niiden mukaan
ottaminen yleisesti heikentää koodin luettavuutta. On kuitenkin tärkeää
kunnioittaa määritettyjä käytänteitä; kokemusten mukaan
keskinkertaisetkin käytänteet ovat parempia kuin niiden puuttuminen
kokonaan.
</p> 
<p>   On ollut avartavaa huomata, kuinka esimerkiksi <code><span class='ectt-1200'>Promise</span></code> ja <code><span class='ectt-1200'>Array</span></code> ovat
pohjimmiltaan monadirakenteita. Vaikka tämä tieto auttaa ymmärtämään
näiden tietorakenteiden samanlaisuuksia, voi olla hyödyllistä olla tuomatta
                                                                         

                                                                         
tietoa ilmi jokaisessa koodikatselmuksessa. Tiedon konkreettista hyötyä on
vaikea mitata.
   
   </p> 

   <h3 class='sectionHead' id='aihepiirin-syventaminen'><span class='titlemark'>6.2   </span> <a id='x1-390006.2'></a>Aihepiirin syventäminen</h3>
<p>Jatkuva kehitys on ohjelmointialan koettu vaatimus. Kirjallisuus, ohjelmointikielet,
kirjastot, filosofiat ja näiden kaikkien puolesta ja vastaan puhujat eivät tule
loppumaan kesken.
</p> 
<p>   Funktionaalinen ohjelmointi on laaja ja monimuotoinen alue, joka kattaa
teoreettisia käsitteitä ja käytännön sovelluksia. Alan jatkotutkimus voisi
käsittää useita näkökulmia, ohjelmointikieliä ja tunnettujen ohjelmoijien
julkaisuja. Moniulotteinen lähestymistapa on oleellinen, sillä pelkkä
funktionaalisen ohjelmoinnin periaatteiden tutkiminen ei välttämättä riitä
pragmaattisten ohjelmointitaitojen kehittämiseen.
   
   </p> 

   <h4 class='subsectionHead' id='kategoriateoria1'><span class='titlemark'>6.2.1   </span> <a id='x1-400006.2.1'></a>Kategoriateoria</h4>
<p>Kategoriateorian tutkiminen voi syventää ymmärrystä funktionaalisen
ohjelmoinnin periaatteista ja rakenteista. Kategoriateoria auttaa
ymmärtämään funktioiden ja rakenteiden suhteita, mikä on keskeistä
funktionaalisessa ohjelmoinnissa. Tämän ymmärryksen kautta voidaan
saavuttaa tehokkaampia ja elegantimpia koodiratkaisuja, joissa turha toisto
poistuu. Teorian läsnäolon tunnistaminen voi vahvistaa omia näkemyksiä
toimimisesta, vaikka sen käyttö käytännössä ei olisi pakollista. Bartosz
Milewskin kirja ‘Category Theory for Programmers’ vaikuttaa erittäin
lupaavalta tavalta opiskella kategoriateoriaa ohjelmoijan näkökulmasta
(<a href='#Xmilewski2017category'>56</a>).
   
   </p> 

   <h4 class='subsectionHead' id='fantasylandspesifikaatio'><span class='titlemark'>6.2.2   </span> <a id='x1-410006.2.2'></a>Fantasyland-spesifikaatio</h4>
<p>Fantasyland-spesifikaatio on joukko sääntöjä algebrallisten rakenteiden,
kuten monadien ja funktioiden, yhdistämiseksi JavaScriptissä (<a href='#Xfantasy-land_contributors'>30</a>). Se
perustuu kategoriateoriaan ja määrittelee, miten funktiot ja rakenteet
                                                                         

                                                                         
vuorovaikuttavat, parantaen niiden yhteensopivuutta. Spesifikaatio sisältää
esimerkiksi monadien <code><span class='ectt-1200'>of</span></code> ja <code><span class='ectt-1200'>bind</span></code> -operaatioiden säännöt. Fantasyland on
erittäin teoreettinen ja määritelmällisesti tiukka, mikä kannustaa
pedanttiseen funktionaaliseen ohjelmointiin, eroten tämän opinnäytetyön
filosofiasta.
   
   </p> 

   <h4 class='subsectionHead' id='fptskirjasto'><span class='titlemark'>6.2.3   </span> <a id='x1-420006.2.3'></a>Fp-ts-kirjasto</h4>
<p>Fp-ts-kirjasto auttaa puhtaan funktionaalisen ohjelmoinnin ymmärtämisessä
TypeScript-ympäristössä. Kirjaston syntaksi poikkeaa perinteisestä
TypeScript-koodista merkittävästi. Se on kuitenkin yksi parhaista
vaihtoehdoista puhtaan funktionaalisen ohjelmoinnin opiskeluun suoraan
TypeScriptissä (<a href='#Xholvikari2021category'>40</a>).
   
   </p> 

   <h4 class='subsectionHead' id='eri-ohjelmointikielet'><span class='titlemark'>6.2.4   </span> <a id='x1-430006.2.4'></a>Eri ohjelmointikielet</h4>
<p>Eri ohjelmointikielet tarjoavat uusia näkökulmia funktionaaliseen
ohjelmointiin. Haskellin tiukka tyyppijärjestelmä, pohja kategoriateoriassa,
ja puhtaat funktiot opettavat funktionaalisen ohjelmoinnin keskeisiä
periaatteita puhtaasti (<a href='#Xhaskellallmonad'>34</a>; <a href='#Xhaskellcomposition'>36</a>; <a href='#Xhaskellmonadlaws'>35</a>). Elixir yhdistää funktionaalisuuden ja
ohjelman suorituksen rinnakkaisuuden, mikä auttaa ymmärtämään
tehokasta moniydinkäsittelyä (<a href='#Xelixir'>1</a>). Go-ohjelmointikielen opiskelu voisi
myös muuttaa merkittävästi ajattelua ohjelmoinnista (<a href='#Xgolang'>2</a>). Go ei ole
funktionaalinen ohjelmointikieli, vaikka se tukee joitain funktionaalisen
ohjelmoinnin käsitteitä, kuten <a class='glossary' href='#glo_higher_order_function'>korkeamman asteen funktioita</a>. Go:n
käytännönläheisyys osoittaa, miten funktionaalisia periaatteita voi soveltaa
tai jättää soveltamatta (<a href='#Xgolang'>2</a>).
   
   </p> 

   <h4 class='subsectionHead' id='tunnetut-ohjelmistokehittajat'><span class='titlemark'>6.2.5   </span> <a id='x1-440006.2.5'></a>Tunnetut ohjelmistokehittäjät</h4>
<p>Funktionaalisen ohjelmoinnin ymmärtäminen vaatii monipuolista näkökulmaa
eri lähteistä. Eri ohjelmistokehittäjien työ tarjoaa arvokkaita esimerkkejä
ja oivalluksia, jotka rikastuttavat ymmärrystä funktionaalisten periaatteiden
                                                                         

                                                                         
soveltamisesta ohjelmistokehityksessä.
</p> 
<p>   Esimerkiksi Rich Hickey (Clojure-kielen kehittäjä) on tunnettu
hyvin artikuloiduista ja mielekkäistä puheistaan ohjelmointifilosofioista
funktionaaliseen ohjelmointiin liittyen (<a href='#Xhickey_maybe_not'>38</a>; <a href='#Xhickey_persistent_2009'>37</a>). Jake Archibald on ylläpitänyt
HTTP 203 -sarjaa, nykyään Off the Main Thread -podcastia, sekä
pragmaattista blogia, joissa hän käsittelee web-teknologioita vankalla
kokemuksella (<a href='#Xagainst_self_closing_tags'>6</a>; <a href='#Xis_reduce_bad'>18</a>). Richard Feldman, tunnettu Elm-kielen puolestapuhuja, on
osallistunut keskusteluihin funktionaalisesta ohjelmoinnista ja pitänyt
puheita sen periaatteista. Hän korostaa ennustettavuutta ja virheiden
vähentämistä, erityisesti käyttöliittymäkehityksessä (<a href='#Xfeldman_fp_pragmatists'>28</a>; <a href='#Ximpossiblebetter'>27</a>; <a href='#Xstackoverflow_why_monad'>69</a>).
</p> 
<p>   Opiskelemalla esimerkiksi näiden kehittäjien töitä löytyy arvokkaita
oivalluksia ohjelmistokehitykseen niin funktionaalisen ohjelmoinnin, kuin muun
ohjelmoinnin puolelta. Heitä yhdistää pragmaattisuus: ei turhaa teoriaa
ilman käytäntöön perustuvaa perustelua.
                                                                         

                                                                         
   </p> 

   <h2 class='chapterHead' id='yhteenveto'><span class='titlemark'> 7</span><br /><a id='x1-450007'></a>Yhteenveto</h2>
<p>Psykologi Kurt Lewin teki tunnetuksi sanonnan ‘mikään ei ole niin
käytännöllistä kuin hyvä teoria’ (<a href='#Xpracticaltheory'>10</a>). Tämä näkyy funktionaalisessa
ohjelmoinnissa sekä hyvässä että pahassa: funktionaalisilla käsitteillä
voidaan rakentaa teoreettisesti tehokkaita, luotettavia ja kompakteja
ohjelmia, mutta sokea teorian seuraaminen johtaa tehokkuushaittoihin,
luettavuusongelmiin ja liian nopeaan abstrahointiin.
</p> 
<p>   Ohjelmien mallinnuksessa teoreettisuus ja funktionaalisen ohjelmoinnin
deklaratiivisuus on hyödylllistä. Mallit, jotka eivät valehtele, vähentävät
ylläpidettävän koodin määrää ja testaamisen tarvetta. Mallintamista
voidaan viedä pidemmälle rakenteilla kuten monadeilla, jolloin mallin ja
toteutuksen raja hämärtyy.
</p> 
<p>   Työn alkuvaiheessa olin vakuuttunut funktionaalisen ohjelmoinnin
merkittävistä eduista. Nyt kokemukset vievät suuntaan, jossa funktionaalinen
ohjelmointi näyttäytyy pikemminkin epäsuorana voittona. Kuvainnollisesti
sanottuna kaikukammion seinä on räjäytetty.
</p> 
<p>   Ohjelmointia tehdään yhteistyössä, joten yhteisiä käytäntöjä on
syytä noudattaa. Funktionaalisen ohjelmoinnin käsitteet ja käytänteet ovat
ilmaisuvoimaisia ja ennustettavia, mutta myös erittäin teoreettisia ja tiukkoja,
mikä vaatii opiskelua ja perustelua.
</p> 
<p>   Löydettiin käytänteitä, joita on luonteva ottaa käyttöön tuleviin
projekteihin, ja käytänteitä, joiden käyttöä kannattaa harkita
tarkasti. Tutkimuksen lähteissä funktionaalisen ohjelmoinnin hyödyt
ilmenivät parhaiten alunperin funktionaalisissa ohjelmointikielissä.
Kunkin kielen ominaisuudet vaikuttavat merkittävästi siihen, kuinka
tehokkaasti ja sujuvasti funktionaalisia periaatteita voidaan soveltaa.
</p> 
<section class='thebibliography' id='lahteet1' role='doc-bibliography'>
   <h2 class='likechapterHead' id='lahteet'><a id='x1-46000'></a>Lähteet</h2>
<a id='Q1-1-89'></a>
     <dl><dt>
<a id='Xelixir'></a>[1]  </dt><dd>The elixir programming language. URL: <a class='url' href='https://elixir-lang.org/'><span class='ectt-1200'>https://elixir-lang.org/</span></a>.
     </dd><dt>
<a id='Xgolang'></a>[2]  </dt><dd>The go programming language. URL: <a class='url' href='https://go.dev/'><span class='ectt-1200'>https://go.dev/</span></a>.
     </dd><dt>
<a id='Ximmutablejs_immutable'></a>[3]  </dt><dd>Immutable.js. URL: <a class='url' href='https://immutable-js.com/'><span class='ectt-1200'>https://immutable-js.com/</span></a>.
                                                                         

                                                                         
     </dd><dt>
<a id='Xtypsecript_website'></a>[4]  </dt><dd>Typescript:    Javascript    with    syntax    for    types.          URL:
     <a class='url' href='https://www.typescriptlang.org/'><span class='ectt-1200'>https://www.typescriptlang.org/</span></a>.
     </dd><dt>
<a id='Xstackoverflow_js_array_monad'></a>[5]  </dt><dd>Are   arrays   monads   in   modern   javascript?,   2021.        URL:
     <a class='url' href='https://stackoverflow.com/questions/65905682/are-arrays-monads-in-modern-javascript'><span class='ectt-1200'>https://stackoverflow.com/questions/65905682/are-arrays-monads-in-modern-javascript</span></a>.
     </dd><dt>
<a id='Xagainst_self_closing_tags'></a>[6]  </dt><dd>Jake Archibald. The case against self-closing tags in html, 2023. URL:
     <a class='url' href='https://jakearchibald.com/2023/against-self-closing-tags-in-html/'><span class='ectt-1200'>https://jakearchibald.com/2023/against-self-closing-tags-in-html/</span></a>.
     </dd><dt>
<a id='Xpennane_fp_gist'></a>[7]  </dt><dd>Jake  Archibald  and  Arttu  Pennanen,  10  2024.   Keskustelu.   URL:
     <a class='url' href='https://gist.github.com/pennane/dd0bf878bf9cb1371f8c2916fb35c01e'><span class='ectt-1200'>https://gist.github.com/pennane/dd0bf878bf9cb1371f8c2916fb35c01e</span></a>.
     </dd><dt>
<a id='Xpennane_x_convo'></a>[8]  </dt><dd>Jake Archibald and Arttu Pennanen, 10 2024. Keskustelu.
     </dd><dt>
<a id='XBeck2003'></a>[9]  </dt><dd>Jonathan Mock Beck.   Triples, algebras and cohomology.   <span class='ecti-1200'>Reprints
     in  Theory  and  Applications  of  Categories</span>,  (2):1–59,  2003.    URL:
     <a class='url' href='http://www.tac.mta.ca/tac/reprints/articles/2/tr2abs.html'><span class='ectt-1200'>http://www.tac.mta.ca/tac/reprints/articles/2/tr2abs.html</span></a>.
     </dd><dt>
<a id='Xpracticaltheory'></a>[10] </dt><dd>Arthur G.  Bedeian.    A  note  on  the  aphorism  “there  is  nothing
     as  practical  as  a  good  theory”.   <span class='ecti-1200'>Journal  of  Management  History</span>,
     22:236–242, 04 2016. <a href='https://doi.org/10.1108/JMH-01-2016-0004'><span class='path'><span class='ectt-1200'>doi:10.1108/JMH-01-2016-0004</span></span></a>.
     </dd><dt>
<a id='XBlellochHarper2015'></a>[11] </dt><dd>Guy E.                                 Blelloch                                 and
     Robert Harper. Lambda-calculus: The other turing machine, 10 2015.
     URL: <a class='url' href='https://www.cs.cmu.edu/~rwh/talks/cs50talk.pdf'><span class='ectt-1200'>https://www.cs.cmu.edu/~rwh/talks/cs50talk.pdf</span></a>.
     </dd><dt>
<a id='Xprototype_library_trends'></a>[12] </dt><dd>BuiltWith. Prototype javascript framework usage trends, 2024. URL:
     <a class='url' href='https://trends.builtwith.com/javascript/Prototype'><span class='ectt-1200'>https://trends.builtwith.com/javascript/Prototype</span></a>.
     </dd><dt>
<a id='Xbusereadability'></a>[13] </dt><dd>Raymond P.L.  Buse  and  Westley R.  Weimer.    Learning  a  metric
     for  code  readability.   <span class='ecti-1200'>IEEE  Transactions  on  Software  Engineering</span>,
     36(4):546–558, 2010. <a href='https://doi.org/10.1109/TSE.2009.70'><span class='path'><span class='ectt-1200'>doi:10.1109/TSE.2009.70</span></span></a>.
                                                                         

                                                                         
     </dd><dt>
<a id='Xprematureoptimization'></a>[14] </dt><dd>C2    Wiki.           Premature    optimization,    2024.           URL:
     <a class='url' href='https://wiki.c2.com/?PrematureOptimization'><span class='ectt-1200'>https://wiki.c2.com/?PrematureOptimization</span></a>.
     </dd><dt>
<a id='Xcallbackhell'></a>[15] </dt><dd>CallBackHell. Callback hell. URL: <a class='url' href='http://callbackhell.com/'><span class='ectt-1200'>http://callbackhell.com/</span></a>.
     </dd><dt>
<a id='Xcantarella_fp_haitat'></a>[16] </dt><dd>Toni  Cantarella.   Funktionaalisen  ohjelmoinnin  hyödyt  ja  haitat.
     Opinnäytetyö.   Karelia-ammattikorkeakoulu.   Theseus-tietokanta,
     2024.
     </dd><dt>
<a id='Xfpts'></a>[17] </dt><dd>Giulio   Canti.       fp-ts,   2024.       GitHub   repositorio.       URL:
     <a class='url' href='https://github.com/gcanti/fp-ts'><span class='ectt-1200'>https://github.com/gcanti/fp-ts</span></a>.
     </dd><dt>
<a id='Xis_reduce_bad'></a>[18] </dt><dd>Chrome for Developers.  Is reduce() bad? - http 203, 1 2020.  Video.
     URL: <a class='url' href='https://www.youtube.com/watch?v=qaGjS7-qWzg'><span class='ectt-1200'>https://www.youtube.com/watch?v=qaGjS7-qWzg</span></a>.
     </dd><dt>
<a id='Xokhravi-g-discussion'></a>[19] </dt><dd>Clingonboy     et al.            Poor     question,     2020.            URL:
     <a class='url' href='https://github.com/chrokh/fp-games/issues/6'><span class='ectt-1200'>https://github.com/chrokh/fp-games/issues/6</span></a>.
     </dd><dt>
<a id='Xdear_functional_bros'></a>[20] </dt><dd>CodeAesthetic.    Dear  functional  bros,  12  2023.    Video.    URL:
     <a class='url' href='https://www.youtube.com/watch?v=nuML9SmdbJ4'><span class='ectt-1200'>https://www.youtube.com/watch?v=nuML9SmdbJ4</span></a>.
     </dd><dt>
<a id='Xcomputerphile_lambda'></a>[21] </dt><dd>Computerphile.       Lambda   calculus,   2017.       Video.       URL:
     <a class='url' href='https://www.youtube.com/watch?v=eis11j_iGMs'><span class='ectt-1200'>https://www.youtube.com/watch?v=eis11j_iGMs</span></a>.
     </dd><dt>
<a id='Xcomputerphile_monad'></a>[22] </dt><dd>Computerphile.       Lambda   calculus,   2017.       Video.       URL:
     <a class='url' href='https://www.youtube.com/watch?v=t1e8gqXLbsU'><span class='ectt-1200'>https://www.youtube.com/watch?v=t1e8gqXLbsU</span></a>.
     </dd><dt>
<a id='Xwhyprefercompose'></a>[23] </dt><dd>Kristian Dalgård et al. Why prefer compose over pipe?, 2 2016. URL:
     <a class='url' href='https://github.com/ramda/ramda/issues/1642'><span class='ectt-1200'>https://github.com/ramda/ramda/issues/1642</span></a>.
     </dd><dt>
<a id='Xdijkstra_humble_programmer'></a>[24] </dt><dd>Edsger W.  Dijkstra.   The  humble  programmer.   <span class='ecti-1200'>Commun.  ACM</span>,
     15(10):859–866, 10 1972. <a href='https://doi.org/10.1145/355604.361591'><span class='path'><span class='ectt-1200'>doi:10.1145/355604.361591</span></span></a>.
                                                                         

                                                                         
     </dd><dt>
<a id='Xdijkstra1976discipline'></a>[25] </dt><dd>Edsger W. Dijkstra. <span class='ecti-1200'>A Discipline of Programming</span>. Prentice Hall PTR,
     1976.
     </dd><dt>
<a id='Xecma_spec'></a>[26] </dt><dd>Ecma International.  Ecma-262, 15th edition, june 2024 ecmascript®
     2024      language      specification,      6      2024.                 URL:
     <a class='url' href='https://262.ecma-international.org/'><span class='ectt-1200'>https://262.ecma-international.org/</span></a>.
     </dd><dt>
<a id='Ximpossiblebetter'></a>[27] </dt><dd>Richard Feldman.  Making impossible states impossible, 2016.  Video.
     URL: <a class='url' href='https://www.youtube.com/watch?v=IcgmSRJHu_8'><span class='ectt-1200'>https://www.youtube.com/watch?v=IcgmSRJHu_8</span></a>.
     </dd><dt>
<a id='Xfeldman_fp_pragmatists'></a>[28] </dt><dd>Richard  Feldman.   Functional  programming  for  pragmatists,  2021.
     Video. URL: <a class='url' href='https://www.youtube.com/watch?v=3n17wHe5wEw'><span class='ectt-1200'>https://www.youtube.com/watch?v=3n17wHe5wEw</span></a>.
     </dd><dt>
<a id='Xgartnerb2b'></a>[29] </dt><dd>Gartner.              Gartner     Predicts     65%     of     B2B     Sales
     Organizations     Will     Transition     from     Intuition-Based     to
     Data-Driven   Decision   Making   by   2026,   5   2022.         URL:
     <a class='url' href='https://www.gartner.com/en/newsroom/press-releases/gartner-predicts-65--of-b2b-sales-organizations-will-transition-'><span class='ectt-1200'>https://www.gartner.com/en/newsroom/press-releases/gartner-predicts-65--of-b2b-sales-organizations-will-transition-</span></a>.
     </dd><dt>
<a id='Xfantasy-land_contributors'></a>[30] </dt><dd>GitHub.        Fantasy   land   spesifikaation   edistäjät.        URL:
     <a class='url' href='https://github.com/fantasyland/fantasy-land/graphs/contributors'><span class='ectt-1200'>https://github.com/fantasyland/fantasy-land/graphs/contributors</span></a>.
     </dd><dt>
<a id='Xfplanggoogletrend'></a>[31] </dt><dd>Google       Trends.                  Erlangin,       haskelin,       ocamlin,
     elixirin      ja      scalan      suosiokehitys,      2024.                URL:
     <a class='url' href='https://trends.google.com/trends/explore/TIMESERIES/1724633400?hl=fi&amp;tz=-180&amp;date=all&amp;hl=fi&amp;q=%2Fm%2F02mm3,%2Fm%2F03j_q,%2Fm%2F09wmx,%2Fm%2F0pl075p,%2Fm%2F091hdj&amp;sni=3'><span class='ectt-1200'>https://trends.google.com/trends/explore/TIMESERIES/1724633400?hl=fi&amp;tz=-180&amp;date=all&amp;hl=fi&amp;q=%2Fm%2F02mm3,%2Fm%2F03j_q,%2Fm%2F09wmx,%2Fm%2F0pl075p,%2Fm%2F091hdj&amp;sni=3</span></a>.
     </dd><dt>
<a id='Xread-it-later-11481'></a>[32] </dt><dd>guevara.   Why javascript promises aren’t technically monads, 2024.
     URL:
     <a class='url' href='https://github.com/guevara/read-it-later/issues/11481'><span class='ectt-1200'>https://github.com/guevara/read-it-later/issues/11481</span></a>.
     </dd><dt>
<a id='Xproposal-joint-iteration'></a>[33] </dt><dd>Jordan
     Harband et al. Why just on iterators and not on arrays?, 2023. URL:
     <a class='url' href='https://github.com/tc39/proposal-joint-iteration/issues/1'><span class='ectt-1200'>https://github.com/tc39/proposal-joint-iteration/issues/1</span></a>.
     </dd><dt>
<a id='Xhaskellallmonad'></a>[34] </dt><dd>Haskell     Wiki.               All     about     monads.               URL:
     <a class='url' href='https://wiki.haskell.org/All_About_Monads'><span class='ectt-1200'>https://wiki.haskell.org/All_About_Monads</span></a>.
                                                                         

                                                                         
     </dd><dt>
<a id='Xhaskellmonadlaws'></a>[35] </dt><dd>Haskell       Wiki.                   Monad       laws.                   URL:
     <a class='url' href='https://wiki.haskell.org/Monad_laws'><span class='ectt-1200'>https://wiki.haskell.org/Monad_laws</span></a>.
     </dd><dt>
<a id='Xhaskellcomposition'></a>[36] </dt><dd>Haskell    Wiki.          Function    composition,    2006.          URL:
     <a class='url' href='https://wiki.haskell.org/Function_composition'><span class='ectt-1200'>https://wiki.haskell.org/Function_composition</span></a>.
     </dd><dt>
<a id='Xhickey_persistent_2009'></a>[37] </dt><dd>Rich        Hickey.                     Persistent        data        structures
     and        managed        references,        2009.                       URL:
     <a class='url' href='https://www.infoq.com/presentations/Value-Identity-State-Rich-Hickey/'><span class='ectt-1200'>https://www.infoq.com/presentations/Value-Identity-State-Rich-Hickey/</span></a>.
     </dd><dt>
<a id='Xhickey_maybe_not'></a>[38] </dt><dd>Rich    Hickey.          Maybe    not,    2018.          Video.          URL:
     <a class='url' href='https://www.youtube.com/watch?v=YR5WdGrpoug'><span class='ectt-1200'>https://www.youtube.com/watch?v=YR5WdGrpoug</span></a>.
     </dd><dt>
<a id='Xcrocks'></a>[39] </dt><dd>Ian  Hofmann-Hicks.    crocks,  2024.    GitHub  repositorio.    URL:
     <a class='url' href='https://github.com/evilsoft/crocks'><span class='ectt-1200'>https://github.com/evilsoft/crocks</span></a>.
     </dd><dt>
<a id='Xholvikari2021category'></a>[40] </dt><dd>Antti   Holvikari   and   Esko   Lahti.       Category   theory   for   the
     non-phd  -  and  what  to  use  it  for,  2021.     Podcast.     URL:
     <a class='url' href='https://podcast.reaktor.com/forkpullmergepush/category-theory-for-the-non-phd-and-what-to-use-it-for/'><span class='ectt-1200'>https://podcast.reaktor.com/forkpullmergepush/category-theory-for-the-non-phd-and-what-to-use-it-for/</span></a>.
     </dd><dt>
<a id='Xalgebraic_data_types'></a>[41] </dt><dd>Marius  Jurgelenas.   Algebraic  data  types,  6  2019.   Video.   URL:
     <a class='url' href='https://www.youtube.com/watch?v=JYWJzaiCtEw'><span class='ectt-1200'>https://www.youtube.com/watch?v=JYWJzaiCtEw</span></a>.
     </dd><dt>
<a id='XSETL_SET_LANGUAGE'></a>[42] </dt><dd>K. Kennedy     and     J. Schwartz.            An     introduction     to
     the     set     theoretical     language     setl.             <span class='ecti-1200'>Computers    &amp;
     Mathematics   with   Applications</span>,    1(1):97–119,    1975.         URL:
     <a class='url' href='https://www.sciencedirect.com/science/article/pii/0898122175900115'><span class='ectt-1200'>https://www.sciencedirect.com/science/article/pii/0898122175900115</span></a>.
     </dd><dt>
<a id='Xmartin2017pragmaticfp'></a>[43] </dt><dd>Robert C.         Martin.                        Pragmatic         functional
     programming,    2017.         The    Clean    Code    Blog.         URL:
     <a class='url' href='https://blog.cleancoder.com/uncle-bob/2017/07/11/PragmaticFunctionalProgramming.html'><span class='ectt-1200'>https://blog.cleancoder.com/uncle-bob/2017/07/11/PragmaticFunctionalProgramming.html</span></a>.
     </dd><dt>
<a id='Xmartin2019whyclojure'></a>[44] </dt><dd>Robert C. Martin. Why clojure?, 2019. The Clean Code Blog. URL:
     <a class='url' href='https://blog.cleancoder.com/uncle-bob/2019/08/22/WhyClojure.html'><span class='ectt-1200'>https://blog.cleancoder.com/uncle-bob/2019/08/22/WhyClojure.html</span></a>.
                                                                         

                                                                         
     </dd><dt>
<a id='Xmdn_array_filter'></a>[45] </dt><dd>MDN     Web     Docs.             Array.prototype.filter.             URL:
     <a class='url' href='https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter'><span class='ectt-1200'>https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter</span></a>.
     </dd><dt>
<a id='Xmdn_array_map'></a>[46] </dt><dd>MDN     Web     Docs.             Array.prototype.map.             URL:
     <a class='url' href='https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map'><span class='ectt-1200'>https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map</span></a>.
     </dd><dt>
<a id='Xmdn_array_reduce'></a>[47] </dt><dd>MDN     Web     Docs.            Array.prototype.reduce.            URL:
     <a class='url' href='https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce'><span class='ectt-1200'>https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce</span></a>.
     </dd><dt>
<a id='Xmdn_promise'></a>[48] </dt><dd>MDN       Web       Docs.                   Promise.                   URL:
     <a class='url' href='https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise'><span class='ectt-1200'>https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise</span></a>.
     </dd><dt>
<a id='Xmdn_set_intersection'></a>[49] </dt><dd>MDN    Web    Docs.           Set.prototype.intersection.           URL:
     <a class='url' href='https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set/intersection'><span class='ectt-1200'>https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set/intersection</span></a>.
     </dd><dt>
<a id='Xmdn_set_union'></a>[50] </dt><dd>MDN     Web     Docs.              Set.prototype.union.              URL:
     <a class='url' href='https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set/union'><span class='ectt-1200'>https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set/union</span></a>.
     </dd><dt>
<a id='Xmdn_set_methods'></a>[51] </dt><dd>MDN  Web  Docs.     New  javascript  set  methods,  2024.     URL:
     <a class='url' href='https://developer.mozilla.org/en-US/blog/javascript-set-methods/'><span class='ectt-1200'>https://developer.mozilla.org/en-US/blog/javascript-set-methods/</span></a>.
     </dd><dt>
<a id='Xmdn_set'></a>[52] </dt><dd>MDN      Web      Docs.                 Set,      2024.                 URL:
     <a class='url' href='https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set'><span class='ectt-1200'>https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set</span></a>.
     </dd><dt>
<a id='Xmellin2005joukkooppi'></a>[53] </dt><dd>Ilkka Mellin. <span class='ecti-1200'>Johdatus todennäköisyyslaskentaan: Joukko-oppi</span>, 2005.
     URL: <a class='url' href='https://math.tkk.fi/opetus/sovtoda/luennot/vanhat/JOLIITE1.pdf'><span class='ectt-1200'>https://math.tkk.fi/opetus/sovtoda/luennot/vanhat/JOLIITE1.pdf</span></a>.
     </dd><dt>
<a id='Xbartosz_category_for_progamers_10'></a>[54] </dt><dd>Bartosz                                                                     Milewski.
     Category theory 10.2: Monoid in the category of endofunctors, 2016.
     Video. URL: <a class='url' href='https://www.youtube.com/watch?v=GmgoPd7VQ9Q'><span class='ectt-1200'>https://www.youtube.com/watch?v=GmgoPd7VQ9Q</span></a>.
     </dd><dt>
<a id='Xbartosz_category_for_progamers'></a>[55] </dt><dd>Bartosz                                                                     Milewski.
     Category theory 1.1: Motivation and philosophy, 2016.  Video.  URL:
     <a class='url' href='https://www.youtube.com/watch?v=I8LbkfSSR58'><span class='ectt-1200'>https://www.youtube.com/watch?v=I8LbkfSSR58</span></a>.
                                                                         

                                                                         
     </dd><dt>
<a id='Xmilewski2017category'></a>[56] </dt><dd>Bartosz Milewski.  <span class='ecti-1200'>Category Theory for Programmers</span>.  2017.  URL:
     <a class='url' href='https://bartoszmilewski.com/2014/10/28/category-theory-for-programmers-the-preface/'><span class='ectt-1200'>https://bartoszmilewski.com/2014/10/28/category-theory-for-programmers-the-preface/</span></a>.
     </dd><dt>
<a id='Xpromises-spec-94'></a>[57] </dt><dd>Paul Miller et al. Incorporate monads and category theory, 2013. URL:
     <a class='url' href='https://github.com/promises-aplus/promises-spec/issues/94'><span class='ectt-1200'>https://github.com/promises-aplus/promises-spec/issues/94</span></a>.
     </dd><dt>
<a id='Xthe_oo_way'></a>[58] </dt><dd>Christopher Okhravi. <span class='ecti-1200'>The Object Oriented Way</span>. Leanpub, 2024.
     </dd><dt>
<a id='Xoracle_stream_api'></a>[59] </dt><dd>Oracle.       <span class='ecti-1200'>Interface   Stream   -   Java   Platform   SE   8</span>.       URL:
     <a class='url' href='https://docs.oracle.com/javase/8/docs/api/java/util/function/package-summary.html'><span class='ectt-1200'>https://docs.oracle.com/javase/8/docs/api/java/util/function/package-summary.html</span></a>.
     </dd><dt>
<a id='Xoracle_function_package'></a>[60] </dt><dd>Oracle.    <span class='ecti-1200'>Package  java.util.function  -  Java  Platform  SE  8</span>.    URL:
     <a class='url' href='https://docs.oracle.com/javase/8/docs/api/java/util/function/package-summary.html'><span class='ectt-1200'>https://docs.oracle.com/javase/8/docs/api/java/util/function/package-summary.html</span></a>.
     </dd><dt>
<a id='Xviljofruits'></a>[61] </dt><dd>Viljo Pennanen.  Hedelmät, 9 2024.  Kuvatiedostoon saatu oikeudet
     suoraan tekijältä.
     </dd><dt>
<a id='Xpypl_lang'></a>[62] </dt><dd>PYPL.         Popularity    of    programming    language.         URL:
     <a class='url' href='https://pypl.github.io/PYPL.html'><span class='ectt-1200'>https://pypl.github.io/PYPL.html</span></a>.
     </dd><dt>
<a id='Xramda'></a>[63] </dt><dd>Ramda.         Ramda,   2024.         GitHub   repositorio.         URL:
     <a class='url' href='https://github.com/ramda/ramda'><span class='ectt-1200'>https://github.com/ramda/ramda</span></a>.
     </dd><dt>
<a id='Xramda_docs'></a>[64] </dt><dd>Ramda.              <span class='ecti-1200'>Ramda     Documentation</span>,     2024.              URL:
     <a class='url' href='https://ramdajs.com/docs/'><span class='ectt-1200'>https://ramdajs.com/docs/</span></a>.
     </dd><dt>
<a id='Xsanctuary'></a>[65] </dt><dd>Sanctuary.       Sactuary,   2024.       GitHub   repositorio.       URL:
     <a class='url' href='https://github.com/sanctuary-js/sanctuary'><span class='ectt-1200'>https://github.com/sanctuary-js/sanctuary</span></a>.
     </dd><dt>
<a id='Xtype_vs_set'></a>[66] </dt><dd>Stack     Exchange.             What     exactly     is     the     semantic
     difference       between       set       and       type?                   URL:
     <a class='url' href='https://cs.stackexchange.com/questions/91330/what-exactly-is-the-semantic-difference-between-set-and-type'><span class='ectt-1200'>https://cs.stackexchange.com/questions/91330/what-exactly-is-the-semantic-difference-between-set-and-type</span></a>.
                                                                         

                                                                         
     </dd><dt>
<a id='Xstackoverflow_what_monad'></a>[67] </dt><dd>Stack    Overflow.         What    is    a    monad?,    2008.         URL:
     <a class='url' href='https://stackoverflow.com/questions/44965/what-is-a-monad'><span class='ectt-1200'>https://stackoverflow.com/questions/44965/what-is-a-monad</span></a>.
     </dd><dt>
<a id='Xstackoverflow_flatmap_monad'></a>[68] </dt><dd>Stack Overflow.  Is a collection with flatmap a monad?, 2015.  URL:
     <a class='url' href='https://stackoverflow.com/questions/27750046/is-a-collection-with-flatmap-a-monad'><span class='ectt-1200'>https://stackoverflow.com/questions/27750046/is-a-collection-with-flatmap-a-monad</span></a>.
     </dd><dt>
<a id='Xstackoverflow_why_monad'></a>[69] </dt><dd>Stack   Overflow.      Why   are   promises   monads?,   2017.      URL:
     <a class='url' href='https://stackoverflow.com/questions/45712106/why-are-promises-monads'><span class='ectt-1200'>https://stackoverflow.com/questions/45712106/why-are-promises-monads</span></a>.
     </dd><dt>
<a id='Xsundstrom_java_fp'></a>[70] </dt><dd>Jarno
     Sundström.  Java funktionaalisessa ohjelmoinnissa.  Insinöörityö.
     Metropolia Ammattikorkeakoulu. Theseus-tietokanta, 2021.
     </dd><dt>
<a id='XTan2004'></a>[71] </dt><dd>Gang Tan.  A brief history of functional programming, 2004.  URL:
     <a class='url' href='https://www.cse.psu.edu/~gxt29/historyOfFP/historyOfFP.html'><span class='ectt-1200'>https://www.cse.psu.edu/~gxt29/historyOfFP/historyOfFP.html</span></a>.
     </dd><dt>
<a id='Xtc39_pipeline_operator'></a>[72] </dt><dd>TC39.               Es      pipe      operator      (2021).               URL:
     <a class='url' href='https://tc39.es/proposal-pipeline-operator/'><span class='ectt-1200'>https://tc39.es/proposal-pipeline-operator/</span></a>.
     </dd><dt>
<a id='Xtc39_iterator_helpers'></a>[73] </dt><dd>TC39.                        Iterator         helpers.                        URL:
     <a class='url' href='https://tc39.es/proposal-iterator-helpers/'><span class='ectt-1200'>https://tc39.es/proposal-iterator-helpers/</span></a>.
     </dd><dt>
<a id='Xturner_trauring_copying_2020'></a>[74] </dt><dd>Itamar Turner-Trauring.  Copying data is wasteful, mutating data is
     dangerous,                2020.                                               URL:
     <a class='url' href='https://pythonspeed.com/articles/minimizing-copying/'><span class='ectt-1200'>https://pythonspeed.com/articles/minimizing-copying/</span></a>.
     </dd><dt>
<a id='Xvakil2016'></a>[75] </dt><dd>Anjana                                                                           Vakil.
     Learning functional programming with javascript, 6 2016. Video. URL:
     <a class='url' href='https://www.youtube.com/watch?v=e-5obm1G_FY'><span class='ectt-1200'>https://www.youtube.com/watch?v=e-5obm1G_FY</span></a>.
     </dd><dt>
<a id='Xvanrossum2008reduce'></a>[76] </dt><dd>Guido van Rossum. The fate of reduce() in python 3000, 2008. URL:
     <a class='url' href='https://www.artima.com/weblogs/viewpost.jsp?thread=98196'><span class='ectt-1200'>https://www.artima.com/weblogs/viewpost.jsp?thread=98196</span></a>.
                                                                         

                                                                         
     </dd><dt>
<a id='Xjavascript_combinators'></a>[77] </dt><dd>Aldwin Vlasblom.  Common combinators in javascript, 2020.  URL:
     <a class='url' href='https://gist.github.com/Avaq/1f0636ec5c8d6aed2e45'><span class='ectt-1200'>https://gist.github.com/Avaq/1f0636ec5c8d6aed2e45</span></a>.
     </dd><dt>
<a id='Xms_fp_vs_imperative'></a>[78] </dt><dd>Wagner       ym.                    Functional       programming       vs.
     imperative      programming      (linq      to      xml).               URL:
     <a class='url' href='https://learn.microsoft.com/en-us/dotnet/standard/linq/functional-vs-imperative-programming#functional-programming-vs-imperative-programming'><span class='ectt-1200'>https://learn.microsoft.com/en-us/dotnet/standard/linq/functional-vs-imperative-programming#functional-programming-vs-imperative-programming</span></a>.
     </dd><dt>
<a id='X8_must_know_array_methods'></a>[79] </dt><dd>Web Dev Simplified.   8 must know javascript array methods, 2019.
     Video. URL: <a class='url' href='https://www.youtube.com/watch?v=R8rmfD9Y5-c'><span class='ectt-1200'>https://www.youtube.com/watch?v=R8rmfD9Y5-c</span></a>.
     </dd><dt>
<a id='Xfunctional_fixedness'></a>[80] </dt><dd>Wikipedia.             Functional     fixedness,     2024.             URL:
     <a class='url' href='https://en.wikipedia.org/wiki/Functional_fixedness'><span class='ectt-1200'>https://en.wikipedia.org/wiki/Functional_fixedness</span></a>.
     </dd><dt>
<a id='Xcategory_theory'></a>[81] </dt><dd>Wikipedia.                  Kategoriateoria,       2024.                  URL:
     <a class='url' href='https://fi.wikipedia.org/wiki/Kategoriateoria'><span class='ectt-1200'>https://fi.wikipedia.org/wiki/Kategoriateoria</span></a>.
     </dd><dt>
<a id='Xmonad_wikipedia'></a>[82] </dt><dd>Wikipedia.      Monad   (functional   programming),   2024.      URL:
     <a class='url' href='https://en.wikipedia.org/wiki/Monad_(functional_programming)'><span class='ectt-1200'>https://en.wikipedia.org/wiki/Monad_(functional_programming)</span></a>.
     </dd><dt>
<a id='Xtype_theory'></a>[83] </dt><dd>Wikipedia.                 Type      theory,      2024.                 URL:
     <a class='url' href='https://en.wikipedia.org/wiki/Type_theory'><span class='ectt-1200'>https://en.wikipedia.org/wiki/Type_theory</span></a>.
     </dd><dt>
<a id='Xfsharpcomposition'></a>[84] </dt><dd>Scott    Wlaschin.         Function    composition,    2012.         URL:
     <a class='url' href='https://fsharpforfunandprofit.com/posts/function-composition/'><span class='ectt-1200'>https://fsharpforfunandprofit.com/posts/function-composition/</span></a>.
     </dd></dl>
</section>
                                                                         

                                                                         
<p id='sanasto'>   <a id='likesection.1'></a><a id='x1-46001x'></a><a id='Q1-1-90'></a>
   </p> 

   <h2 class='likechapterHead' id='sanasto1'><a id='x1-47000'></a>Sanasto</h2>
      <dl class='description'><dt class='description'>
<a id='glo_declarative_programming'></a><span class='ecbx-1200'>Deklaratiivinen ohjelmointi</span> </dt><dd class='description'>
      <p>
      </p> 
<p>Ohjelmointiparadigma,
      jossa ohjelmoija määrittelee, mitä lopputuloksen tulisi olla, mutta
      ei yksityiskohtaisesti sitä, miten tämä tulos saavutetaan , </p> 
<div class='glsgroupskip'></div> 

      </dd><dt class='description'>
<a id='glo_functional_programming'></a><span class='ecbx-1200'>Funktionaalinen ohjelmointi</span> </dt><dd class='description'>
      <p>
      </p> 
<p>Ohjelmointiparadigma,   joka   korostaa   laskennan   mallintamista
      funktioiden avulla </p> 
<div class='glsgroupskip'></div> 

      </dd><dt class='description'>
<a id='glo_imperative_programming'></a><span class='ecbx-1200'>Imperatiivinen ohjelmointi</span> </dt><dd class='description'>
      <p>
      </p> 
<p>Ohjelmointiparadigma,                                                      jossa
      ohjelmoija antaa tarkat ohjeet siitä, kuinka tehtävä suoritetaan
      vaihe  vaiheelta.  Tämä  lähestymistapa  keskittyy  ohjelman  tilan
      hallintaan  ja  muuttamiseen  käskyjen  avulla,  kuten  muuttujien
      asettaminen ja silmukoiden käyttö , </p> 
<div class='glsgroupskip'></div> 

      </dd><dt class='description'>
<a id='glo_js'></a><span class='ecbx-1200'>JavaScript</span> </dt><dd class='description'>
      <p>
      </p> 
<p>ohjelmointikieli (js) , ,
      </p> 
</dd><dt class='description'>
<a id='glo_set_theory'></a><span class='ecbx-1200'>Joukko-oppi</span> </dt><dd class='description'>
      <p>
      </p> 
<p><em><span class='ecti-1200'>set          theory</span></em>           Joukko-oppi            on            joukkojen
      ominaisuuksiin  perehtynyt  matematiikan  osa-alue.  Joukko-oppi  on
      perustavanlaatuisessa merkityksessä tietorakenteissa. Joukko-opissa
      olennaisimpia  laskutoimituksia  ovat  esimerkiksi  unioni,  leikkaus  ja
                                                                         

                                                                         
      joukkoerotus </p> 
<div class='glsgroupskip'></div> 

      </dd><dt class='description'>
<a id='glo_category_theory'></a><span class='ecbx-1200'>Kategoriateoria</span> </dt><dd class='description'>
      <p>
      </p> 
<p><em><span class='ecti-1200'>category theory</span></em> Kategoriateoria on matematiikan osa-alue, joka tutkii
      erittäin                                                           yleistävällä
      tasolla rakenteiden välisiä suhteita ja yhteyksiä. Kategoriateoriaa
      käytetään funktionaalisen ohjelmoinnin apukeinona , ,
      </p> 
</dd><dt class='description'>
<a id='glo_language_agnostic'></a><span class='ecbx-1200'>Kieliagnostinen</span> </dt><dd class='description'>
      <p>
      </p> 
<p><em><span class='ecti-1200'>language        agnostic</span></em>        Kieliagnostisuudella         tarkoitetaan
      lähestymistapaa,  jossa  ei  keskitytä  tiettyyn  ohjelmointikieleen,
      vaan   tarkastellaan   peruskäsitteitä   ja   -periaatteita   yleisellä
      tasolla, sovellettavissa eri kieliin riippumatta niiden syntaksista tai
      erityispiirteistä ,
      </p> 
</dd><dt class='description'>
<a id='glo_correctness'></a><span class='ecbx-1200'>Koodin oikeellisuus</span> </dt><dd class='description'>
      <p>
      </p> 
<p><em><span class='ecti-1200'>correctness</span></em> Koodin  oikeellisuus  on  ohjelman  kyky  täyttää  sille
      asetetut vaatimukset virheettömästi. Toisaalta ilman vaatimuksia
      koodi ei voi olla oikeellista , , ,
      </p> 
</dd><dt class='description'>
<a id='glo_higher_order_function'></a><span class='ecbx-1200'>Korkeamman asteen funktio</span> </dt><dd class='description'>
      <p>
      </p> 
<p><em><span class='ecti-1200'>higher order function</span></em> Funktiot, jotka voivat ottaa toisia funktioita
      syötteenään tai palauttavat funktioita tuloksena , , </p> 
<div class='glsgroupskip'></div> 

      </dd><dt class='description'>
<a id='glo_monad'></a><span class='ecbx-1200'>Monadi</span> </dt><dd class='description'>
      <p>
      </p> 
<p><em><span class='ecti-1200'>monad</span></em>   Monadi   on   abstrakti   tietorakenne,   joka   mahdollistaa
      ohjelman  kontrollin  virtaamisen  läpinäkyvämmin  ilman,  että
      sivuvaikutuksia  tarvitsee  käsitellä  suoraan.   Monadi  on  alun
      perin  kategoriateorian  käsite,  mutta  sitä  käytetään  myös
      funktionaalisessa ohjelmoinnissa ,
                                                                         

                                                                         
      </p> 
</dd><dt class='description'>
<a id='glo_immutable_data'></a><span class='ecbx-1200'>Muuttumaton data</span> </dt><dd class='description'>
      <p>
      </p> 
<p><em><span class='ecti-1200'>immutable  data</span></em>  Data  jota  ei  voi  muuttaa  sen  luomisen  jälkeen.
      Muuttumattomuutta käytetään funktionaalisessa ohjelmoinnissa
      ohjelman luotettavuuden vuoksi , </p> 
<div class='glsgroupskip'></div> 

      </dd><dt class='description'>
<a id='glo_ohjausrakenne'></a><span class='ecbx-1200'>Ohjausrakenne</span> </dt><dd class='description'>
      <p>
      </p> 
<p><em><span class='ecti-1200'>control  structures</span></em>  Ohjelmoinnissa  käytettäviä  rakenteita,  jotka
      määrittävät   ohjelman   suorituksen   kulun   ja   järjestyksen.
      Keskeisiä ovat ehtorakenteet (esim. <code><span class='ectt-1200'>if</span></code>, <code><span class='ectt-1200'>else</span></code>), silmukat (esim. <code><span class='ectt-1200'>for</span></code>,
      <code><span class='ectt-1200'>while</span></code>) ja haaraumat (esim. <code><span class='ectt-1200'>goto</span></code>, <code><span class='ectt-1200'>break</span></code>)
      </p> 
</dd><dt class='description'>
<a id='glo_object_oriented_programming'></a><span class='ecbx-1200'>Olio-ohjelmointi</span> </dt><dd class='description'>
      <p>
      </p> 
<p>Ohjelmointiparadigma,           joka           perustuu           olioiden,
      eli  ohjelmakomponenttien,  ympärille,  jotka  yhdistävät  sekä
      dataa  että  siihen  liittyviä  toimintoja.  Olio-ohjelmointi  korostaa
      perinnän, kapseloinnin ja polymorfismin kaltaisia periaatteita </p> 
<div class='glsgroupskip'></div> 

      </dd><dt class='description'>
<a id='glo_pure_function'></a><span class='ecbx-1200'>Puhdas funktio</span> </dt><dd class='description'>
      <p>
      </p> 
<p><em><span class='ecti-1200'>pure  function</span></em>  Funktiot,  jotka  eivät  vaikuta  ohjelman  tilaan  ja
      palauttavat aina saman tuloksen samoilla syötteillä , </p> 
<div class='glsgroupskip'></div> 

      </dd><dt class='description'>
<a id='glo_side_effects'></a><span class='ecbx-1200'>Sivuvaikutus</span> </dt><dd class='description'>
      <p>
      </p> 
<p><em><span class='ecti-1200'>side effect</span></em> Puhtaiden funktioiden ulkopuolella tapahtuvaa toimintaa,
      eli      esimerkiksi      tiedostojen      lukeminen,      http-pyyntöjen
      lähettäminen tai muuttujan mutatointi </p> 
<div class='glsgroupskip'></div> 

      </dd><dt class='description'>
<a id='glo_ts'></a><span class='ecbx-1200'>TypeScript</span> </dt><dd class='description'>
                                                                         

                                                                         
      <p>
      </p> 
<p>ohjelmointikieli (ts). <a class='glossary' href='#glo_js'>JavaScript</a> mutta mukaan on lisätty staattinen
      tyypitys , , </p> 
<div class='glsgroupskip'></div> 

      </dd><dt class='description'>
<a id='glo_composed_function'></a><span class='ecbx-1200'>Yhdistetty funktio</span> </dt><dd class='description'>
      <p>
      </p> 
<p><em><span class='ecti-1200'>function composition</span></em> Useammasta funktiosta koostettu funktio, jossa
      funktiot  suoritetaan  toinen  toisensa  jälkeen  niin,  että  edellisen
      paluuarvo annetaan seuraavan syötteeksi , , ,</p> 
</dd></dl>
    
</body> 
</html>